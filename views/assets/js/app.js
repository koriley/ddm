"use strict";

function updateAbilityBonus(myAbility) {
  var ability = jQuery(myAbility).val();
  var modifier = jQuery(myAbility).parent().children('.modifier-bubble').text();

  if (!jQuery.isNumeric(ability)) {
    ability = 1;
    jQuery(myAbility).val(ability);
  }

  modifier = Math.floor((ability - 10) / 2);
  jQuery(myAbility).parent().children('.modifier-bubble').text(modifier);
}

;
jQuery(".ability").each(function () {
  updateAbilityBonus(jQuery(this));
  jQuery(this).on("focus", function () {
    jQuery(this).select();
  });
  jQuery(this).on("keyup", function () {
    updateAbilityBonus(jQuery(this));
    updateProf(jQuery('.savingThrows #' + jQuery(this).attr('id')));
  });
});
'use strict'; //remove line below when testing frontend

var fs = require('fs'); //////////////////


jQuery("document").ready(function () {
  jQuery(".drag").draggable({
    containment: ".mainView",
    scroll: false
  });
});
var books = {};
getDirContents("./books").then(function (files) {
  // console.log();
  // console.log(JSON.parse(JSON.stringify(files.files[0].name)));
  for (var i = 0; i <= files.files.length - 1; i++) {
    readAFile("./books/" + JSON.parse(JSON.stringify(files.files[i].name))).then(function (book) {
      var bookTitle = JSON.parse(book);
      console.log(bookTitle.details.name);
      jQuery(".bookList").append("<div class=\"book\">".concat(bookTitle.details.name, "<div>"));
    });
  }
});
"use strict";

function clearTop() {
  jQuery(".drag").each(function () {
    jQuery(this).removeClass("onTop");
  });
}

;
jQuery(".drag").on("mousedown", function () {
  clearTop();
  jQuery(this).addClass("onTop");
});
'use strict';

function readAFile(filepath) {
  return new Promise(function (resolve, reject) {
    fs.readFile(filepath, 'utf-8', function (err, data) {
      if (err) {
        reject("An error ocurred reading the file :" + err.message);
        return;
      } else {
        resolve(data);
      }
    });
  });
}

function writeFile(filepath, data) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(filepath, data, function (err) {
      if (err) {
        reject(err);
      }
    });
  });
}

function getDirContents(dir) {
  return new Promise(function (resolve, reject) {
    var files = {};
    var fileNames = [];

    try {
      fs.readdirSync(dir).forEach(function (fileName) {
        fileNames.push({
          "name": fileName
        });
        files = {
          "files": fileNames
        };
      });
      resolve(files);
    } catch (error) {
      reject(error);
    }
  });
} //write test
// var testObj  = "This is a write test";
// writeFile("../test.txt", testObj);
"use strict";

jQuery(".close").click(function () {
  jQuery(this).parent().toggle();
});
jQuery(".menu button").click(function () {
  var openMe = jQuery(this).attr("data-open");
  jQuery("." + openMe).toggle();
  clearTop();
  jQuery("." + openMe).addClass("onTop");
});
"use strict";

var profB = jQuery('#profBonus').val();
somethingClever();
jQuery('#profBonus').on("keyup", function () {
  profB = jQuery('#profBonus').val();
  somethingClever();
});

function somethingClever() {
  jQuery('.icon-prof').each(function () {
    var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
    var currentClass = jQuery(this).attr('class');
    var currentPos = jQuery.inArray(currentClass, classes);
    var myProf = jQuery(this).parent().children('.profVal');
    updateProf(jQuery(myProf), currentPos);
  });
}

function updateProf(myProf, myProfSkillFlag) {
  var thisAbility = jQuery(myProf).attr('id');
  var thisAbilityBonusID = '#' + thisAbility + '-Bonus';
  var thisAbilityBonus = jQuery('.abilities ' + thisAbilityBonusID).text();
  var newVal = parseInt(thisAbilityBonus);

  if (myProfSkillFlag == 0) {
    var newVal = parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 1) {
    var newVal = parseInt(profB) + parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 2) {
    var newVal = parseInt(profB) * 2 + parseInt(thisAbilityBonus);
  }

  jQuery(myProf).text(newVal);
}

;
jQuery('.icon-prof').click(function () {
  var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
  var currentClass = jQuery(this).attr('class');
  var currentPos = jQuery.inArray(currentClass, classes);
  var newPos = (currentPos + 1) % classes.length;
  var newClass = classes[newPos];
  jQuery(this).attr('class', newClass);
  var myProf = jQuery(this).parent().children('.profVal');
  updateProf(jQuery(myProf), newPos);
});
"use strict";

//themes
var buttonOptions = ['default', 'black', 'gray', 'light', 'red'];
jQuery(buttonOptions).each(function () {
  var myStyle = this;
  var myId = '#' + myStyle;
  jQuery(myId).on("click", function () {
    $("body").removeAttr('class');
    jQuery('body').addClass('theme-' + myStyle);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFiaWxpdHlCb251cy5qcyIsImFwcC5qcyIsImNsaWNrVG9Gcm9udC5qcyIsImlvLmpzIiwibWVudUJ1dHRvbnMuanMiLCJwcm9maWNpZW5jaWVzLmpzIiwidGhlbWVzLmpzIl0sIm5hbWVzIjpbInVwZGF0ZUFiaWxpdHlCb251cyIsIm15QWJpbGl0eSIsImFiaWxpdHkiLCJqUXVlcnkiLCJ2YWwiLCJtb2RpZmllciIsInBhcmVudCIsImNoaWxkcmVuIiwidGV4dCIsImlzTnVtZXJpYyIsIk1hdGgiLCJmbG9vciIsImVhY2giLCJvbiIsInNlbGVjdCIsInVwZGF0ZVByb2YiLCJhdHRyIiwiZnMiLCJyZXF1aXJlIiwicmVhZHkiLCJkcmFnZ2FibGUiLCJjb250YWlubWVudCIsInNjcm9sbCIsImJvb2tzIiwiZ2V0RGlyQ29udGVudHMiLCJ0aGVuIiwiZmlsZXMiLCJpIiwibGVuZ3RoIiwicmVhZEFGaWxlIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibmFtZSIsImJvb2siLCJib29rVGl0bGUiLCJjb25zb2xlIiwibG9nIiwiZGV0YWlscyIsImFwcGVuZCIsImNsZWFyVG9wIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImZpbGVwYXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkRmlsZSIsImVyciIsImRhdGEiLCJtZXNzYWdlIiwid3JpdGVGaWxlIiwiZGlyIiwiZmlsZU5hbWVzIiwicmVhZGRpclN5bmMiLCJmb3JFYWNoIiwiZmlsZU5hbWUiLCJwdXNoIiwiZXJyb3IiLCJjbGljayIsInRvZ2dsZSIsIm9wZW5NZSIsInByb2ZCIiwic29tZXRoaW5nQ2xldmVyIiwiY2xhc3NlcyIsImN1cnJlbnRDbGFzcyIsImN1cnJlbnRQb3MiLCJpbkFycmF5IiwibXlQcm9mIiwibXlQcm9mU2tpbGxGbGFnIiwidGhpc0FiaWxpdHkiLCJ0aGlzQWJpbGl0eUJvbnVzSUQiLCJ0aGlzQWJpbGl0eUJvbnVzIiwibmV3VmFsIiwicGFyc2VJbnQiLCJuZXdQb3MiLCJuZXdDbGFzcyIsImJ1dHRvbk9wdGlvbnMiLCJteVN0eWxlIiwibXlJZCIsIiQiLCJyZW1vdmVBdHRyIl0sIm1hcHBpbmdzIjoiOztBQUNBLFNBQVNBLGtCQUFULENBQTRCQyxTQUE1QixFQUF1QztBQUNuQyxNQUFJQyxPQUFPLEdBQUdDLE1BQU0sQ0FBQ0YsU0FBRCxDQUFOLENBQWtCRyxHQUFsQixFQUFkO0FBRUEsTUFBSUMsUUFBUSxHQUFHRixNQUFNLENBQUNGLFNBQUQsQ0FBTixDQUFrQkssTUFBbEIsR0FBMkJDLFFBQTNCLENBQW9DLGtCQUFwQyxFQUF3REMsSUFBeEQsRUFBZjs7QUFDQSxNQUFJLENBQUNMLE1BQU0sQ0FBQ00sU0FBUCxDQUFpQlAsT0FBakIsQ0FBTCxFQUFnQztBQUM1QkEsSUFBQUEsT0FBTyxHQUFHLENBQVY7QUFDQUMsSUFBQUEsTUFBTSxDQUFDRixTQUFELENBQU4sQ0FBa0JHLEdBQWxCLENBQXNCRixPQUF0QjtBQUNIOztBQUVERyxFQUFBQSxRQUFRLEdBQUdLLElBQUksQ0FBQ0MsS0FBTCxDQUFXLENBQUNULE9BQU8sR0FBRyxFQUFYLElBQWlCLENBQTVCLENBQVg7QUFDQUMsRUFBQUEsTUFBTSxDQUFDRixTQUFELENBQU4sQ0FBa0JLLE1BQWxCLEdBQTJCQyxRQUEzQixDQUFvQyxrQkFBcEMsRUFBd0RDLElBQXhELENBQTZESCxRQUE3RDtBQUNIOztBQUFBO0FBR0RGLE1BQU0sQ0FBQyxVQUFELENBQU4sQ0FBbUJTLElBQW5CLENBQXdCLFlBQVc7QUFDL0JaLEVBQUFBLGtCQUFrQixDQUFDRyxNQUFNLENBQUMsSUFBRCxDQUFQLENBQWxCO0FBRUFBLEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYVUsRUFBYixDQUFnQixPQUFoQixFQUF5QixZQUFXO0FBQ2hDVixJQUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFXLE1BQWI7QUFDSCxHQUZEO0FBR0FYLEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYVUsRUFBYixDQUFnQixPQUFo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QUFHLENBQWQsSUFBbUJGLE9BQU8sQ0FBQ3BDLE1BQXpDO0FBQ0EsTUFBSWdELFFBQVEsR0FBR1osT0FBTyxDQUFDVyxNQUFELENBQXRCO0FBQ0F4RSxFQUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFhLElBQWIsQ0FBa0IsT0FBbEIsRUFBMkI0RCxRQUEzQjtBQUNBLE1BQUlSLE1BQU0sR0FBR2pFLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYUcsTUFBYixHQUFzQkMsUUFBdEIsQ0FBK0IsVUFBL0IsQ0FBYjtBQUNBUSxFQUFBQSxVQUFVLENBQUNaLE1BQU0sQ0FBQ2lFLE1BQUQsQ0FBUCxFQUFpQk8sTUFBakIsQ0FBVjtBQUNILENBVEQ7OztBQ3BDQTtBQUNBLElBQUlFLGFBQWEsR0FBRyxDQUFDLFNBQUQsRUFBWSxPQUFaLEVBQXFCLE1BQXJCLEVBQTZCLE9BQTdCLEVBQXNDLEtBQXRDLENBQXBCO0FBQ0ExRSxNQUFNLENBQUMwRSxhQUFELENBQU4sQ0FBc0JqRSxJQUF0QixDQUEyQixZQUFXO0FBQ2xDLE1BQUlrRSxPQUFPLEdBQUcsSUFBZDtBQUNBLE1BQUlDLElBQUksR0FBRyxNQUFNRCxPQUFqQjtBQUNBM0UsRUFBQUEsTUFBTSxDQUFDNEUsSUFBRCxDQUFOLENBQWFsRSxFQUFiLENBQWdCLE9BQWhCLEVBQXlCLFlBQVc7QUFDaENtRSxJQUFBQSxDQUFDLENBQUMsTUFBRCxDQUFELENBQVVDLFVBQVYsQ0FBcUIsT0FBckI7QUFDQTlFLElBQUFBLE1BQU0sQ0FBQyxNQUFELENBQU4sQ0FBZXVDLFFBQWYsQ0FBd0IsV0FBV29DLE9BQW5DO0FBQ0gsR0FIRDtBQUlILENBUEQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5mdW5jdGlvbiB1cGRhdGVBYmlsaXR5Qm9udXMobXlBYmlsaXR5KSB7XG4gICAgdmFyIGFiaWxpdHkgPSBqUXVlcnkobXlBYmlsaXR5KS52YWwoKTtcblxuICAgIHZhciBtb2RpZmllciA9IGpRdWVyeShteUFiaWxpdHkpLnBhcmVudCgpLmNoaWxkcmVuKCcubW9kaWZpZXItYnViYmxlJykudGV4dCgpO1xuICAgIGlmICghalF1ZXJ5LmlzTnVtZXJpYyhhYmlsaXR5KSkge1xuICAgICAgICBhYmlsaXR5ID0gMTtcbiAgICAgICAgalF1ZXJ5KG15QWJpbGl0eSkudmFsKGFiaWxpdHkpO1xuICAgIH1cblxuICAgIG1vZGlmaWVyID0gTWF0aC5mbG9vcigoYWJpbGl0eSAtIDEwKSAvIDIpO1xuICAgIGpRdWVyeShteUFiaWxpdHkpLnBhcmVudCgpLmNoaWxkcmVuKCcubW9kaWZpZXItYnViYmxlJykudGV4dChtb2RpZmllcik7XG59O1xuXG5cbmpRdWVyeShcIi5hYmlsaXR5XCIpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdXBkYXRlQWJpbGl0eUJvbnVzKGpRdWVyeSh0aGlzKSk7XG5cbiAgICBqUXVlcnkodGhpcykub24oXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnNlbGVjdCgpO1xuICAgIH0pXG4gICAgalF1ZXJ5KHRoaXMpLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHVwZGF0ZUFiaWxpdHlCb251cyhqUXVlcnkodGhpcykpO1xuICAgICAgICB1cGRhdGVQcm9mKGpRdWVyeSgnLnNhdmluZ1Rocm93cyAjJytqUXVlcnkodGhpcykuYXR0cignaWQnKSkpO1xuICAgIH0pO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG4vL3JlbW92ZSBsaW5lIGJlbG93IHdoZW4gdGVzdGluZyBmcm9udGVuZFxudmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbi8vLy8vLy8vLy8vLy8vLy8vL1xuXG5qUXVlcnkoXCJkb2N1bWVudFwiKS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgalF1ZXJ5KFwiLmRyYWdcIikuZHJhZ2dhYmxlKHtcbiAgICAgICAgY29udGFpbm1lbnQ6IFwiLm1haW5WaWV3XCIsXG4gICAgICAgIHNjcm9sbDogZmFsc2VcbiAgICB9KTtcbn0pO1xuXG52YXIgYm9va3MgPSB7fTtcbmdldERpckNvbnRlbnRzKFwiLi9ib29rc1wiKS50aGVuKGZ1bmN0aW9uIChmaWxlcykge1xuICAvLyBjb25zb2xlLmxvZygpO1xuICAvLyBjb25zb2xlLmxvZyhKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbGVzLmZpbGVzWzBdLm5hbWUpKSk7XG4gIGZvcih2YXIgaSA9IDA7IGkgPD0gZmlsZXMuZmlsZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgcmVhZEFGaWxlKFwiLi9ib29rcy9cIiArIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZXMuZmlsZXNbaV0ubmFtZSkpKS50aGVuKGZ1bmN0aW9uIChib29rKSB7XG4gICAgICB2YXIgYm9va1RpdGxlID0gSlNPTi5wYXJzZShib29rKTtcbiAgICAgIGNvbnNvbGUubG9nKGJvb2tUaXRsZS5kZXRhaWxzLm5hbWUpO1xuICAgICAgalF1ZXJ5KFwiLmJvb2tMaXN0XCIpLmFwcGVuZChgPGRpdiBjbGFzcz1cImJvb2tcIj4ke2Jvb2tUaXRsZS5kZXRhaWxzLm5hbWV9PGRpdj5gKTtcbiAgICB9KTtcbiAgfVxufSk7IiwiZnVuY3Rpb24gY2xlYXJUb3AoKSB7XG4gICAgalF1ZXJ5KFwiLmRyYWdcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZUNsYXNzKFwib25Ub3BcIik7XG4gICAgfSk7XG59O1xuXG5qUXVlcnkoXCIuZHJhZ1wiKS5vbihcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRvcCgpO1xuICAgIGpRdWVyeSh0aGlzKS5hZGRDbGFzcyhcIm9uVG9wXCIpO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHJlYWRBRmlsZShmaWxlcGF0aCl7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgZnMucmVhZEZpbGUoZmlsZXBhdGgsICd1dGYtOCcsIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIkFuIGVycm9yIG9jdXJyZWQgcmVhZGluZyB0aGUgZmlsZSA6XCIgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gd3JpdGVGaWxlKGZpbGVwYXRoLCBkYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZzLndyaXRlRmlsZShmaWxlcGF0aCwgZGF0YSwgKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZ2V0RGlyQ29udGVudHMoZGlyKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgdmFyIGZpbGVzID0ge307XG4gICAgICAgIHZhciBmaWxlTmFtZXMgPSBbXTtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgZnMucmVhZGRpclN5bmMoZGlyKS5mb3JFYWNoKChmaWxlTmFtZSk9PntcbiAgICAgICAgICAgICAgICBmaWxlTmFtZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOmZpbGVOYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBmaWxlcyA9IHtcImZpbGVzXCI6ZmlsZU5hbWVzfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc29sdmUoZmlsZXMpO1xuICAgICAgICB9Y2F0Y2goZXJyb3Ipe1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9KVxufVxuLy93cml0ZSB0ZXN0XG4vLyB2YXIgdGVzdE9iaiAgPSBcIlRoaXMgaXMgYSB3cml0ZSB0ZXN0XCI7XG4vLyB3cml0ZUZpbGUoXCIuLi90ZXN0LnR4dFwiLCB0ZXN0T2JqKTtcbiIsImpRdWVyeShcIi5jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnRvZ2dsZSgpO1xufSlcbmpRdWVyeShcIi5tZW51IGJ1dHRvblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wZW5NZSA9IGpRdWVyeSh0aGlzKS5hdHRyKFwiZGF0YS1vcGVuXCIpO1xuICAgIGpRdWVyeShcIi5cIiArIG9wZW5NZSkudG9nZ2xlKCk7XG4gICAgY2xlYXJUb3AoKTtcbiAgICBqUXVlcnkoXCIuXCIgKyBvcGVuTWUpLmFkZENsYXNzKFwib25Ub3BcIik7XG59KTsiLCJ2YXIgcHJvZkIgPSBqUXVlcnkoJyNwcm9mQm9udXMnKS52YWwoKTtcbnNvbWV0aGluZ0NsZXZlcigpO1xuXG5qUXVlcnkoJyNwcm9mQm9udXMnKS5vbihcImtleXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgIHByb2ZCID0galF1ZXJ5KCcjcHJvZkJvbnVzJykudmFsKCk7XG4gICAgc29tZXRoaW5nQ2xldmVyKCk7XG59KTtcblxuZnVuY3Rpb24gc29tZXRoaW5nQ2xldmVyKCkge1xuICAgIGpRdWVyeSgnLmljb24tcHJvZicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjbGFzc2VzID0gWydpY29uLXByb2YnLCAnaWNvbi1wcm9mIHByb2ZpY2llbnQnLCAnaWNvbi1wcm9mIGV4cGVydGlzZSddO1xuICAgICAgICB2YXIgY3VycmVudENsYXNzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgIHZhciBjdXJyZW50UG9zID0galF1ZXJ5LmluQXJyYXkoY3VycmVudENsYXNzLCBjbGFzc2VzKTtcbiAgICAgICAgdmFyIG15UHJvZiA9IGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbignLnByb2ZWYWwnKTtcbiAgICAgICAgdXBkYXRlUHJvZihqUXVlcnkobXlQcm9mKSwgY3VycmVudFBvcyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVByb2YobXlQcm9mLCBteVByb2ZTa2lsbEZsYWcpIHtcbiAgICB2YXIgdGhpc0FiaWxpdHkgPSBqUXVlcnkobXlQcm9mKS5hdHRyKCdpZCcpO1xuICAgIHZhciB0aGlzQWJpbGl0eUJvbnVzSUQgPSAnIycgKyB0aGlzQWJpbGl0eSArICctQm9udXMnO1xuICAgIHZhciB0aGlzQWJpbGl0eUJvbnVzID0galF1ZXJ5KCcuYWJpbGl0aWVzICcgKyB0aGlzQWJpbGl0eUJvbnVzSUQpLnRleHQoKTtcbiAgICB2YXIgbmV3VmFsID0gcGFyc2VJbnQodGhpc0FiaWxpdHlCb251cyk7XG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAwKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBwYXJzZUludCh0aGlzQWJpbGl0eUJvbnVzKTtcbiAgICB9XG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAxKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBwYXJzZUludChwcm9mQikgKyBwYXJzZUludCh0aGlzQWJpbGl0eUJvbnVzKTtcbiAgICB9XG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAyKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBwYXJzZUludChwcm9mQikgKiAyICsgKHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpKTtcbiAgICB9XG4gICAgalF1ZXJ5KG15UHJvZikudGV4dChuZXdWYWwpO1xufTtcblxuXG5qUXVlcnkoJy5pY29uLXByb2YnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICB2YXIgY2xhc3NlcyA9IFsnaWNvbi1wcm9mJywgJ2ljb24tcHJvZiBwcm9maWNpZW50JywgJ2ljb24tcHJvZiBleHBlcnRpc2UnXTtcbiAgICB2YXIgY3VycmVudENsYXNzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgdmFyIGN1cnJlbnRQb3MgPSBqUXVlcnkuaW5BcnJheShjdXJyZW50Q2xhc3MsIGNsYXNzZXMpO1xuICAgIHZhciBuZXdQb3MgPSAoKGN1cnJlbnRQb3MgKyAxKSAlIGNsYXNzZXMubGVuZ3RoKTtcbiAgICB2YXIgbmV3Q2xhc3MgPSBjbGFzc2VzW25ld1Bvc107XG4gICAgalF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJywgbmV3Q2xhc3MpO1xuICAgIHZhciBteVByb2YgPSBqUXVlcnkodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJy5wcm9mVmFsJyk7XG4gICAgdXBkYXRlUHJvZihqUXVlcnkobXlQcm9mKSwgbmV3UG9zKTtcbn0pO1xuIiwiLy90aGVtZXNcbnZhciBidXR0b25PcHRpb25zID0gWydkZWZhdWx0JywgJ2JsYWNrJywgJ2dyYXknLCAnbGlnaHQnLCAncmVkJ107XG5qUXVlcnkoYnV0dG9uT3B0aW9ucykuZWFjaChmdW5jdGlvbigpIHtcbiAgICB2YXIgbXlTdHlsZSA9IHRoaXM7XG4gICAgdmFyIG15SWQgPSAnIycgKyBteVN0eWxlO1xuICAgIGpRdWVyeShteUlkKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVBdHRyKCdjbGFzcycpO1xuICAgICAgICBqUXVlcnkoJ2JvZHknKS5hZGRDbGFzcygndGhlbWUtJyArIG15U3R5bGUpO1xuICAgIH0pXG59KVxuIl19
