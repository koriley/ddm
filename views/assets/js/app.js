"use strict";

function updateAbilityBonus(myAbility) {
  var ability = jQuery(myAbility).val();
  var modifier = jQuery(myAbility).parent().children('.modifier-bubble').text();

  if (!jQuery.isNumeric(ability)) {
    ability = 1;
    jQuery(myAbility).val(ability);
  }

  modifier = Math.floor((ability - 10) / 2);
  jQuery(myAbility).parent().children('.modifier-bubble').text(modifier);
}

;
jQuery(".ability").each(function () {
  updateAbilityBonus(jQuery(this));
  jQuery(this).on("focus", function () {
    jQuery(this).select();
  });
  jQuery(this).on("keyup", function () {
    updateAbilityBonus(jQuery(this));
    updateProf(jQuery('.savingThrows #' + jQuery(this).attr('id')));
  });
});
'use strict'; //remove line below when testing frontend

var fs = require('fs'); //////////////////


jQuery("document").ready(function () {
  jQuery(".drag").draggable({
    containment: ".mainView",
    scroll: false
  });
});
var books = {};
readAFile("./books/dmg.json").then(function (book) {
  var bookTitle = JSON.parse(book);
  console.log(bookTitle.details.name);
});
"use strict";

function clearTop() {
  jQuery(".drag").each(function () {
    jQuery(this).removeClass("onTop");
  });
}

;
jQuery(".drag").on("mousedown", function () {
  clearTop();
  jQuery(this).addClass("onTop");
});
'use strict';

function readAFile(filepath) {
  return new Promise(function (resolve, reject) {
    fs.readFile(filepath, 'utf-8', function (err, data) {
      if (err) {
        reject("An error ocurred reading the file :" + err.message);
        return;
      } else {
        resolve(data);
      }
    });
  });
}

function writeFile(filepath, data) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(filepath, data, function (err) {
      if (err) {
        reject(err);
      }
    });
  });
} //write test
// var testObj  = "This is a write test";
// writeFile("../test.txt", testObj);
"use strict";

jQuery(".close").click(function () {
  jQuery(this).parent().toggle();
});
jQuery(".menu .players-btn").click(function () {
  jQuery(".charSheet").toggle();
  clearTop();
  jQuery(".charSheet").addClass("onTop");
});
jQuery(".menu .library-btn").click(function () {
  jQuery(".library-container").toggle();
  clearTop();
  jQuery(".library-container").addClass("onTop");
});
jQuery(".menu .themes-btn").click(function () {
  jQuery(".themes-container").toggle();
});
jQuery(".menu .attribution-btn").click(function () {
  jQuery(".attribution-container").toggle();
  clearTop();
  jQuery(".attribution-container").addClass("onTop");
});
"use strict";

var profB = jQuery('#profBonus').val();
somethingClever();
jQuery('#profBonus').on("keyup", function () {
  profB = jQuery('#profBonus').val();
  somethingClever();
});

function somethingClever() {
  jQuery('.icon-prof').each(function () {
    var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
    var currentClass = jQuery(this).attr('class');
    var currentPos = jQuery.inArray(currentClass, classes);
    var myProf = jQuery(this).parent().children('.profVal');
    updateProf(jQuery(myProf), currentPos);
  });
}

function updateProf(myProf, myProfSkillFlag) {
  var thisAbility = jQuery(myProf).attr('id');
  var thisAbilityBonusID = '#' + thisAbility + '-Bonus';
  var thisAbilityBonus = jQuery('.abilities ' + thisAbilityBonusID).text();
  var newVal = parseInt(thisAbilityBonus);

  if (myProfSkillFlag == 0) {
    var newVal = parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 1) {
    var newVal = parseInt(profB) + parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 2) {
    var newVal = parseInt(profB) * 2 + parseInt(thisAbilityBonus);
  }

  jQuery(myProf).text(newVal);
}

;
jQuery('.icon-prof').click(function () {
  var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
  var currentClass = jQuery(this).attr('class');
  var currentPos = jQuery.inArray(currentClass, classes);
  var newPos = (currentPos + 1) % classes.length;
  var newClass = classes[newPos];
  jQuery(this).attr('class', newClass);
  var myProf = jQuery(this).parent().children('.profVal');
  updateProf(jQuery(myProf), newPos);
});
"use strict";

//themes
var buttonOptions = ['default', 'black', 'gray', 'light', 'red'];
jQuery(buttonOptions).each(function () {
  var myStyle = this;
  var myId = '#' + myStyle;
  jQuery(myId).on("click", function () {
    $("body").removeAttr('class');
    jQuery('body').addClass('theme-' + myStyle);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFiaWxpdHlCb251cy5qcyIsImFwcC5qcyIsImNsaWNrVG9Gcm9udC5qcyIsImlvLmpzIiwibWVudUJ1dHRvbnMuanMiLCJwcm9maWNpZW5jaWVzLmpzIiwidGhlbWVzLmpzIl0sIm5hbWVzIjpbInVwZGF0ZUFiaWxpdHlCb251cyIsIm15QWJpbGl0eSIsImFiaWxpdHkiLCJqUXVlcnkiLCJ2YWwiLCJtb2RpZmllciIsInBhcmVudCIsImNoaWxkcmVuIiwidGV4dCIsImlzTnVtZXJpYyIsIk1hdGgiLCJmbG9vciIsImVhY2giLCJvbiIsInNlbGVjdCIsInVwZGF0ZVByb2YiLCJhdHRyIiwiZnMiLCJyZXF1aXJlIiwicmVhZHkiLCJkcmFnZ2FibGUiLCJjb250YWlubWVudCIsInNjcm9sbCIsImJvb2tzIiwicmVhZEFGaWxlIiwidGhlbiIsImJvb2siLCJjb25zb2xlIiwibG9nIiwiY2xlYXJUb3AiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZmlsZXBhdGgiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlYWRGaWxlIiwiZXJyIiwiZGF0YSIsIm1lc3NhZ2UiLCJ3cml0ZUZpbGUiLCJjbGljayIsInRvZ2dsZSIsInByb2ZCIiwic29tZXRoaW5nQ2xldmVyIiwiY2xhc3NlcyIsImN1cnJlbnRDbGFzcyIsImN1cnJlbnRQb3MiLCJpbkFycmF5IiwibXlQcm9mIiwibXlQcm9mU2tpbGxGbGFnIiwidGhpc0FiaWxpdHkiLCJ0aGlzQWJpbGl0eUJvbnVzSUQiLCJ0aGlzQWJpbGl0eUJvbnVzIiwibmV3VmFsIiwicGFyc2VJbnQiLCJuZXdQb3MiLCJsZW5ndGgiLCJuZXdDbGFzcyIsImJ1dHRvbk9wdGlvbnMiLCJteVN0eWxlIiwibXlJZCIsIiQiLCJyZW1vdmVBdHRyIl0sIm1hcHBpbmdzIjoiOztBQUNBLFNBQVNBLGtCQUFULENBQTRCQyxTQUE1QixFQUF1QztBQUNuQyxNQUFJQyxPQUFPLEdBQUdDLE1BQU0sQ0FBQ0YsU0FBRCxDQUFOLENBQWtCRyxHQUFsQixFQUFkO0FBRUEsTUFBSUMsUUFBUSxHQUFHRixNQUFNLENBQUNGLFNBQUQsQ0FBTixDQUFrQkssTUFBbEIsR0FBMkJDLFFBQTNCLENBQW9DLGtCQUFwQyxFQUF3REMsSUFBeEQsRUFBZjs7QUFDQSxNQUFJLENBQUNMLE1BQU0sQ0FBQ00sU0FBUCxDQUFpQlAsT0FBakIsQ0FBTCxFQUFnQztBQUM1QkEsSUFBQUEsT0FBTyxHQUFHLENBQVY7QUFDQUMsSUFBQUEsTUFBTSxDQUFDRixTQUFELENBQU4sQ0FBa0JHLEdBQWxCLENBQXNCRixPQUF0QjtBQUNIOztBQUVERyxFQUFBQSxRQUFRLEdBQUdLLElBQUksQ0FBQ0MsS0FBTCxDQUFXLENBQUNULE9BQU8sR0FBRyxFQUFYLElBQWlCLENBQTVCLENBQVg7QUFDQUMsRUFBQUEsTUFBTSxDQUFDRixTQUFELENBQU4sQ0FBa0JLLE1BQWxCLEdBQTJCQyxRQUEzQixDQUFvQyxrQkFBcEMsRUFBd0RDLElBQXhELENBQTZESCxRQUE3RDtBQUNIOztBQUFBO0FBR0RGLE1BQU0sQ0FBQyxVQUFELENBQU4sQ0FBbUJTLElBQW5CLENBQXdCLFlBQVc7QUFDL0JaLEVBQUFBLGtCQUFrQixDQUFDRyxNQUFNLENBQUMsSUFBRCxDQUFQLENBQWxCO0FBRUFBLEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYVUsRUFBYixDQUFnQixPQUFoQixFQUF5QixZQUFXO0FBQ2hDVixJQUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFXLE1BQWI7QUFDSCxHQUZEO0FBR0FYLEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYVUsRUFBYixDQUFnQixPQUFoQixFQUF5QixZQUFXO0FBQ2hDYixJQUFBQSxrQkFBa0IsQ0FBQ0csTUFBTSxDQUFDLElBQUQsQ0FBUCxDQUFsQjtBQUNBWSxJQUFBQSxVQUFVLENBQUNaLE1BQU0sQ0FBQyxvQkFBa0JBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYWEsSUFBYixDQUFrQixJQUFsQixDQUFuQixDQUFQLENBQVY7QUFDSCxHQUhEO0FBSUgsQ0FWRDtBQ2ZBLGEsQ0FDQTs7QUFDQSxJQUFJQyxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFELENBQWhCLEMsQ0FDQTs7O0FBRUFmLE1BQU0sQ0FBQyxVQUFELENBQU4sQ0FBbUJnQixLQUFuQixDQUF5QixZQUFZO0FBQ2pDaEIsRUFBQUEsTUFBTSxDQUFDLE9BQUQsQ0FBTixDQUFnQmlCLFNBQWhCLENBQTBCO0FBQ3RCQyxJQUFBQSxXQUFXLEVBQUUsV0FEUztBQUV0QkMsSUFBQUEsTUFBTSxFQUFFO0FBRmMsR0FBMUI7QUFJSCxDQUxEO0FBT0EsSUFBSUMsS0FBSyxHQUFHLEVBQVo7QUFDQUMsU0FBUyxDQUFDLGtCQUFELENBQVQsQ0FBOEJDLElBQTlCLENBQW1DLFVBQUNDLElBQUQsRUFBVTtBQUN6Q0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLElBQVo7QUFDSCxDQUZEOzs7QUNiQSxTQUFTRyxRQUFULEdBQW9CO0FBQ2hCMUIsRUFBQUEsTUFBTSxDQUFDLE9BQUQsQ0FBTixDQUFnQlMsSUFBaEIsQ0FBcUIsWUFBVztBQUM1QlQsSUFBQUEsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhMkIsV0FBYixDQUF5QixPQUF6QjtBQUNILEdBRkQ7QUFHSDs7QUFBQTtBQUVEM0IsTUFBTSxDQUFDLE9BQUQsQ0FBTixDQUFnQlUsRUFBaEIsQ0FBbUIsV0FBbkIsRUFBZ0MsWUFBVztBQUN2Q2dCLEVBQUFBLFFBQVE7QUFDUjFCLEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYTRCLFFBQWIsQ0FBc0IsT0FBdEI7QUFDSCxDQUhEO0FDTkE7O0FBRUEsU0FBU1AsU0FBVCxDQUFtQlEsUUFBbkIsRUFBNEI7QUFDeEIsU0FBTyxJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3BDbEIsSUFBQUEsRUFBRSxDQUFDbUIsUUFBSCxDQUFZSixRQUFaLEVBQXNCLE9BQXRCLEVBQStCLFVBQVNLLEdBQVQsRUFBY0MsSUFBZCxFQUFvQjtBQUMvQyxVQUFJRCxHQUFKLEVBQVM7QUFDTEYsUUFBQUEsTUFBTSxDQUFDLHdDQUF3Q0UsR0FBRyxDQUFDRSxPQUE3QyxDQUFOO0FBQ0E7QUFDSCxPQUhELE1BR087QUFDSEwsUUFBQUEsT0FBTyxDQUFDSSxJQUFELENBQVA7QUFDSDtBQUNKLEtBUEQ7QUFRSCxHQVRNLENBQVA7QUFVSDs7QUFFRCxTQUFTRSxTQUFULENBQW1CUixRQUFuQixFQUE2Qk0sSUFBN0IsRUFBbUM7QUFDL0IsU0FBTyxJQUFJTCxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RDbEIsSUFBQUEsRUFBRSxDQUFDdUIsU0FBSCxDQUFhUixRQUFiLEVBQXVCTSxJQUF2QixFQUE2QixVQUFDRCxHQUFELEVBQVM7QUFDbEMsVUFBSUEsR0FBSixFQUFTO0FBQ0xGLFFBQUFBLE1BQU0sQ0FBQ0UsR0FBRCxDQUFOO0FBQ0g7QUFDSixLQUpEO0FBS0QsR0FOTSxDQUFQO0FBT0gsQyxDQUVEO0FBQ0E7QUFDQTs7O0FDMUJBbEMsTUFBTSxDQUFDLFFBQUQsQ0FBTixDQUFpQnNDLEtBQWpCLENBQXVCLFlBQVU7QUFDN0J0QyxFQUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFHLE1BQWIsR0FBc0JvQyxNQUF0QjtBQUNILENBRkQ7QUFHQXZDLE1BQU0sQ0FBQyxvQkFBRCxDQUFOLENBQTZCc0MsS0FBN0IsQ0FBbUMsWUFBVTtBQUN6Q3RDLEVBQUFBLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJ1QyxNQUFyQjtBQUNBYixFQUFBQSxRQUFRO0FBQ1IxQixFQUFBQSxNQUFNLENBQUMsWUFBRCxDQUFOLENBQXFCNEIsUUFBckIsQ0FBOEIsT0FBOUI7QUFDSCxDQUpEO0FBTUE1QixNQUFNLENBQUMsb0JBQUQsQ0FBTixDQUE2QnNDLEtBQTdCLENBQW1DLFlBQVU7QUFDekN0QyxFQUFBQSxNQUFNLENBQUMsb0JBQUQsQ0FBTixDQUE2QnVDLE1BQTdCO0FBQ0FiLEVBQUFBLFFBQVE7QUFDUjFCLEVBQUFBLE1BQU0sQ0FBQyxvQkFBRCxDQUFOLENBQTZCNEIsUUFBN0IsQ0FBc0MsT0FBdEM7QUFDSCxDQUpEO0FBTUE1QixNQUFNLENBQUMsbUJBQUQsQ0FBTixDQUE0QnNDLEtBQTVCLENBQWtDLFlBQVU7QUFDeEN0QyxFQUFBQSxNQUFNLENBQUMsbUJBQUQsQ0FBTixDQUE0QnVDLE1BQTVCO0FBQ0gsQ0FGRDtBQUlBdkMsTUFBTSxDQUFDLHdCQUFELENBQU4sQ0FBaUNzQyxLQUFqQyxDQUF1QyxZQUFVO0FBQzdDdEMsRUFBQUEsTUFBTSxDQUFDLHdCQUFELENBQU4sQ0FBaUN1QyxNQUFqQztBQUNBYixFQUFBQSxRQUFRO0FBQ1IxQixFQUFBQSxNQUFNLENBQUMsd0JBQUQsQ0FBTixDQUFpQzRCLFFBQWpDLENBQTBDLE9BQTFDO0FBQ0gsQ0FKRDs7O0FDcEJBLElBQUlZLEtBQUssR0FBR3hDLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJDLEdBQXJCLEVBQVo7QUFDQXdDLGVBQWU7QUFFZnpDLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJVLEVBQXJCLENBQXdCLE9BQXhCLEVBQWlDLFlBQVc7QUFDeEM4QixFQUFBQSxLQUFLLEdBQUd4QyxNQUFNLENBQUMsWUFBRCxDQUFOLENBQXFCQyxHQUFyQixFQUFSO0FBQ0F3QyxFQUFBQSxlQUFlO0FBQ2xCLENBSEQ7O0FBS0EsU0FBU0EsZUFBVCxHQUEyQjtBQUN2QnpDLEVBQUFBLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJTLElBQXJCLENBQTBCLFlBQVc7QUFDakMsUUFBSWlDLE9BQU8sR0FBRyxDQUFDLFdBQUQsRUFBYyxzQkFBZCxFQUFzQyxxQkFBdEMsQ0FBZDtBQUNBLFFBQUlDLFlBQVksR0FBRzNDLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYWEsSUFBYixDQUFrQixPQUFsQixDQUFuQjtBQUNBLFFBQUkrQixVQUFVLEdBQUc1QyxNQUFNLENBQUM2QyxPQUFQLENBQWVGLFlBQWYsRUFBNkJELE9BQTdCLENBQWpCO0FBQ0EsUUFBSUksTUFBTSxHQUFHOUMsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhRyxNQUFiLEdBQXNCQyxRQUF0QixDQUErQixVQUEvQixDQUFiO0FBQ0FRLElBQUFBLFVBQVUsQ0FBQ1osTUFBTSxDQUFDOEMsTUFBRCxDQUFQLEVBQWlCRixVQUFqQixDQUFWO0FBQ0gsR0FORDtBQU9IOztBQUVELFNBQVNoQyxVQUFULENBQW9Ca0MsTUFBcEIsRUFBNEJDLGVBQTVCLEVBQTZDO0FBQ3pDLE1BQUlDLFdBQVcsR0FBR2hELE1BQU0sQ0FBQzhDLE1BQUQsQ0FBTixDQUFlakMsSUFBZixDQUFvQixJQUFwQixDQUFsQjtBQUNBLE1BQUlvQyxrQkFBa0IsR0FBRyxNQUFNRCxXQUFOLEdBQW9CLFFBQTdDO0FBQ0EsTUFBSUUsZ0JBQWdCLEdBQUdsRCxNQUFNLENBQUMsZ0JBQWdCaUQsa0JBQWpCLENBQU4sQ0FBMkM1QyxJQUEzQyxFQUF2QjtBQUNBLE1BQUk4QyxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0YsZ0JBQUQsQ0FBckI7O0FBQ0EsTUFBSUgsZUFBZSxJQUFJLENBQXZCLEVBQTBCO0FBQ3RCLFFBQUlJLE1BQU0sR0FBR0MsUUFBUSxDQUFDRixnQkFBRCxDQUFyQjtBQUNIOztBQUNELE1BQUlILGVBQWUsSUFBSSxDQUF2QixFQUEwQjtBQUN0QixRQUFJSSxNQUFNLEdBQUdDLFFBQVEsQ0FBQ1osS0FBRCxDQUFSLEdBQWtCWSxRQUFRLENBQUNGLGdCQUFELENBQXZDO0FBQ0g7O0FBQ0QsTUFBSUgsZUFBZSxJQUFJLENBQXZCLEVBQTBCO0FBQ3RCLFFBQUlJLE1BQU0sR0FBR0MsUUFBUSxDQUFDWixLQUFELENBQVIsR0FBa0IsQ0FBbEIsR0FBdUJZLFFBQVEsQ0FBQ0YsZ0JBQUQsQ0FBNUM7QUFDSDs7QUFDRGxELEVBQUFBLE1BQU0sQ0FBQzhDLE1BQUQsQ0FBTixDQUFlekMsSUFBZixDQUFvQjhDLE1BQXBCO0FBQ0g7O0FBQUE7QUFHRG5ELE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJzQyxLQUFyQixDQUEyQixZQUFXO0FBQ2xDLE1BQUlJLE9BQU8sR0FBRyxDQUFDLFdBQUQsRUFBYyxzQkFBZCxFQUFzQyxxQkFBdEMsQ0FBZDtBQUNBLE1BQUlDLFlBQVksR0FBRzNDLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYWEsSUFBYixDQUFrQixPQUFsQixDQUFuQjtBQUNBLE1BQUkrQixVQUFVLEdBQUc1QyxNQUFNLENBQUM2QyxPQUFQLENBQWVGLFlBQWYsRUFBNkJELE9BQTdCLENBQWpCO0FBQ0EsTUFBSVcsTUFBTSxHQUFJLENBQUNULFVBQVUsR0FBRyxDQUFkLElBQW1CRixPQUFPLENBQUNZLE1BQXpDO0FBQ0EsTUFBSUMsUUFBUSxHQUFHYixPQUFPLENBQUNXLE1BQUQsQ0FBdEI7QUFDQXJELEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYWEsSUFBYixDQUFrQixPQUFsQixFQUEyQjBDLFFBQTNCO0FBQ0EsTUFBSVQsTUFBTSxHQUFHOUMsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhRyxNQUFiLEdBQXNCQyxRQUF0QixDQUErQixVQUEvQixDQUFiO0FBQ0FRLEVBQUFBLFVBQVUsQ0FBQ1osTUFBTSxDQUFDOEMsTUFBRCxDQUFQLEVBQWlCTyxNQUFqQixDQUFWO0FBQ0gsQ0FURDs7O0FDcENBO0FBQ0EsSUFBSUcsYUFBYSxHQUFHLENBQUMsU0FBRCxFQUFZLE9BQVosRUFBcUIsTUFBckIsRUFBNkIsT0FBN0IsRUFBc0MsS0FBdEMsQ0FBcEI7QUFDQXhELE1BQU0sQ0FBQ3dELGFBQUQsQ0FBTixDQUFzQi9DLElBQXRCLENBQTJCLFlBQVc7QUFDbEMsTUFBSWdELE9BQU8sR0FBRyxJQUFkO0FBQ0EsTUFBSUMsSUFBSSxHQUFHLE1BQU1ELE9BQWpCO0FBQ0F6RCxFQUFBQSxNQUFNLENBQUMwRCxJQUFELENBQU4sQ0FBYWhELEVBQWIsQ0FBZ0IsT0FBaEIsRUFBeUIsWUFBVztBQUNoQ2lELElBQUFBLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBVUMsVUFBVixDQUFxQixPQUFyQjtBQUNBNUQsSUFBQUEsTUFBTSxDQUFDLE1BQUQsQ0FBTixDQUFlNEIsUUFBZixDQUF3QixXQUFXNkIsT0FBbkM7QUFDSCxHQUhEO0FBSUgsQ0FQRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmZ1bmN0aW9uIHVwZGF0ZUFiaWxpdHlCb251cyhteUFiaWxpdHkpIHtcbiAgICB2YXIgYWJpbGl0eSA9IGpRdWVyeShteUFiaWxpdHkpLnZhbCgpO1xuXG4gICAgdmFyIG1vZGlmaWVyID0galF1ZXJ5KG15QWJpbGl0eSkucGFyZW50KCkuY2hpbGRyZW4oJy5tb2RpZmllci1idWJibGUnKS50ZXh0KCk7XG4gICAgaWYgKCFqUXVlcnkuaXNOdW1lcmljKGFiaWxpdHkpKSB7XG4gICAgICAgIGFiaWxpdHkgPSAxO1xuICAgICAgICBqUXVlcnkobXlBYmlsaXR5KS52YWwoYWJpbGl0eSk7XG4gICAgfVxuXG4gICAgbW9kaWZpZXIgPSBNYXRoLmZsb29yKChhYmlsaXR5IC0gMTApIC8gMik7XG4gICAgalF1ZXJ5KG15QWJpbGl0eSkucGFyZW50KCkuY2hpbGRyZW4oJy5tb2RpZmllci1idWJibGUnKS50ZXh0KG1vZGlmaWVyKTtcbn07XG5cblxualF1ZXJ5KFwiLmFiaWxpdHlcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICB1cGRhdGVBYmlsaXR5Qm9udXMoalF1ZXJ5KHRoaXMpKTtcblxuICAgIGpRdWVyeSh0aGlzKS5vbihcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBqUXVlcnkodGhpcykuc2VsZWN0KCk7XG4gICAgfSlcbiAgICBqUXVlcnkodGhpcykub24oXCJrZXl1cFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdXBkYXRlQWJpbGl0eUJvbnVzKGpRdWVyeSh0aGlzKSk7XG4gICAgICAgIHVwZGF0ZVByb2YoalF1ZXJ5KCcuc2F2aW5nVGhyb3dzICMnK2pRdWVyeSh0aGlzKS5hdHRyKCdpZCcpKSk7XG4gICAgfSk7XG59KTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vcmVtb3ZlIGxpbmUgYmVsb3cgd2hlbiB0ZXN0aW5nIGZyb250ZW5kXG52YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmpRdWVyeShcImRvY3VtZW50XCIpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBqUXVlcnkoXCIuZHJhZ1wiKS5kcmFnZ2FibGUoe1xuICAgICAgICBjb250YWlubWVudDogXCIubWFpblZpZXdcIixcbiAgICAgICAgc2Nyb2xsOiBmYWxzZVxuICAgIH0pO1xufSk7XG5cbnZhciBib29rcyA9IHt9O1xucmVhZEFGaWxlKFwiLi9ib29rcy9kbWcuanNvblwiKS50aGVuKChib29rKSA9PiB7XG4gICAgY29uc29sZS5sb2coYm9vayk7XG59KTsiLCJmdW5jdGlvbiBjbGVhclRvcCgpIHtcbiAgICBqUXVlcnkoXCIuZHJhZ1wiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBqUXVlcnkodGhpcykucmVtb3ZlQ2xhc3MoXCJvblRvcFwiKTtcbiAgICB9KTtcbn07XG5cbmpRdWVyeShcIi5kcmFnXCIpLm9uKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgIGNsZWFyVG9wKCk7XG4gICAgalF1ZXJ5KHRoaXMpLmFkZENsYXNzKFwib25Ub3BcIik7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcmVhZEFGaWxlKGZpbGVwYXRoKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBmcy5yZWFkRmlsZShmaWxlcGF0aCwgJ3V0Zi04JywgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiQW4gZXJyb3Igb2N1cnJlZCByZWFkaW5nIHRoZSBmaWxlIDpcIiArIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB3cml0ZUZpbGUoZmlsZXBhdGgsIGRhdGEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZnMud3JpdGVGaWxlKGZpbGVwYXRoLCBkYXRhLCAoZXJyKSA9PiB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KVxufVxuXG4vL3dyaXRlIHRlc3Rcbi8vIHZhciB0ZXN0T2JqICA9IFwiVGhpcyBpcyBhIHdyaXRlIHRlc3RcIjtcbi8vIHdyaXRlRmlsZShcIi4uL3Rlc3QudHh0XCIsIHRlc3RPYmopO1xuIiwiXG5qUXVlcnkoXCIuY2xvc2VcIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICBqUXVlcnkodGhpcykucGFyZW50KCkudG9nZ2xlKCk7XG59KVxualF1ZXJ5KFwiLm1lbnUgLnBsYXllcnMtYnRuXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgalF1ZXJ5KFwiLmNoYXJTaGVldFwiKS50b2dnbGUoKTtcbiAgICBjbGVhclRvcCgpO1xuICAgIGpRdWVyeShcIi5jaGFyU2hlZXRcIikuYWRkQ2xhc3MoXCJvblRvcFwiKTtcbn0pXG5cbmpRdWVyeShcIi5tZW51IC5saWJyYXJ5LWJ0blwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgIGpRdWVyeShcIi5saWJyYXJ5LWNvbnRhaW5lclwiKS50b2dnbGUoKTtcbiAgICBjbGVhclRvcCgpO1xuICAgIGpRdWVyeShcIi5saWJyYXJ5LWNvbnRhaW5lclwiKS5hZGRDbGFzcyhcIm9uVG9wXCIpO1xufSlcblxualF1ZXJ5KFwiLm1lbnUgLnRoZW1lcy1idG5cIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICBqUXVlcnkoXCIudGhlbWVzLWNvbnRhaW5lclwiKS50b2dnbGUoKTtcbn0pXG5cbmpRdWVyeShcIi5tZW51IC5hdHRyaWJ1dGlvbi1idG5cIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICBqUXVlcnkoXCIuYXR0cmlidXRpb24tY29udGFpbmVyXCIpLnRvZ2dsZSgpO1xuICAgIGNsZWFyVG9wKCk7XG4gICAgalF1ZXJ5KFwiLmF0dHJpYnV0aW9uLWNvbnRhaW5lclwiKS5hZGRDbGFzcyhcIm9uVG9wXCIpO1xufSlcbiIsInZhciBwcm9mQiA9IGpRdWVyeSgnI3Byb2ZCb251cycpLnZhbCgpO1xuc29tZXRoaW5nQ2xldmVyKCk7XG5cbmpRdWVyeSgnI3Byb2ZCb251cycpLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24oKSB7XG4gICAgcHJvZkIgPSBqUXVlcnkoJyNwcm9mQm9udXMnKS52YWwoKTtcbiAgICBzb21ldGhpbmdDbGV2ZXIoKTtcbn0pO1xuXG5mdW5jdGlvbiBzb21ldGhpbmdDbGV2ZXIoKSB7XG4gICAgalF1ZXJ5KCcuaWNvbi1wcm9mJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNsYXNzZXMgPSBbJ2ljb24tcHJvZicsICdpY29uLXByb2YgcHJvZmljaWVudCcsICdpY29uLXByb2YgZXhwZXJ0aXNlJ107XG4gICAgICAgIHZhciBjdXJyZW50Q2xhc3MgPSBqUXVlcnkodGhpcykuYXR0cignY2xhc3MnKTtcbiAgICAgICAgdmFyIGN1cnJlbnRQb3MgPSBqUXVlcnkuaW5BcnJheShjdXJyZW50Q2xhc3MsIGNsYXNzZXMpO1xuICAgICAgICB2YXIgbXlQcm9mID0galF1ZXJ5KHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKCcucHJvZlZhbCcpO1xuICAgICAgICB1cGRhdGVQcm9mKGpRdWVyeShteVByb2YpLCBjdXJyZW50UG9zKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUHJvZihteVByb2YsIG15UHJvZlNraWxsRmxhZykge1xuICAgIHZhciB0aGlzQWJpbGl0eSA9IGpRdWVyeShteVByb2YpLmF0dHIoJ2lkJyk7XG4gICAgdmFyIHRoaXNBYmlsaXR5Qm9udXNJRCA9ICcjJyArIHRoaXNBYmlsaXR5ICsgJy1Cb251cyc7XG4gICAgdmFyIHRoaXNBYmlsaXR5Qm9udXMgPSBqUXVlcnkoJy5hYmlsaXRpZXMgJyArIHRoaXNBYmlsaXR5Qm9udXNJRCkudGV4dCgpO1xuICAgIHZhciBuZXdWYWwgPSBwYXJzZUludCh0aGlzQWJpbGl0eUJvbnVzKTtcbiAgICBpZiAobXlQcm9mU2tpbGxGbGFnID09IDApIHtcbiAgICAgICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpO1xuICAgIH1cbiAgICBpZiAobXlQcm9mU2tpbGxGbGFnID09IDEpIHtcbiAgICAgICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHByb2ZCKSArIHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpO1xuICAgIH1cbiAgICBpZiAobXlQcm9mU2tpbGxGbGFnID09IDIpIHtcbiAgICAgICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHByb2ZCKSAqIDIgKyAocGFyc2VJbnQodGhpc0FiaWxpdHlCb251cykpO1xuICAgIH1cbiAgICBqUXVlcnkobXlQcm9mKS50ZXh0KG5ld1ZhbCk7XG59O1xuXG5cbmpRdWVyeSgnLmljb24tcHJvZicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIHZhciBjbGFzc2VzID0gWydpY29uLXByb2YnLCAnaWNvbi1wcm9mIHByb2ZpY2llbnQnLCAnaWNvbi1wcm9mIGV4cGVydGlzZSddO1xuICAgIHZhciBjdXJyZW50Q2xhc3MgPSBqUXVlcnkodGhpcykuYXR0cignY2xhc3MnKTtcbiAgICB2YXIgY3VycmVudFBvcyA9IGpRdWVyeS5pbkFycmF5KGN1cnJlbnRDbGFzcywgY2xhc3Nlcyk7XG4gICAgdmFyIG5ld1BvcyA9ICgoY3VycmVudFBvcyArIDEpICUgY2xhc3Nlcy5sZW5ndGgpO1xuICAgIHZhciBuZXdDbGFzcyA9IGNsYXNzZXNbbmV3UG9zXTtcbiAgICBqUXVlcnkodGhpcykuYXR0cignY2xhc3MnLCBuZXdDbGFzcyk7XG4gICAgdmFyIG15UHJvZiA9IGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbignLnByb2ZWYWwnKTtcbiAgICB1cGRhdGVQcm9mKGpRdWVyeShteVByb2YpLCBuZXdQb3MpO1xufSk7XG4iLCIvL3RoZW1lc1xudmFyIGJ1dHRvbk9wdGlvbnMgPSBbJ2RlZmF1bHQnLCAnYmxhY2snLCAnZ3JheScsICdsaWdodCcsICdyZWQnXTtcbmpRdWVyeShidXR0b25PcHRpb25zKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHZhciBteVN0eWxlID0gdGhpcztcbiAgICB2YXIgbXlJZCA9ICcjJyArIG15U3R5bGU7XG4gICAgalF1ZXJ5KG15SWQpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUF0dHIoJ2NsYXNzJyk7XG4gICAgICAgIGpRdWVyeSgnYm9keScpLmFkZENsYXNzKCd0aGVtZS0nICsgbXlTdHlsZSk7XG4gICAgfSlcbn0pXG4iXX0=
