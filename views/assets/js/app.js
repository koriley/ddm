'use strict'; // remove line below when testing frontend

var fs = require('fs'); // Paths


var campaignListPath = "./campaign.json";
var bookPath = "./book/";
var campaignDirPath = "/campaigns/"; ///
//glodal objects

var books = {};
var npc = {};
var campaignObj = {};
var thisCampaign = {}; ///
//global vars
///
//temp to cose the campaign picker.

jQuery(".closeCampWindow").on("click", function () {
  jQuery(".campaigns").remove();
});
jQuery("document").ready(function () {
  jQuery(".drag").draggable({
    containment: ".mainView",
    scroll: false
  });
});

Object.prototype.hasOwnProperty = function (property) {
  return this[property] !== undefined;
}; // getDirContents("./books").then(function (files) {
//   // console.log();
//   // console.log(JSON.parse(JSON.stringify(files.files[0].name)));
//   for(var i = 0; i <= files.files.length - 1; i++) {
//     readAFile("./books/" + JSON.parse(JSON.stringify(files.files[i].name))).then(function (book) {
//       var bookTitle = JSON.parse(book);
//       console.log(bookTitle.details.name);
//       jQuery(".bookList").append(`<div class="book">${bookTitle.details.name}<div>`);
//        //look for npc, this will eventually be its own function
//       if(bookTitle.hasOwnProperty("NPC")){
//         console.log(bookTitle.details.name+" true")
//       }else{
//         console.log("none found")
//       }
//     });
//   }
// });
"use strict";

jQuery(document).ready(function () {
  startApp().then(function (data) {
    setCampaigns(data).then(function (campList) {
      jQuery(".campaignList").prepend(campList);
    });
    console.log(JSON.stringify(data));
    console.log(campaignObj);
  });
});

function startApp() {
  return new Promise(function (resolve, reject) {
    try {
      getCampaigns(campaignListPath).then(function (data) {
        resolve(data);
      });
    } catch (error) {
      reject(error);
    }
  });
}
'use strict';

function readAFile(filepath) {
  return new Promise(function (resolve, reject) {
    fs.readFile(filepath, 'utf-8', function (err, data) {
      if (err) {
        reject("An error ocurred reading the file :" + err.message);
        return;
      } else {
        resolve(data);
      }
    });
  });
}

function writeFile(filepath, data) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(filepath, data, function (err) {
      if (err) {
        reject(err);
      } else {
        resolve("File Written");
      }
    });
  });
}

function getDirContents(dir) {
  return new Promise(function (resolve, reject) {
    var files = {};
    var fileNames = [];

    try {
      fs.readdirSync(dir).forEach(function (fileName) {
        fileNames.push({
          "name": fileName
        });
        files = {
          "files": fileNames
        };
      });
      resolve(files);
    } catch (error) {
      reject(error);
    }
  });
}

function checkFileExist(path) {
  return new Promise(function (resolve, reject) {
    if (!path) {
      reject("Path is invalid " + path);
    }

    try {
      fs.access(path, fs.F_OK, function (err) {
        if (err) {
          resolve("false");
        }

        resolve("true");
      });
    } catch (error) {
      reject("error");
    }
  });
}

function checkDirExist(dir) {
  return new Promise(function (resolve, reject) {
    try {
      if (fs.existsSync(dir)) {
        resolve("true");
      } else {
        resolve("false");
      }
    } catch (error) {
      reject(error);
    }
  });
}

function createDir(dir) {
  return new Promise(function (resolve, reject) {
    try {
      fs.mkdirSync(dir);
      resolve("done");
    } catch (error) {
      reject(error);
    }
  });
} //write test
// var testObj  = "This is a write test";
// writeFile("../test.txt", testObj);
"use strict";

function updateAbilityBonus(myAbility) {
  var ability = jQuery(myAbility).val();
  var modifier = jQuery(myAbility).parent().children('.modifier-bubble').text();

  if (!jQuery.isNumeric(ability)) {
    ability = 1;
    jQuery(myAbility).val(ability);
  }

  modifier = Math.floor((ability - 10) / 2);
  jQuery(myAbility).parent().children('.modifier-bubble').text(modifier);
}

;
jQuery(".ability").each(function () {
  updateAbilityBonus(jQuery(this));
  jQuery(this).on("focus", function () {
    jQuery(this).select();
  });
  jQuery(this).on("keyup", function () {
    updateAbilityBonus(jQuery(this));
    updateProf(jQuery('.savingThrows #' + jQuery(this).attr('id')));
  });
});
"use strict";

function clearTop() {
  jQuery(".drag").each(function () {
    jQuery(this).removeClass("onTop");
  });
}

;
jQuery(".drag").on("mousedown", function () {
  clearTop();
  jQuery(this).addClass("onTop");
});
"use strict";

jQuery(".campAdd").on("click", function () {
  newCampaign();
}); //the delete button

jQuery(".campaignList").on("click", ".campDelete", function () {
  var toDelete = jQuery(this).attr("data-delete"); // console.log("clicked");
  //should add a are you sure popup

  var newArray = campaignObj.campaigns; // console.log(newArray)
  // console.log("delet this number " + toDelete + " and this is the object" + JSON.stringify(campaignObj.campaigns));

  newArray.splice(toDelete, 1); // console.log(JSON.stringify(campaignObj));

  writeFile(campaignListPath, JSON.stringify(campaignObj)).then(function (data) {
    if (data == "File Written") {
      getCampaigns(campaignListPath).then(function (data) {
        setCampaigns(data).then(function (campList) {
          jQuery(".campaignList").html(campList);
        });
      });
    }
  });
});
jQuery(".campaignList").on("click", ".saveNewCamp", function () {
  var newCampName = jQuery("input[name='newCamp']").val();
  var campObj = {
    "name": newCampName
  };
  campaignObj.campaigns.push(campObj); // console.log(JSON.stringify(campaignObj))

  writeFile(campaignListPath, JSON.stringify(campaignObj)).then(function (data) {
    if (data == "File Written") {
      // getCampaigns(campaignListPath).then((data)=>{
      //     setCampaigns(data).then(function(campList){
      //         jQuery(".campaignList").html(campList);
      //     })
      // })
      createCampaign(newCampName).then(function (data) {
        console.log(data);
      });
    }
  });
});

function createCampaign(campName) {
  return new Promise(function (resolve, reject) {
    var dir = campaignDirPath + campName;

    try {
      checkDirExist(dir).then(function (data) {
        if (data == "false") {
          createDir(dir).then(function (data) {
            resolve(data);
          });
        }
      });
    } catch (error) {
      reject(error);
    }
  });
}

function newCampaign() {
  getCampaigns(campaignListPath).then(function (data) {
    setCampaigns(data).then(function (html) {
      var addOnHtml = "<tr><td><input type='text' name='newCamp' /></td><td><button type='button' class='btn btn-primary saveNewCamp'>Save</button></td></tr></table>";
      var newHtml = html.replace("</table>", addOnHtml);
      jQuery(".campaignList").html(newHtml);
    });
  });
} //Gets the list of campaigns


function getCampaigns(path) {
  return new Promise(function (resolve, reject) {
    try {
      // console.log("getCampaigns " + path);
      checkFileExist(path).then(function (data) {
        // console.log(data);
        if (data == "true") {
          readAFile(path).then(function (campaigns) {
            campaigns = JSON.parse(campaigns);
            campaignObj = campaigns;
            resolve(campaignObj);
          });
        }
      });
    } catch (error) {
      reject(error);
    }
  });
} //Puts the list of campaigns on the campaign selector.


function setCampaigns(campaigns) {
  return new Promise(function (resolve, reject) {
    try {
      var campArray = campaigns.campaigns;
      var html = "<table>";
      campArray.forEach(function (node, i) {
        console.log(JSON.stringify(node)); // console.log(campaigns.campaigns[i].name)

        html += "<tr><td>" + campaigns.campaigns[i].name + "</td><td><button type='button' data-load='" + campaigns.campaigns[i].name + "' class='btn btn-primary campLoad'>Load</button><button type='button' data-delete='" + i + "' class='btn btn-primary campDelete'>Delete</button></td></tr>";
      });
      html += "</table>";
      resolve(html);
    } catch (error) {
      reject(error);
    }
  });
}
"use strict";

jQuery(".close").click(function () {
  jQuery(this).parent().toggle();
});
jQuery(".menu button").click(function () {
  var openMe = jQuery(this).attr("data-open");
  jQuery("." + openMe).toggle();
  clearTop();
  jQuery("." + openMe).addClass("onTop");
});
"use strict";
"use strict";

var profB = jQuery('#profBonus').val();
somethingClever();
jQuery('#profBonus').on("keyup", function () {
  profB = jQuery('#profBonus').val();
  somethingClever();
});

function somethingClever() {
  jQuery('.icon-prof').each(function () {
    var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
    var currentClass = jQuery(this).attr('class');
    var currentPos = jQuery.inArray(currentClass, classes);
    var myProf = jQuery(this).parent().children('.profVal');
    updateProf(jQuery(myProf), currentPos);
  });
}

function updateProf(myProf, myProfSkillFlag) {
  var thisAbility = jQuery(myProf).attr('id');
  var thisAbilityBonusID = '#' + thisAbility + '-Bonus';
  var thisAbilityBonus = jQuery('.abilities ' + thisAbilityBonusID).text();
  var newVal = parseInt(thisAbilityBonus);

  if (myProfSkillFlag == 0) {
    var newVal = parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 1) {
    var newVal = parseInt(profB) + parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 2) {
    var newVal = parseInt(profB) * 2 + parseInt(thisAbilityBonus);
  }

  jQuery(myProf).text(newVal);
}

;
jQuery('.icon-prof').click(function () {
  var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
  var currentClass = jQuery(this).attr('class');
  var currentPos = jQuery.inArray(currentClass, classes);
  var newPos = (currentPos + 1) % classes.length;
  var newClass = classes[newPos];
  jQuery(this).attr('class', newClass);
  var myProf = jQuery(this).parent().children('.profVal');
  updateProf(jQuery(myProf), newPos);
});
"use strict";

//themes
var buttonOptions = ['default', 'black', 'gray', 'light', 'red'];
jQuery(buttonOptions).each(function () {
  var myStyle = this;
  var myId = '#' + myStyle;
  jQuery(myId).on("click", function () {
    $("body").removeAttr('class');
    jQuery('body').addClass('theme-' + myStyle);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAxX2FwcC5qcyIsIjAyX3N0YXJ0dXAuanMiLCIwM19pby5qcyIsImFiaWxpdHlCb251cy5qcyIsImNsaWNrVG9Gcm9udC5qcyIsImxvYWRDYW1wYWlnbi5qcyIsIm1lbnVCdXR0b25zLmpzIiwibnBjLmpzIiwicHJvZmljaWVuY2llcy5qcyIsInRoZW1lcy5qcyJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJjYW1wYWlnbkxpc3RQYXRoIiwiYm9va1BhdGgiLCJjYW1wYWlnbkRpclBhdGgiLCJib29rcyIsIm5wYyIsImNhbXBhaWduT2JqIiwidGhpc0NhbXBhaWduIiwialF1ZXJ5Iiwib24iLCJyZW1vdmUiLCJyZWFkeSIsImRyYWdnYWJsZSIsImNvbnRhaW5tZW50Iiwic2Nyb2xsIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwcm9wZXJ0eSIsInVuZGVmaW5lZCIsImRvY3VtZW50Iiwic3RhcnRBcHAiLCJ0aGVuIiwiZGF0YSIsInNldENhbXBhaWducyIsImNhbXBMaXN0IiwicHJlcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRDYW1wYWlnbnMiLCJlcnJvciIsInJlYWRBRmlsZSIsImZpbGVwYXRoIiwicmVhZEZpbGUiLCJlcnIiLCJtZXNzYWdlIiwid3JpdGVGaWxlIiwiZ2V0RGlyQ29udGVudHMiLCJkaXIiLCJmaWxlcyIsImZpbGVOYW1lcyIsInJlYWRkaXJTeW5jIiwiZm9yRWFjaCIsImZpbGVOYW1lIiwicHVzaCIsImNoZWNrRmlsZUV4aXN0IiwicGF0aCIsImFjY2VzcyIsIkZfT0siLCJjaGVja0RpckV4aXN0IiwiZXhpc3RzU3luYyIsImNyZWF0ZURpciIsIm1rZGlyU3luYyIsInVwZGF0ZUFiaWxpdHlCb251cyIsIm15QWJpbGl0eSIsImFiaWxpdHkiLCJ2YWwiLCJtb2RpZmllciIsInBhcmVudCIsImNoaWxkcmVuIiwidGV4dCIsImlzTnVtZXJpYyIsIk1hdGgiLCJmbG9vciIsImVhY2giLCJzZWxlY3QiLCJ1cGRhdGVQcm9mIiwiYXR0ciIsImNsZWFyVG9wIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIm5ld0NhbXBhaWduIiwidG9EZWxldGUiLCJuZXdBcnJheSIsImNhbXBhaWducyIsInNwbGljZSIsImh0bWwiLCJuZXdDYW1wTmFtZSIsImNhbXBPYmoiLCJjcmVhdGVDYW1wYWlnbiIsImNhbXBOYW1lIiwiYWRkT25IdG1sIiwibmV3SHRtbCIsInJlcGxhY2UiLCJwYXJzZSIsImNhbXBBcnJheSIsIm5vZGUiLCJpIiwibmFtZSIsImNsaWNrIiwidG9nZ2xlIiwib3Blbk1lIiwicHJvZkIiLCJzb21ldGhpbmdDbGV2ZXIiLCJjbGFzc2VzIiwiY3VycmVudENsYXNzIiwiY3VycmVudFBvcyIsImluQXJyYXkiLCJteVByb2YiLCJteVByb2ZTa2lsbEZsYWciLCJ0aGlzQWJpbGl0eSIsInRoaXNBYmlsaXR5Qm9udXNJRCIsInRoaXNBYmlsaXR5Qm9udXMiLCJuZXdWYWwiLCJwYXJzZUludCIsIm5ld1BvcyIsImxlbmd0aCIsIm5ld0NsYXNzIiwiYnV0dG9uT3B0aW9ucyIsIm15U3R5bGUiLCJteUlkIiwiJCIsInJlbW92ZUF0dHIiXSwibWFwcGluZ3MiOiJBQUFBLGEsQ0FDRTs7QUFDQSxJQUFJQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFELENBQWhCLEMsQ0FFRjs7O0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUcsaUJBQXZCO0FBQ0EsSUFBSUMsUUFBUSxHQUFHLFNBQWY7QUFDQSxJQUFJQyxlQUFlLEdBQUcsYUFBdEIsQyxDQUVBO0FBRUE7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHLEVBQVo7QUFDQSxJQUFJQyxHQUFHLEdBQUcsRUFBVjtBQUNBLElBQUlDLFdBQVcsR0FBRyxFQUFsQjtBQUNBLElBQUlDLFlBQVksR0FBRyxFQUFuQixDLENBQ0E7QUFFQTtBQUVBO0FBRUE7O0FBQ0FDLE1BQU0sQ0FBQyxrQkFBRCxDQUFOLENB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T0FBbkM7QUFDSCxHQUhEO0FBSUgsQ0FQRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbiAgLy8gcmVtb3ZlIGxpbmUgYmVsb3cgd2hlbiB0ZXN0aW5nIGZyb250ZW5kXHJcbiAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcclxuICBcclxuLy8gUGF0aHNcclxubGV0IGNhbXBhaWduTGlzdFBhdGggPSBcIi4vY2FtcGFpZ24uanNvblwiO1xyXG5sZXQgYm9va1BhdGggPSBcIi4vYm9vay9cIjtcclxubGV0IGNhbXBhaWduRGlyUGF0aCA9IFwiL2NhbXBhaWducy9cIjtcclxuXHJcbi8vL1xyXG5cclxuLy9nbG9kYWwgb2JqZWN0c1xyXG52YXIgYm9va3MgPSB7fTtcclxudmFyIG5wYyA9IHt9O1xyXG52YXIgY2FtcGFpZ25PYmogPSB7fTtcclxudmFyIHRoaXNDYW1wYWlnbiA9IHt9O1xyXG4vLy9cclxuXHJcbi8vZ2xvYmFsIHZhcnNcclxuXHJcbi8vL1xyXG5cclxuLy90ZW1wIHRvIGNvc2UgdGhlIGNhbXBhaWduIHBpY2tlci5cclxualF1ZXJ5KFwiLmNsb3NlQ2FtcFdpbmRvd1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgalF1ZXJ5KFwiLmNhbXBhaWduc1wiKS5yZW1vdmUoKTtcclxufSk7XHJcblxyXG5qUXVlcnkoXCJkb2N1bWVudFwiKS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgalF1ZXJ5KFwiLmRyYWdcIikuZHJhZ2dhYmxlKHtcclxuICAgICAgY29udGFpbm1lbnQ6IFwiLm1haW5WaWV3XCIsXHJcbiAgICAgIHNjcm9sbDogZmFsc2VcclxuICB9KTtcclxuXHJcblxyXG59KTtcclxuXHJcbk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSkge1xyXG5yZXR1cm4gdGhpc1twcm9wZXJ0eV0gIT09IHVuZGVmaW5lZDtcclxufTtcclxuXHJcbi8vIGdldERpckNvbnRlbnRzKFwiLi9ib29rc1wiKS50aGVuKGZ1bmN0aW9uIChmaWxlcykge1xyXG4vLyAgIC8vIGNvbnNvbGUubG9nKCk7XHJcbi8vICAgLy8gY29uc29sZS5sb2coSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlcy5maWxlc1swXS5uYW1lKSkpO1xyXG4vLyAgIGZvcih2YXIgaSA9IDA7IGkgPD0gZmlsZXMuZmlsZXMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbi8vICAgICByZWFkQUZpbGUoXCIuL2Jvb2tzL1wiICsgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlcy5maWxlc1tpXS5uYW1lKSkpLnRoZW4oZnVuY3Rpb24gKGJvb2spIHtcclxuLy8gICAgICAgdmFyIGJvb2tUaXRsZSA9IEpTT04ucGFyc2UoYm9vayk7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKGJvb2tUaXRsZS5kZXRhaWxzLm5hbWUpO1xyXG4vLyAgICAgICBqUXVlcnkoXCIuYm9va0xpc3RcIikuYXBwZW5kKGA8ZGl2IGNsYXNzPVwiYm9va1wiPiR7Ym9va1RpdGxlLmRldGFpbHMubmFtZX08ZGl2PmApO1xyXG5cclxuLy8gICAgICAgIC8vbG9vayBmb3IgbnBjLCB0aGlzIHdpbGwgZXZlbnR1YWxseSBiZSBpdHMgb3duIGZ1bmN0aW9uXHJcbi8vICAgICAgIGlmKGJvb2tUaXRsZS5oYXNPd25Qcm9wZXJ0eShcIk5QQ1wiKSl7XHJcbi8vICAgICAgICAgY29uc29sZS5sb2coYm9va1RpdGxlLmRldGFpbHMubmFtZStcIiB0cnVlXCIpXHJcbi8vICAgICAgIH1lbHNle1xyXG4vLyAgICAgICAgIGNvbnNvbGUubG9nKFwibm9uZSBmb3VuZFwiKVxyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgfSk7XHJcbiAgIFxyXG5cclxuXHJcbi8vICAgfVxyXG4vLyB9KTtcclxuXHJcbiIsImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICBcclxuICBzdGFydEFwcCgpLnRoZW4oKGRhdGEpPT57XHJcbiAgICBzZXRDYW1wYWlnbnMoZGF0YSkudGhlbigoY2FtcExpc3QpPT57XHJcbiAgICAgIGpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikucHJlcGVuZChjYW1wTGlzdCk7XHJcbiAgICB9KVxyXG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgY29uc29sZS5sb2coY2FtcGFpZ25PYmopXHJcbiAgfSk7XHJcbiBcclxuICB9KVxyXG4gIFxyXG5cclxuICBmdW5jdGlvbiBzdGFydEFwcCgpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XHJcbiAgICAgIHRyeXtcclxuICAgICAgICBnZXRDYW1wYWlnbnMoY2FtcGFpZ25MaXN0UGF0aCkudGhlbigoZGF0YSk9PntcclxuICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKXtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgfSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmZ1bmN0aW9uIHJlYWRBRmlsZShmaWxlcGF0aCl7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGZzLnJlYWRGaWxlKGZpbGVwYXRoLCAndXRmLTgnLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiQW4gZXJyb3Igb2N1cnJlZCByZWFkaW5nIHRoZSBmaWxlIDpcIiArIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3cml0ZUZpbGUoZmlsZXBhdGgsIGRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGZzLndyaXRlRmlsZShmaWxlcGF0aCwgZGF0YSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShcIkZpbGUgV3JpdHRlblwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREaXJDb250ZW50cyhkaXIpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XHJcbiAgICAgICAgdmFyIGZpbGVzID0ge307XHJcbiAgICAgICAgdmFyIGZpbGVOYW1lcyA9IFtdO1xyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgZnMucmVhZGRpclN5bmMoZGlyKS5mb3JFYWNoKChmaWxlTmFtZSk9PntcclxuICAgICAgICAgICAgICAgIGZpbGVOYW1lcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjpmaWxlTmFtZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGZpbGVzID0ge1wiZmlsZXNcIjpmaWxlTmFtZXN9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVzb2x2ZShmaWxlcyk7XHJcbiAgICAgICAgfWNhdGNoKGVycm9yKXtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0ZpbGVFeGlzdChwYXRoKXtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xyXG4gICAgICAgaWYoIXBhdGgpe1xyXG4gICAgICAgICAgICAgcmVqZWN0KFwiUGF0aCBpcyBpbnZhbGlkIFwiK3BhdGgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgZnMuYWNjZXNzKHBhdGgsIGZzLkZfT0ssIChlcnIpPT57XHJcbiAgICAgICAgICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUoXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcclxuICAgICAgICAgICAgcmVqZWN0KFwiZXJyb3JcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrRGlyRXhpc3QoZGlyKXtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgaWYoZnMuZXhpc3RzU3luYyhkaXIpKXtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfWNhdGNoIChlcnJvcil7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURpcihkaXIpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBmcy5ta2RpclN5bmMoZGlyKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShcImRvbmVcIik7XHJcbiAgICAgICAgfWNhdGNoIChlcnJvcil7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy93cml0ZSB0ZXN0XHJcbi8vIHZhciB0ZXN0T2JqICA9IFwiVGhpcyBpcyBhIHdyaXRlIHRlc3RcIjtcclxuLy8gd3JpdGVGaWxlKFwiLi4vdGVzdC50eHRcIiwgdGVzdE9iaik7XHJcbiIsIlxyXG5mdW5jdGlvbiB1cGRhdGVBYmlsaXR5Qm9udXMobXlBYmlsaXR5KSB7XHJcbiAgICB2YXIgYWJpbGl0eSA9IGpRdWVyeShteUFiaWxpdHkpLnZhbCgpO1xyXG5cclxuICAgIHZhciBtb2RpZmllciA9IGpRdWVyeShteUFiaWxpdHkpLnBhcmVudCgpLmNoaWxkcmVuKCcubW9kaWZpZXItYnViYmxlJykudGV4dCgpO1xyXG4gICAgaWYgKCFqUXVlcnkuaXNOdW1lcmljKGFiaWxpdHkpKSB7XHJcbiAgICAgICAgYWJpbGl0eSA9IDE7XHJcbiAgICAgICAgalF1ZXJ5KG15QWJpbGl0eSkudmFsKGFiaWxpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGlmaWVyID0gTWF0aC5mbG9vcigoYWJpbGl0eSAtIDEwKSAvIDIpO1xyXG4gICAgalF1ZXJ5KG15QWJpbGl0eSkucGFyZW50KCkuY2hpbGRyZW4oJy5tb2RpZmllci1idWJibGUnKS50ZXh0KG1vZGlmaWVyKTtcclxufTtcclxuXHJcblxyXG5qUXVlcnkoXCIuYWJpbGl0eVwiKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgdXBkYXRlQWJpbGl0eUJvbnVzKGpRdWVyeSh0aGlzKSk7XHJcblxyXG4gICAgalF1ZXJ5KHRoaXMpLm9uKFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnNlbGVjdCgpO1xyXG4gICAgfSlcclxuICAgIGpRdWVyeSh0aGlzKS5vbihcImtleXVwXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHVwZGF0ZUFiaWxpdHlCb251cyhqUXVlcnkodGhpcykpO1xyXG4gICAgICAgIHVwZGF0ZVByb2YoalF1ZXJ5KCcuc2F2aW5nVGhyb3dzICMnK2pRdWVyeSh0aGlzKS5hdHRyKCdpZCcpKSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiIsImZ1bmN0aW9uIGNsZWFyVG9wKCkge1xyXG4gICAgalF1ZXJ5KFwiLmRyYWdcIikuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICBqUXVlcnkodGhpcykucmVtb3ZlQ2xhc3MoXCJvblRvcFwiKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxualF1ZXJ5KFwiLmRyYWdcIikub24oXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBjbGVhclRvcCgpO1xyXG4gICAgalF1ZXJ5KHRoaXMpLmFkZENsYXNzKFwib25Ub3BcIik7XHJcbn0pO1xyXG4iLCJqUXVlcnkoXCIuY2FtcEFkZFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIG5ld0NhbXBhaWduKCk7XHJcbn0pO1xyXG5cclxuLy90aGUgZGVsZXRlIGJ1dHRvblxyXG5qUXVlcnkoXCIuY2FtcGFpZ25MaXN0XCIpLm9uKFwiY2xpY2tcIiwgXCIuY2FtcERlbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdG9EZWxldGUgPSBqUXVlcnkodGhpcykuYXR0cihcImRhdGEtZGVsZXRlXCIpO1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJjbGlja2VkXCIpO1xyXG4gICAgLy9zaG91bGQgYWRkIGEgYXJlIHlvdSBzdXJlIHBvcHVwXHJcbiAgICB2YXIgbmV3QXJyYXkgPSBjYW1wYWlnbk9iai5jYW1wYWlnbnM7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhuZXdBcnJheSlcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiZGVsZXQgdGhpcyBudW1iZXIgXCIgKyB0b0RlbGV0ZSArIFwiIGFuZCB0aGlzIGlzIHRoZSBvYmplY3RcIiArIEpTT04uc3RyaW5naWZ5KGNhbXBhaWduT2JqLmNhbXBhaWducykpO1xyXG4gICAgbmV3QXJyYXkuc3BsaWNlKHRvRGVsZXRlLCAxKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGNhbXBhaWduT2JqKSk7XHJcbiAgICB3cml0ZUZpbGUoY2FtcGFpZ25MaXN0UGF0aCwgSlNPTi5zdHJpbmdpZnkoY2FtcGFpZ25PYmopKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEgPT0gXCJGaWxlIFdyaXR0ZW5cIikge1xyXG4gICAgICAgICAgICBnZXRDYW1wYWlnbnMoY2FtcGFpZ25MaXN0UGF0aCkudGhlbigoZGF0YSk9PntcclxuICAgICAgICAgICAgICAgIHNldENhbXBhaWducyhkYXRhKS50aGVuKChjYW1wTGlzdCk9PntcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIuY2FtcGFpZ25MaXN0XCIpLmh0bWwoY2FtcExpc3QpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbn0pO1xyXG5cclxualF1ZXJ5KFwiLmNhbXBhaWduTGlzdFwiKS5vbihcImNsaWNrXCIsIFwiLnNhdmVOZXdDYW1wXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbmV3Q2FtcE5hbWUgPSBqUXVlcnkoXCJpbnB1dFtuYW1lPSduZXdDYW1wJ11cIikudmFsKCk7XHJcbiAgICB2YXIgY2FtcE9iaiA9IHtcIm5hbWVcIjpuZXdDYW1wTmFtZX07XHJcbiAgICBjYW1wYWlnbk9iai5jYW1wYWlnbnMucHVzaChjYW1wT2JqKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGNhbXBhaWduT2JqKSlcclxuICAgIHdyaXRlRmlsZShjYW1wYWlnbkxpc3RQYXRoLCBKU09OLnN0cmluZ2lmeShjYW1wYWlnbk9iaikpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBpZiAoZGF0YSA9PSBcIkZpbGUgV3JpdHRlblwiKSB7XHJcbiAgICAgICAgICAgIC8vIGdldENhbXBhaWducyhjYW1wYWlnbkxpc3RQYXRoKS50aGVuKChkYXRhKT0+e1xyXG4gICAgICAgICAgICAvLyAgICAgc2V0Q2FtcGFpZ25zKGRhdGEpLnRoZW4oZnVuY3Rpb24oY2FtcExpc3Qpe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikuaHRtbChjYW1wTGlzdCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgICAgICBjcmVhdGVDYW1wYWlnbihuZXdDYW1wTmFtZSkudGhlbigoZGF0YSk9PntcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FtcGFpZ24oY2FtcE5hbWUpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XHJcbiAgICAgICAgbGV0IGRpciA9IGNhbXBhaWduRGlyUGF0aCtjYW1wTmFtZTtcclxuICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgIGNoZWNrRGlyRXhpc3QoZGlyKS50aGVuKChkYXRhKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSA9PSBcImZhbHNlXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZURpcihkaXIpLnRoZW4oKGRhdGEpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbmV3Q2FtcGFpZ24oKSB7XHJcbiAgICBnZXRDYW1wYWlnbnMoY2FtcGFpZ25MaXN0UGF0aCkudGhlbigoZGF0YSk9PntcclxuICAgICAgICBzZXRDYW1wYWlnbnMoZGF0YSkudGhlbigoaHRtbCk9PntcclxuICAgICAgICAgICB2YXIgYWRkT25IdG1sID0gXCI8dHI+PHRkPjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSduZXdDYW1wJyAvPjwvdGQ+PHRkPjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nYnRuIGJ0bi1wcmltYXJ5IHNhdmVOZXdDYW1wJz5TYXZlPC9idXR0b24+PC90ZD48L3RyPjwvdGFibGU+XCI7XHJcbiAgICAgICAgICAgdmFyIG5ld0h0bWwgPSBodG1sLnJlcGxhY2UoXCI8L3RhYmxlPlwiLCBhZGRPbkh0bWwpO1xyXG4gICAgICAgICAgIGpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikuaHRtbChuZXdIdG1sKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbi8vR2V0cyB0aGUgbGlzdCBvZiBjYW1wYWlnbnNcclxuZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zKHBhdGgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJnZXRDYW1wYWlnbnMgXCIgKyBwYXRoKTtcclxuICAgICAgICAgICAgY2hlY2tGaWxlRXhpc3QocGF0aCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PSBcInRydWVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRBRmlsZShwYXRoKS50aGVuKChjYW1wYWlnbnMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcGFpZ25zID0gSlNPTi5wYXJzZShjYW1wYWlnbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wYWlnbk9iaiA9IGNhbXBhaWducztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjYW1wYWlnbk9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1jYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG4vL1B1dHMgdGhlIGxpc3Qgb2YgY2FtcGFpZ25zIG9uIHRoZSBjYW1wYWlnbiBzZWxlY3Rvci5cclxuZnVuY3Rpb24gc2V0Q2FtcGFpZ25zKGNhbXBhaWducykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgY2FtcEFycmF5ID0gY2FtcGFpZ25zLmNhbXBhaWducztcclxuICAgICAgICAgICAgdmFyIGh0bWwgPSBcIjx0YWJsZT5cIjtcclxuICAgICAgICAgICAgY2FtcEFycmF5LmZvckVhY2goZnVuY3Rpb24gKG5vZGUsIGkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG5vZGUpKVxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2FtcGFpZ25zLmNhbXBhaWduc1tpXS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgaHRtbCArPSBcIjx0cj48dGQ+XCIgKyBjYW1wYWlnbnMuY2FtcGFpZ25zW2ldLm5hbWUgKyBcIjwvdGQ+PHRkPjxidXR0b24gdHlwZT0nYnV0dG9uJyBkYXRhLWxvYWQ9J1wiICsgY2FtcGFpZ25zLmNhbXBhaWduc1tpXS5uYW1lICsgXCInIGNsYXNzPSdidG4gYnRuLXByaW1hcnkgY2FtcExvYWQnPkxvYWQ8L2J1dHRvbj48YnV0dG9uIHR5cGU9J2J1dHRvbicgZGF0YS1kZWxldGU9J1wiICsgaSArIFwiJyBjbGFzcz0nYnRuIGJ0bi1wcmltYXJ5IGNhbXBEZWxldGUnPkRlbGV0ZTwvYnV0dG9uPjwvdGQ+PC90cj5cIjtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgaHRtbCArPSBcIjwvdGFibGU+XCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXNvbHZlKGh0bWwpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iLCJqUXVlcnkoXCIuY2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnRvZ2dsZSgpO1xyXG59KVxyXG5qUXVlcnkoXCIubWVudSBidXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG9wZW5NZSA9IGpRdWVyeSh0aGlzKS5hdHRyKFwiZGF0YS1vcGVuXCIpO1xyXG4gICAgalF1ZXJ5KFwiLlwiICsgb3Blbk1lKS50b2dnbGUoKTtcclxuICAgIGNsZWFyVG9wKCk7XHJcbiAgICBqUXVlcnkoXCIuXCIgKyBvcGVuTWUpLmFkZENsYXNzKFwib25Ub3BcIik7XHJcbn0pOyIsIiIsInZhciBwcm9mQiA9IGpRdWVyeSgnI3Byb2ZCb251cycpLnZhbCgpO1xyXG5zb21ldGhpbmdDbGV2ZXIoKTtcclxuXHJcbmpRdWVyeSgnI3Byb2ZCb251cycpLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBwcm9mQiA9IGpRdWVyeSgnI3Byb2ZCb251cycpLnZhbCgpO1xyXG4gICAgc29tZXRoaW5nQ2xldmVyKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc29tZXRoaW5nQ2xldmVyKCkge1xyXG4gICAgalF1ZXJ5KCcuaWNvbi1wcm9mJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY2xhc3NlcyA9IFsnaWNvbi1wcm9mJywgJ2ljb24tcHJvZiBwcm9maWNpZW50JywgJ2ljb24tcHJvZiBleHBlcnRpc2UnXTtcclxuICAgICAgICB2YXIgY3VycmVudENsYXNzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRQb3MgPSBqUXVlcnkuaW5BcnJheShjdXJyZW50Q2xhc3MsIGNsYXNzZXMpO1xyXG4gICAgICAgIHZhciBteVByb2YgPSBqUXVlcnkodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJy5wcm9mVmFsJyk7XHJcbiAgICAgICAgdXBkYXRlUHJvZihqUXVlcnkobXlQcm9mKSwgY3VycmVudFBvcyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUHJvZihteVByb2YsIG15UHJvZlNraWxsRmxhZykge1xyXG4gICAgdmFyIHRoaXNBYmlsaXR5ID0galF1ZXJ5KG15UHJvZikuYXR0cignaWQnKTtcclxuICAgIHZhciB0aGlzQWJpbGl0eUJvbnVzSUQgPSAnIycgKyB0aGlzQWJpbGl0eSArICctQm9udXMnO1xyXG4gICAgdmFyIHRoaXNBYmlsaXR5Qm9udXMgPSBqUXVlcnkoJy5hYmlsaXRpZXMgJyArIHRoaXNBYmlsaXR5Qm9udXNJRCkudGV4dCgpO1xyXG4gICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpO1xyXG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAwKSB7XHJcbiAgICAgICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpO1xyXG4gICAgfVxyXG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAxKSB7XHJcbiAgICAgICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHByb2ZCKSArIHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpO1xyXG4gICAgfVxyXG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAyKSB7XHJcbiAgICAgICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHByb2ZCKSAqIDIgKyAocGFyc2VJbnQodGhpc0FiaWxpdHlCb251cykpO1xyXG4gICAgfVxyXG4gICAgalF1ZXJ5KG15UHJvZikudGV4dChuZXdWYWwpO1xyXG59O1xyXG5cclxuXHJcbmpRdWVyeSgnLmljb24tcHJvZicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNsYXNzZXMgPSBbJ2ljb24tcHJvZicsICdpY29uLXByb2YgcHJvZmljaWVudCcsICdpY29uLXByb2YgZXhwZXJ0aXNlJ107XHJcbiAgICB2YXIgY3VycmVudENsYXNzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XHJcbiAgICB2YXIgY3VycmVudFBvcyA9IGpRdWVyeS5pbkFycmF5KGN1cnJlbnRDbGFzcywgY2xhc3Nlcyk7XHJcbiAgICB2YXIgbmV3UG9zID0gKChjdXJyZW50UG9zICsgMSkgJSBjbGFzc2VzLmxlbmd0aCk7XHJcbiAgICB2YXIgbmV3Q2xhc3MgPSBjbGFzc2VzW25ld1Bvc107XHJcbiAgICBqUXVlcnkodGhpcykuYXR0cignY2xhc3MnLCBuZXdDbGFzcyk7XHJcbiAgICB2YXIgbXlQcm9mID0galF1ZXJ5KHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKCcucHJvZlZhbCcpO1xyXG4gICAgdXBkYXRlUHJvZihqUXVlcnkobXlQcm9mKSwgbmV3UG9zKTtcclxufSk7XHJcbiIsIi8vdGhlbWVzXHJcbnZhciBidXR0b25PcHRpb25zID0gWydkZWZhdWx0JywgJ2JsYWNrJywgJ2dyYXknLCAnbGlnaHQnLCAncmVkJ107XHJcbmpRdWVyeShidXR0b25PcHRpb25zKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG15U3R5bGUgPSB0aGlzO1xyXG4gICAgdmFyIG15SWQgPSAnIycgKyBteVN0eWxlO1xyXG4gICAgalF1ZXJ5KG15SWQpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQXR0cignY2xhc3MnKTtcclxuICAgICAgICBqUXVlcnkoJ2JvZHknKS5hZGRDbGFzcygndGhlbWUtJyArIG15U3R5bGUpO1xyXG4gICAgfSlcclxufSlcclxuIl19
