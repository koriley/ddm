'use strict'; // remove line below when testing frontend

var fs = require('fs'); // Paths


var campaignListPath = "./campaign.json";
var bookPath = "./book/";
var campaignDirPath = "/campaigns/"; ///
//glodal objects

var books = {};
var npc = {};
var campaignObj = {};
var thisCampaign = {}; ///
//global vars
///
//temp to cose the campaign picker.

jQuery(".closeCampWindow").on("click", function () {
  jQuery(".campaigns").remove();
});
jQuery("document").ready(function () {
  jQuery(".drag").draggable({
    containment: ".mainView",
    scroll: false
  });
});

Object.prototype.hasOwnProperty = function (property) {
  return this[property] !== undefined;
}; // getDirContents("./books").then(function (files) {
//   // console.log();
//   // console.log(JSON.parse(JSON.stringify(files.files[0].name)));
//   for(var i = 0; i <= files.files.length - 1; i++) {
//     readAFile("./books/" + JSON.parse(JSON.stringify(files.files[i].name))).then(function (book) {
//       var bookTitle = JSON.parse(book);
//       console.log(bookTitle.details.name);
//       jQuery(".bookList").append(`<div class="book">${bookTitle.details.name}<div>`);
//        //look for npc, this will eventually be its own function
//       if(bookTitle.hasOwnProperty("NPC")){
//         console.log(bookTitle.details.name+" true")
//       }else{
//         console.log("none found")
//       }
//     });
//   }
// });
"use strict";

jQuery(document).ready(function () {
  startApp().then(function (data) {
    setCampaigns(data).then(function (campList) {
      jQuery(".campaignList").prepend(campList);
    });
    console.log(JSON.stringify(data));
    console.log(campaignObj);
  });
});

function startApp() {
  return new Promise(function (resolve, reject) {
    try {
      getCampaigns(campaignListPath).then(function (data) {
        resolve(data);
      });
    } catch (error) {
      reject(error);
    }
  });
}
'use strict';

function readAFile(filepath) {
  return new Promise(function (resolve, reject) {
    fs.readFile(filepath, 'utf-8', function (err, data) {
      if (err) {
        reject("An error ocurred reading the file :" + err.message);
        return;
      } else {
        resolve(data);
      }
    });
  });
}

function writeFile(filepath, data) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(filepath, data, function (err) {
      if (err) {
        reject(err);
      } else {
        resolve("File Written");
      }
    });
  });
}

function getDirContents(dir) {
  return new Promise(function (resolve, reject) {
    var files = {};
    var fileNames = [];

    try {
      fs.readdirSync(dir).forEach(function (fileName) {
        fileNames.push({
          "name": fileName
        });
        files = {
          "files": fileNames
        };
      });
      resolve(files);
    } catch (error) {
      reject(error);
    }
  });
}

function checkFileExist(path) {
  return new Promise(function (resolve, reject) {
    if (!path) {
      reject("Path is invalid " + path);
    }

    try {
      fs.access(path, fs.F_OK, function (err) {
        if (err) {
          resolve("false");
        }

        resolve("true");
      });
    } catch (error) {
      reject("error");
    }
  });
} //write test
// var testObj  = "This is a write test";
// writeFile("../test.txt", testObj);
"use strict";

function updateAbilityBonus(myAbility) {
  var ability = jQuery(myAbility).val();
  var modifier = jQuery(myAbility).parent().children('.modifier-bubble').text();

  if (!jQuery.isNumeric(ability)) {
    ability = 1;
    jQuery(myAbility).val(ability);
  }

  modifier = Math.floor((ability - 10) / 2);
  jQuery(myAbility).parent().children('.modifier-bubble').text(modifier);
}

;
jQuery(".ability").each(function () {
  updateAbilityBonus(jQuery(this));
  jQuery(this).on("focus", function () {
    jQuery(this).select();
  });
  jQuery(this).on("keyup", function () {
    updateAbilityBonus(jQuery(this));
    updateProf(jQuery('.savingThrows #' + jQuery(this).attr('id')));
  });
});
"use strict";

function clearTop() {
  jQuery(".drag").each(function () {
    jQuery(this).removeClass("onTop");
  });
}

;
jQuery(".drag").on("mousedown", function () {
  clearTop();
  jQuery(this).addClass("onTop");
});
"use strict";

jQuery(".campAdd").on("click", function () {
  newCampaign();
}); //the delete button

jQuery(".campaignList").on("click", ".campDelete", function () {
  var toDelete = jQuery(this).attr("data-delete"); // console.log("clicked");
  //should add a are you sure popup

  console.log("delet this number " + toDelete + " and this is the object" + JSON.stringify(campaignObj.campaigns));
  campaignObj.campaigns.splice(toDelete);
  console.log(JSON.stringify(campaignObj));
  writeFile(campaignListPath, JSON.stringify(campaignObj)).then(function (data) {
    if (data == "File Written") {
      getCampaigns(campaignListPath);
    }
  });
});
jQuery(".campaignList").on("click", ".saveNewCamp", function () {
  var newCampName = jQuery("input[name='newCamp']").val();
  var campObj = {
    "name": newCampName
  };
  campaignObj.campaigns.push(campObj); // console.log(JSON.stringify(campaignObj))

  writeFile(campaignListPath, JSON.stringify(campaignObj)).then(function (data) {
    if (data == "File Written") {
      getCampaigns(campaignListPath).then(function (data) {
        setCampaigns(data).then(function (campList) {
          jQuery(".campaignList").html(campList);
        });
      });
    }
  });
});

function newCampaign() {
  getCampaigns(campaignListPath).then(function (data) {
    setCampaigns(data).then(function (html) {
      var addOnHtml = "<tr><td><input type='text' name='newCamp' /></td><td><button type='button' class='btn btn-primary saveNewCamp'>Save</button></td></tr></table>";
      var newHtml = html.replace("</table>", addOnHtml);
      jQuery(".campaignList").html(newHtml);
    });
  });
} //Gets the list of campaigns


function getCampaigns(path) {
  return new Promise(function (resolve, reject) {
    try {
      // console.log("getCampaigns " + path);
      checkFileExist(path).then(function (data) {
        // console.log(data);
        if (data == "true") {
          readAFile(path).then(function (campaigns) {
            campaigns = JSON.parse(campaigns);
            campaignObj = campaigns;
            resolve(campaignObj);
          });
        }
      });
    } catch (error) {
      reject(error);
    }
  });
} //Puts the list of campaigns on the campaign selector.


function setCampaigns(campaigns) {
  return new Promise(function (resolve, reject) {
    try {
      var campArray = campaigns.campaigns;
      var html = "<table>";
      campArray.forEach(function (node, i) {
        console.log(JSON.stringify(node)); // console.log(campaigns.campaigns[i].name)

        html += "<tr><td>" + campaigns.campaigns[i].name + "</td><td><button type='button' data-load='" + campaigns.campaigns[i].name + "' class='btn btn-primary campLoad'>Load</button><button type='button' data-delete='" + i + "' class='btn btn-primary campDelete'>Delete</button></td></tr>";
      });
      html += "</table>";
      resolve(html);
    } catch (error) {
      reject(error);
    }
  });
}
"use strict";

jQuery(".close").click(function () {
  jQuery(this).parent().toggle();
});
jQuery(".menu button").click(function () {
  var openMe = jQuery(this).attr("data-open");
  jQuery("." + openMe).toggle();
  clearTop();
  jQuery("." + openMe).addClass("onTop");
});
"use strict";
"use strict";

var profB = jQuery('#profBonus').val();
somethingClever();
jQuery('#profBonus').on("keyup", function () {
  profB = jQuery('#profBonus').val();
  somethingClever();
});

function somethingClever() {
  jQuery('.icon-prof').each(function () {
    var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
    var currentClass = jQuery(this).attr('class');
    var currentPos = jQuery.inArray(currentClass, classes);
    var myProf = jQuery(this).parent().children('.profVal');
    updateProf(jQuery(myProf), currentPos);
  });
}

function updateProf(myProf, myProfSkillFlag) {
  var thisAbility = jQuery(myProf).attr('id');
  var thisAbilityBonusID = '#' + thisAbility + '-Bonus';
  var thisAbilityBonus = jQuery('.abilities ' + thisAbilityBonusID).text();
  var newVal = parseInt(thisAbilityBonus);

  if (myProfSkillFlag == 0) {
    var newVal = parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 1) {
    var newVal = parseInt(profB) + parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 2) {
    var newVal = parseInt(profB) * 2 + parseInt(thisAbilityBonus);
  }

  jQuery(myProf).text(newVal);
}

;
jQuery('.icon-prof').click(function () {
  var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
  var currentClass = jQuery(this).attr('class');
  var currentPos = jQuery.inArray(currentClass, classes);
  var newPos = (currentPos + 1) % classes.length;
  var newClass = classes[newPos];
  jQuery(this).attr('class', newClass);
  var myProf = jQuery(this).parent().children('.profVal');
  updateProf(jQuery(myProf), newPos);
});
"use strict";

//themes
var buttonOptions = ['default', 'black', 'gray', 'light', 'red'];
jQuery(buttonOptions).each(function () {
  var myStyle = this;
  var myId = '#' + myStyle;
  jQuery(myId).on("click", function () {
    $("body").removeAttr('class');
    jQuery('body').addClass('theme-' + myStyle);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAxX2FwcC5qcyIsIjAyX3N0YXJ0dXAuanMiLCIwM19pby5qcyIsImFiaWxpdHlCb251cy5qcyIsImNsaWNrVG9Gcm9udC5qcyIsImxvYWRDYW1wYWlnbi5qcyIsIm1lbnVCdXR0b25zLmpzIiwibnBjLmpzIiwicHJvZmljaWVuY2llcy5qcyIsInRoZW1lcy5qcyJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJjYW1wYWlnbkxpc3RQYXRoIiwiYm9va1BhdGgiLCJjYW1wYWlnbkRpclBhdGgiLCJib29rcyIsIm5wYyIsImNhbXBhaWduT2JqIiwidGhpc0NhbXBhaWduIiwialF1ZXJ5Iiwib24iLCJyZW1vdmUiLCJyZWFkeSIsImRyYWdnYWJsZSIsImNvbnRhaW5tZW50Iiwic2Nyb2xsIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwcm9wZXJ0eSIsInVuZGVmaW5lZCIsImRvY3VtZW50Iiwic3RhcnRBcHAiLCJ0aGVuIiwiZGF0YSIsInNldENhbXBhaWducyIsImNhbXBMaXN0IiwicHJlcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRDYW1wYWlnbnMiLCJlcnJvciIsInJlYWRBRmlsZSIsImZpbGVwYXRoIiwicmVhZEZpbGUiLCJlcnIiLCJtZXNzYWdlIiwid3JpdGVGaWxlIiwiZ2V0RGlyQ29udGVudHMiLCJkaXIiLCJmaWxlcyIsImZpbGVOYW1lcyIsInJlYWRkaXJTeW5jIiwiZm9yRWFjaCIsImZpbGVOYW1lIiwicHVzaCIsImNoZWNrRmlsZUV4aXN0IiwicGF0aCIsImFjY2VzcyIsIkZfT0siLCJ1cGRhdGVBYmlsaXR5Qm9udXMiLCJteUFiaWxpdHkiLCJhYmlsaXR5IiwidmFsIiwibW9kaWZpZXIiLCJwYXJlbnQiLCJjaGlsZHJlbiIsInRleHQiLCJpc051bWVyaWMiLCJNYXRoIiwiZmxvb3IiLCJlYWNoIiwic2VsZWN0IiwidXBkYXRlUHJvZiIsImF0dHIiLCJjbGVhclRvcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJuZXdDYW1wYWlnbiIsInRvRGVsZXRlIiwiY2FtcGFpZ25zIiwic3BsaWNlIiwibmV3Q2FtcE5hbWUiLCJjYW1wT2JqIiwiaHRtbCIsImFkZE9uSHRtbCIsIm5ld0h0bWwiLCJyZXBsYWNlIiwicGFyc2UiLCJjYW1wQXJyYXkiLCJub2RlIiwiaSIsIm5hbWUiLCJjbGljayIsInRvZ2dsZSIsIm9wZW5NZSIsInByb2ZCIiwic29tZXRoaW5nQ2xldmVyIiwiY2xhc3NlcyIsImN1cnJlbnRDbGFzcyIsImN1cnJlbnRQb3MiLCJpbkFycmF5IiwibXlQcm9mIiwibXlQcm9mU2tpbGxGbGFnIiwidGhpc0FiaWxpdHkiLCJ0aGlzQWJpbGl0eUJvbnVzSUQiLCJ0aGlzQWJpbGl0eUJvbnVzIiwibmV3VmFsIiwicGFyc2VJbnQiLCJuZXdQb3MiLCJsZW5ndGgiLCJuZXdDbGFzcyIsImJ1dHRvbk9wdGlvbnMiLCJteVN0eWxlIiwibXlJZCIsIiQiLCJyZW1vdmVBdHRyIl0sIm1hcHBpbmdzIjoiQUFBQSxhLENBQ0U7O0FBQ0EsSUFBSUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBRCxDQUFoQixDLENBRUY7OztBQUNBLElBQUlDLGdCQUFnQixHQUFHLGlCQUF2QjtBQUNBLElBQUlDLFFBQVEsR0FBRyxTQUFmO0FBQ0EsSUFBSUMsZUFBZSxHQUFHLGFBQXRCLEMsQ0FFQTtBQUVBOztBQUNBLElBQUlDLEtBQUssR0FBRyxFQUFaO0FBQ0EsSUFBSUMsR0FBRyxHQUFHLEVBQVY7QUFDQSxJQUFJQyxXQUFXLEdBQUcsRUFBbEI7QUFDQSxJQUFJQyxZQUFZLEdBQUcsRUFBbkIsQyxDQUNBO0FBRUE7QUFFQTtBQUVBOztBQUNBQyxNQUFNLENBQUMsa0JBQUQsQ0FBTixDQUEyQkMsRUFBM0IsQ0FBOEIsT0FBOUIsRUFBdUMsWUFBVTtBQUMvQ0QsRUFBQUEsTUFBTSxDQUFDLFlBQUQsQ0FBTixDQUFxQkUsTUFBckI7QUFDRCxDQUZEO0FB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QVEsR0FBR2IsT0FBTyxDQUFDVyxNQUFELENBQXRCO0FBQ0EvRixFQUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWE0RCxJQUFiLENBQWtCLE9BQWxCLEVBQTJCcUMsUUFBM0I7QUFDQSxNQUFJVCxNQUFNLEdBQUd4RixNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFtRCxNQUFiLEdBQXNCQyxRQUF0QixDQUErQixVQUEvQixDQUFiO0FBQ0FPLEVBQUFBLFVBQVUsQ0FBQzNELE1BQU0sQ0FBQ3dGLE1BQUQsQ0FBUCxFQUFpQk8sTUFBakIsQ0FBVjtBQUNILENBVEQ7OztBQ3BDQTtBQUNBLElBQUlHLGFBQWEsR0FBRyxDQUFDLFNBQUQsRUFBWSxPQUFaLEVBQXFCLE1BQXJCLEVBQTZCLE9BQTdCLEVBQXNDLEtBQXRDLENBQXBCO0FBQ0FsRyxNQUFNLENBQUNrRyxhQUFELENBQU4sQ0FBc0J6QyxJQUF0QixDQUEyQixZQUFXO0FBQ2xDLE1BQUkwQyxPQUFPLEdBQUcsSUFBZDtBQUNBLE1BQUlDLElBQUksR0FBRyxNQUFNRCxPQUFqQjtBQUNBbkcsRUFBQUEsTUFBTSxDQUFDb0csSUFBRCxDQUFOLENBQWFuRyxFQUFiLENBQWdCLE9BQWhCLEVBQXlCLFlBQVc7QUFDaENvRyxJQUFBQSxDQUFDLENBQUMsTUFBRCxDQUFELENBQVVDLFVBQVYsQ0FBcUIsT0FBckI7QUFDQXRHLElBQUFBLE1BQU0sQ0FBQyxNQUFELENBQU4sQ0FBZStELFFBQWYsQ0FBd0IsV0FBV29DLE9BQW5DO0FBQ0gsR0FIRDtBQUlILENBUEQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuICAvLyByZW1vdmUgbGluZSBiZWxvdyB3aGVuIHRlc3RpbmcgZnJvbnRlbmRcbiAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbiAgXG4vLyBQYXRoc1xubGV0IGNhbXBhaWduTGlzdFBhdGggPSBcIi4vY2FtcGFpZ24uanNvblwiO1xubGV0IGJvb2tQYXRoID0gXCIuL2Jvb2svXCI7XG5sZXQgY2FtcGFpZ25EaXJQYXRoID0gXCIvY2FtcGFpZ25zL1wiO1xuXG4vLy9cblxuLy9nbG9kYWwgb2JqZWN0c1xudmFyIGJvb2tzID0ge307XG52YXIgbnBjID0ge307XG52YXIgY2FtcGFpZ25PYmogPSB7fTtcbnZhciB0aGlzQ2FtcGFpZ24gPSB7fTtcbi8vL1xuXG4vL2dsb2JhbCB2YXJzXG5cbi8vL1xuXG4vL3RlbXAgdG8gY29zZSB0aGUgY2FtcGFpZ24gcGlja2VyLlxualF1ZXJ5KFwiLmNsb3NlQ2FtcFdpbmRvd1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gIGpRdWVyeShcIi5jYW1wYWlnbnNcIikucmVtb3ZlKCk7XG59KTtcblxualF1ZXJ5KFwiZG9jdW1lbnRcIikucmVhZHkoZnVuY3Rpb24gKCkge1xuICBqUXVlcnkoXCIuZHJhZ1wiKS5kcmFnZ2FibGUoe1xuICAgICAgY29udGFpbm1lbnQ6IFwiLm1haW5WaWV3XCIsXG4gICAgICBzY3JvbGw6IGZhbHNlXG4gIH0pO1xuXG5cbn0pO1xuXG5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5ID0gZnVuY3Rpb24ocHJvcGVydHkpIHtcbnJldHVybiB0aGlzW3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkO1xufTtcblxuLy8gZ2V0RGlyQ29udGVudHMoXCIuL2Jvb2tzXCIpLnRoZW4oZnVuY3Rpb24gKGZpbGVzKSB7XG4vLyAgIC8vIGNvbnNvbGUubG9nKCk7XG4vLyAgIC8vIGNvbnNvbGUubG9nKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZXMuZmlsZXNbMF0ubmFtZSkpKTtcbi8vICAgZm9yKHZhciBpID0gMDsgaSA8PSBmaWxlcy5maWxlcy5sZW5ndGggLSAxOyBpKyspIHtcbi8vICAgICByZWFkQUZpbGUoXCIuL2Jvb2tzL1wiICsgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlcy5maWxlc1tpXS5uYW1lKSkpLnRoZW4oZnVuY3Rpb24gKGJvb2spIHtcbi8vICAgICAgIHZhciBib29rVGl0bGUgPSBKU09OLnBhcnNlKGJvb2spO1xuLy8gICAgICAgY29uc29sZS5sb2coYm9va1RpdGxlLmRldGFpbHMubmFtZSk7XG4vLyAgICAgICBqUXVlcnkoXCIuYm9va0xpc3RcIikuYXBwZW5kKGA8ZGl2IGNsYXNzPVwiYm9va1wiPiR7Ym9va1RpdGxlLmRldGFpbHMubmFtZX08ZGl2PmApO1xuXG4vLyAgICAgICAgLy9sb29rIGZvciBucGMsIHRoaXMgd2lsbCBldmVudHVhbGx5IGJlIGl0cyBvd24gZnVuY3Rpb25cbi8vICAgICAgIGlmKGJvb2tUaXRsZS5oYXNPd25Qcm9wZXJ0eShcIk5QQ1wiKSl7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKGJvb2tUaXRsZS5kZXRhaWxzLm5hbWUrXCIgdHJ1ZVwiKVxuLy8gICAgICAgfWVsc2V7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKFwibm9uZSBmb3VuZFwiKVxuLy8gICAgICAgfVxuXG4vLyAgICAgfSk7XG4gICBcblxuXG4vLyAgIH1cbi8vIH0pO1xuXG4iLCJqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gIFxuICBzdGFydEFwcCgpLnRoZW4oKGRhdGEpPT57XG4gICAgc2V0Q2FtcGFpZ25zKGRhdGEpLnRoZW4oKGNhbXBMaXN0KT0+e1xuICAgICAgalF1ZXJ5KFwiLmNhbXBhaWduTGlzdFwiKS5wcmVwZW5kKGNhbXBMaXN0KTtcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICBjb25zb2xlLmxvZyhjYW1wYWlnbk9iailcbiAgfSk7XG4gXG4gIH0pXG4gIFxuXG4gIGZ1bmN0aW9uIHN0YXJ0QXBwKCl7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICB0cnl7XG4gICAgICAgIGdldENhbXBhaWducyhjYW1wYWlnbkxpc3RQYXRoKS50aGVuKChkYXRhKT0+e1xuICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKXtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICB9IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiByZWFkQUZpbGUoZmlsZXBhdGgpe1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGZzLnJlYWRGaWxlKGZpbGVwYXRoLCAndXRmLTgnLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJBbiBlcnJvciBvY3VycmVkIHJlYWRpbmcgdGhlIGZpbGUgOlwiICsgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmlsZShmaWxlcGF0aCwgZGF0YSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmcy53cml0ZUZpbGUoZmlsZXBhdGgsIGRhdGEsIChlcnIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICByZXNvbHZlKFwiRmlsZSBXcml0dGVuXCIpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGdldERpckNvbnRlbnRzKGRpcil7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgIHZhciBmaWxlcyA9IHt9O1xuICAgICAgICB2YXIgZmlsZU5hbWVzID0gW107XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGZzLnJlYWRkaXJTeW5jKGRpcikuZm9yRWFjaCgoZmlsZU5hbWUpPT57XG4gICAgICAgICAgICAgICAgZmlsZU5hbWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjpmaWxlTmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgZmlsZXMgPSB7XCJmaWxlc1wiOmZpbGVOYW1lc31cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNvbHZlKGZpbGVzKTtcbiAgICAgICAgfWNhdGNoKGVycm9yKXtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gY2hlY2tGaWxlRXhpc3QocGF0aCl7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgaWYoIXBhdGgpe1xuICAgICAgICAgICAgIHJlamVjdChcIlBhdGggaXMgaW52YWxpZCBcIitwYXRoKVxuICAgICAgICB9XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGZzLmFjY2VzcyhwYXRoLCBmcy5GX09LLCAoZXJyKT0+e1xuICAgICAgICAgICAgICAgIGlmKGVycil7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShcInRydWVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICByZWplY3QoXCJlcnJvclwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy93cml0ZSB0ZXN0XG4vLyB2YXIgdGVzdE9iaiAgPSBcIlRoaXMgaXMgYSB3cml0ZSB0ZXN0XCI7XG4vLyB3cml0ZUZpbGUoXCIuLi90ZXN0LnR4dFwiLCB0ZXN0T2JqKTtcbiIsIlxuZnVuY3Rpb24gdXBkYXRlQWJpbGl0eUJvbnVzKG15QWJpbGl0eSkge1xuICAgIHZhciBhYmlsaXR5ID0galF1ZXJ5KG15QWJpbGl0eSkudmFsKCk7XG5cbiAgICB2YXIgbW9kaWZpZXIgPSBqUXVlcnkobXlBYmlsaXR5KS5wYXJlbnQoKS5jaGlsZHJlbignLm1vZGlmaWVyLWJ1YmJsZScpLnRleHQoKTtcbiAgICBpZiAoIWpRdWVyeS5pc051bWVyaWMoYWJpbGl0eSkpIHtcbiAgICAgICAgYWJpbGl0eSA9IDE7XG4gICAgICAgIGpRdWVyeShteUFiaWxpdHkpLnZhbChhYmlsaXR5KTtcbiAgICB9XG5cbiAgICBtb2RpZmllciA9IE1hdGguZmxvb3IoKGFiaWxpdHkgLSAxMCkgLyAyKTtcbiAgICBqUXVlcnkobXlBYmlsaXR5KS5wYXJlbnQoKS5jaGlsZHJlbignLm1vZGlmaWVyLWJ1YmJsZScpLnRleHQobW9kaWZpZXIpO1xufTtcblxuXG5qUXVlcnkoXCIuYWJpbGl0eVwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHVwZGF0ZUFiaWxpdHlCb251cyhqUXVlcnkodGhpcykpO1xuXG4gICAgalF1ZXJ5KHRoaXMpLm9uKFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGpRdWVyeSh0aGlzKS5zZWxlY3QoKTtcbiAgICB9KVxuICAgIGpRdWVyeSh0aGlzKS5vbihcImtleXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB1cGRhdGVBYmlsaXR5Qm9udXMoalF1ZXJ5KHRoaXMpKTtcbiAgICAgICAgdXBkYXRlUHJvZihqUXVlcnkoJy5zYXZpbmdUaHJvd3MgIycralF1ZXJ5KHRoaXMpLmF0dHIoJ2lkJykpKTtcbiAgICB9KTtcbn0pO1xuIiwiZnVuY3Rpb24gY2xlYXJUb3AoKSB7XG4gICAgalF1ZXJ5KFwiLmRyYWdcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZUNsYXNzKFwib25Ub3BcIik7XG4gICAgfSk7XG59O1xuXG5qUXVlcnkoXCIuZHJhZ1wiKS5vbihcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRvcCgpO1xuICAgIGpRdWVyeSh0aGlzKS5hZGRDbGFzcyhcIm9uVG9wXCIpO1xufSk7XG4iLCJqUXVlcnkoXCIuY2FtcEFkZFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBuZXdDYW1wYWlnbigpO1xufSk7XG5cbi8vdGhlIGRlbGV0ZSBidXR0b25cbmpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikub24oXCJjbGlja1wiLCBcIi5jYW1wRGVsZXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG9EZWxldGUgPSBqUXVlcnkodGhpcykuYXR0cihcImRhdGEtZGVsZXRlXCIpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiY2xpY2tlZFwiKTtcbiAgICAvL3Nob3VsZCBhZGQgYSBhcmUgeW91IHN1cmUgcG9wdXBcbiAgICBjb25zb2xlLmxvZyhcImRlbGV0IHRoaXMgbnVtYmVyIFwiICsgdG9EZWxldGUgKyBcIiBhbmQgdGhpcyBpcyB0aGUgb2JqZWN0XCIgKyBKU09OLnN0cmluZ2lmeShjYW1wYWlnbk9iai5jYW1wYWlnbnMpKTtcbiAgICBjYW1wYWlnbk9iai5jYW1wYWlnbnMuc3BsaWNlKHRvRGVsZXRlKTtcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShjYW1wYWlnbk9iaikpO1xuICAgIHdyaXRlRmlsZShjYW1wYWlnbkxpc3RQYXRoLCBKU09OLnN0cmluZ2lmeShjYW1wYWlnbk9iaikpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGEgPT0gXCJGaWxlIFdyaXR0ZW5cIikge1xuICAgICAgICAgICAgZ2V0Q2FtcGFpZ25zKGNhbXBhaWduTGlzdFBhdGgpO1xuICAgICAgICB9XG4gICAgfSlcblxufSk7XG5cbmpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikub24oXCJjbGlja1wiLCBcIi5zYXZlTmV3Q2FtcFwiLCBmdW5jdGlvbigpe1xuICAgIHZhciBuZXdDYW1wTmFtZSA9IGpRdWVyeShcImlucHV0W25hbWU9J25ld0NhbXAnXVwiKS52YWwoKTtcbiAgICB2YXIgY2FtcE9iaiA9IHtcIm5hbWVcIjpuZXdDYW1wTmFtZX07XG4gICAgY2FtcGFpZ25PYmouY2FtcGFpZ25zLnB1c2goY2FtcE9iaik7XG4gICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoY2FtcGFpZ25PYmopKVxuICAgIHdyaXRlRmlsZShjYW1wYWlnbkxpc3RQYXRoLCBKU09OLnN0cmluZ2lmeShjYW1wYWlnbk9iaikpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGEgPT0gXCJGaWxlIFdyaXR0ZW5cIikge1xuICAgICAgICAgICAgZ2V0Q2FtcGFpZ25zKGNhbXBhaWduTGlzdFBhdGgpLnRoZW4oKGRhdGEpPT57XG4gICAgICAgICAgICAgICAgc2V0Q2FtcGFpZ25zKGRhdGEpLnRoZW4oZnVuY3Rpb24oY2FtcExpc3Qpe1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIuY2FtcGFpZ25MaXN0XCIpLmh0bWwoY2FtcExpc3QpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbmZ1bmN0aW9uIG5ld0NhbXBhaWduKCkge1xuICAgIGdldENhbXBhaWducyhjYW1wYWlnbkxpc3RQYXRoKS50aGVuKChkYXRhKT0+e1xuICAgICAgICBzZXRDYW1wYWlnbnMoZGF0YSkudGhlbigoaHRtbCk9PntcbiAgICAgICAgICAgdmFyIGFkZE9uSHRtbCA9IFwiPHRyPjx0ZD48aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nbmV3Q2FtcCcgLz48L3RkPjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tcHJpbWFyeSBzYXZlTmV3Q2FtcCc+U2F2ZTwvYnV0dG9uPjwvdGQ+PC90cj48L3RhYmxlPlwiO1xuICAgICAgICAgICB2YXIgbmV3SHRtbCA9IGh0bWwucmVwbGFjZShcIjwvdGFibGU+XCIsIGFkZE9uSHRtbCk7XG4gICAgICAgICAgIGpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikuaHRtbChuZXdIdG1sKTtcbiAgICAgICAgfSlcbiAgICB9KVxuXG59XG5cbi8vR2V0cyB0aGUgbGlzdCBvZiBjYW1wYWlnbnNcbmZ1bmN0aW9uIGdldENhbXBhaWducyhwYXRoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZ2V0Q2FtcGFpZ25zIFwiICsgcGF0aCk7XG4gICAgICAgICAgICBjaGVja0ZpbGVFeGlzdChwYXRoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZEFGaWxlKHBhdGgpLnRoZW4oKGNhbXBhaWducykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcGFpZ25zID0gSlNPTi5wYXJzZShjYW1wYWlnbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcGFpZ25PYmogPSBjYW1wYWlnbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNhbXBhaWduT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1jYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG4vL1B1dHMgdGhlIGxpc3Qgb2YgY2FtcGFpZ25zIG9uIHRoZSBjYW1wYWlnbiBzZWxlY3Rvci5cbmZ1bmN0aW9uIHNldENhbXBhaWducyhjYW1wYWlnbnMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGNhbXBBcnJheSA9IGNhbXBhaWducy5jYW1wYWlnbnM7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IFwiPHRhYmxlPlwiO1xuICAgICAgICAgICAgY2FtcEFycmF5LmZvckVhY2goZnVuY3Rpb24gKG5vZGUsIGkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShub2RlKSlcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjYW1wYWlnbnMuY2FtcGFpZ25zW2ldLm5hbWUpXG4gICAgICAgICAgICAgICAgaHRtbCArPSBcIjx0cj48dGQ+XCIgKyBjYW1wYWlnbnMuY2FtcGFpZ25zW2ldLm5hbWUgKyBcIjwvdGQ+PHRkPjxidXR0b24gdHlwZT0nYnV0dG9uJyBkYXRhLWxvYWQ9J1wiICsgY2FtcGFpZ25zLmNhbXBhaWduc1tpXS5uYW1lICsgXCInIGNsYXNzPSdidG4gYnRuLXByaW1hcnkgY2FtcExvYWQnPkxvYWQ8L2J1dHRvbj48YnV0dG9uIHR5cGU9J2J1dHRvbicgZGF0YS1kZWxldGU9J1wiICsgaSArIFwiJyBjbGFzcz0nYnRuIGJ0bi1wcmltYXJ5IGNhbXBEZWxldGUnPkRlbGV0ZTwvYnV0dG9uPjwvdGQ+PC90cj5cIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBodG1sICs9IFwiPC90YWJsZT5cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzb2x2ZShodG1sKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iLCJqUXVlcnkoXCIuY2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIGpRdWVyeSh0aGlzKS5wYXJlbnQoKS50b2dnbGUoKTtcbn0pXG5qUXVlcnkoXCIubWVudSBidXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcGVuTWUgPSBqUXVlcnkodGhpcykuYXR0cihcImRhdGEtb3BlblwiKTtcbiAgICBqUXVlcnkoXCIuXCIgKyBvcGVuTWUpLnRvZ2dsZSgpO1xuICAgIGNsZWFyVG9wKCk7XG4gICAgalF1ZXJ5KFwiLlwiICsgb3Blbk1lKS5hZGRDbGFzcyhcIm9uVG9wXCIpO1xufSk7IiwiIiwidmFyIHByb2ZCID0galF1ZXJ5KCcjcHJvZkJvbnVzJykudmFsKCk7XG5zb21ldGhpbmdDbGV2ZXIoKTtcblxualF1ZXJ5KCcjcHJvZkJvbnVzJykub24oXCJrZXl1cFwiLCBmdW5jdGlvbigpIHtcbiAgICBwcm9mQiA9IGpRdWVyeSgnI3Byb2ZCb251cycpLnZhbCgpO1xuICAgIHNvbWV0aGluZ0NsZXZlcigpO1xufSk7XG5cbmZ1bmN0aW9uIHNvbWV0aGluZ0NsZXZlcigpIHtcbiAgICBqUXVlcnkoJy5pY29uLXByb2YnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFsnaWNvbi1wcm9mJywgJ2ljb24tcHJvZiBwcm9maWNpZW50JywgJ2ljb24tcHJvZiBleHBlcnRpc2UnXTtcbiAgICAgICAgdmFyIGN1cnJlbnRDbGFzcyA9IGpRdWVyeSh0aGlzKS5hdHRyKCdjbGFzcycpO1xuICAgICAgICB2YXIgY3VycmVudFBvcyA9IGpRdWVyeS5pbkFycmF5KGN1cnJlbnRDbGFzcywgY2xhc3Nlcyk7XG4gICAgICAgIHZhciBteVByb2YgPSBqUXVlcnkodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJy5wcm9mVmFsJyk7XG4gICAgICAgIHVwZGF0ZVByb2YoalF1ZXJ5KG15UHJvZiksIGN1cnJlbnRQb3MpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQcm9mKG15UHJvZiwgbXlQcm9mU2tpbGxGbGFnKSB7XG4gICAgdmFyIHRoaXNBYmlsaXR5ID0galF1ZXJ5KG15UHJvZikuYXR0cignaWQnKTtcbiAgICB2YXIgdGhpc0FiaWxpdHlCb251c0lEID0gJyMnICsgdGhpc0FiaWxpdHkgKyAnLUJvbnVzJztcbiAgICB2YXIgdGhpc0FiaWxpdHlCb251cyA9IGpRdWVyeSgnLmFiaWxpdGllcyAnICsgdGhpc0FiaWxpdHlCb251c0lEKS50ZXh0KCk7XG4gICAgdmFyIG5ld1ZhbCA9IHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpO1xuICAgIGlmIChteVByb2ZTa2lsbEZsYWcgPT0gMCkge1xuICAgICAgICB2YXIgbmV3VmFsID0gcGFyc2VJbnQodGhpc0FiaWxpdHlCb251cyk7XG4gICAgfVxuICAgIGlmIChteVByb2ZTa2lsbEZsYWcgPT0gMSkge1xuICAgICAgICB2YXIgbmV3VmFsID0gcGFyc2VJbnQocHJvZkIpICsgcGFyc2VJbnQodGhpc0FiaWxpdHlCb251cyk7XG4gICAgfVxuICAgIGlmIChteVByb2ZTa2lsbEZsYWcgPT0gMikge1xuICAgICAgICB2YXIgbmV3VmFsID0gcGFyc2VJbnQocHJvZkIpICogMiArIChwYXJzZUludCh0aGlzQWJpbGl0eUJvbnVzKSk7XG4gICAgfVxuICAgIGpRdWVyeShteVByb2YpLnRleHQobmV3VmFsKTtcbn07XG5cblxualF1ZXJ5KCcuaWNvbi1wcm9mJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNsYXNzZXMgPSBbJ2ljb24tcHJvZicsICdpY29uLXByb2YgcHJvZmljaWVudCcsICdpY29uLXByb2YgZXhwZXJ0aXNlJ107XG4gICAgdmFyIGN1cnJlbnRDbGFzcyA9IGpRdWVyeSh0aGlzKS5hdHRyKCdjbGFzcycpO1xuICAgIHZhciBjdXJyZW50UG9zID0galF1ZXJ5LmluQXJyYXkoY3VycmVudENsYXNzLCBjbGFzc2VzKTtcbiAgICB2YXIgbmV3UG9zID0gKChjdXJyZW50UG9zICsgMSkgJSBjbGFzc2VzLmxlbmd0aCk7XG4gICAgdmFyIG5ld0NsYXNzID0gY2xhc3Nlc1tuZXdQb3NdO1xuICAgIGpRdWVyeSh0aGlzKS5hdHRyKCdjbGFzcycsIG5ld0NsYXNzKTtcbiAgICB2YXIgbXlQcm9mID0galF1ZXJ5KHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKCcucHJvZlZhbCcpO1xuICAgIHVwZGF0ZVByb2YoalF1ZXJ5KG15UHJvZiksIG5ld1Bvcyk7XG59KTtcbiIsIi8vdGhlbWVzXG52YXIgYnV0dG9uT3B0aW9ucyA9IFsnZGVmYXVsdCcsICdibGFjaycsICdncmF5JywgJ2xpZ2h0JywgJ3JlZCddO1xualF1ZXJ5KGJ1dHRvbk9wdGlvbnMpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdmFyIG15U3R5bGUgPSB0aGlzO1xuICAgIHZhciBteUlkID0gJyMnICsgbXlTdHlsZTtcbiAgICBqUXVlcnkobXlJZCkub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQXR0cignY2xhc3MnKTtcbiAgICAgICAgalF1ZXJ5KCdib2R5JykuYWRkQ2xhc3MoJ3RoZW1lLScgKyBteVN0eWxlKTtcbiAgICB9KVxufSlcbiJdfQ==
