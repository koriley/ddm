'use strict'; // remove line below when testing frontend

var fs = require('fs');

var rimraf = require("rimraf"); // Paths


var campaignListPath = "./campaign.json";
var bookPath = "./book/";
var campaignDirPath = "./campaigns/";
var thisCampaignPath; ///
//glodal objects

var books = {};
var npc = {};
var campaignObj = {};
var thisCampaign = {}; ///
//global vars

var spaceChar = "__"; ///
//temp to cose the campaign picker.

jQuery(".closeCampWindow").on("click", function () {
  jQuery(".campaigns").remove();
});
jQuery("document").ready(function () {
  jQuery(".drag").draggable({
    containment: ".mainView",
    scroll: false
  });
});

Object.prototype.hasOwnProperty = function (property) {
  return this[property] !== undefined;
}; // getDirContents("./books").then(function (files) {
//   // console.log();
//   // console.log(JSON.parse(JSON.stringify(files.files[0].name)));
//   for(var i = 0; i <= files.files.length - 1; i++) {
//     readAFile("./books/" + JSON.parse(JSON.stringify(files.files[i].name))).then(function (book) {
//       var bookTitle = JSON.parse(book);
//       console.log(bookTitle.details.name);
//       jQuery(".bookList").append(`<div class="book">${bookTitle.details.name}<div>`);
//        //look for npc, this will eventually be its own function
//       if(bookTitle.hasOwnProperty("NPC")){
//         console.log(bookTitle.details.name+" true")
//       }else{
//         console.log("none found")
//       }
//     });
//   }
// });
"use strict";

jQuery(document).ready(function () {
  startApp().then(function (data) {
    setCampaigns(data).then(function (campList) {
      jQuery(".campaignList").prepend(campList);
    });
    console.log(JSON.stringify(data));
    console.log(campaignObj);
  });
});

function startApp() {
  return new Promise(function (resolve, reject) {
    try {
      getCampaigns(campaignListPath).then(function (data) {
        resolve(data);
      });
    } catch (error) {
      reject(error);
    }
  });
}
'use strict';

function readAFile(filepath) {
  return new Promise(function (resolve, reject) {
    fs.readFile(filepath, 'utf-8', function (err, data) {
      if (err) {
        reject("An error ocurred reading the file :" + err.message);
        return;
      } else {
        resolve(data);
      }
    });
  });
}

function writeFile(filepath, data) {
  return new Promise(function (resolve, reject) {
    fs.writeFile(filepath, data, function (err) {
      if (err) {
        reject(err);
      } else {
        resolve("File Written");
      }
    });
  });
}

function getDirContents(dir) {
  return new Promise(function (resolve, reject) {
    var files = {};
    var fileNames = [];

    try {
      fs.readdirSync(dir).forEach(function (fileName) {
        fileNames.push({
          "name": fileName
        });
        files = {
          "files": fileNames
        };
      });
      resolve(files);
    } catch (error) {
      reject(error);
    }
  });
}

function checkFileExist(path) {
  return new Promise(function (resolve, reject) {
    if (!path) {
      reject("Path is invalid " + path);
    }

    try {
      fs.access(path, fs.F_OK, function (err) {
        if (err) {
          resolve("false");
        }

        resolve("true");
      });
    } catch (error) {
      reject("error");
    }
  });
}

function checkDirExist(dir) {
  return new Promise(function (resolve, reject) {
    try {
      if (fs.existsSync(dir)) {
        resolve("true");
      } else {
        resolve("false");
      }
    } catch (error) {
      reject(error);
    }
  });
}

function createDir(dir) {
  return new Promise(function (resolve, reject) {
    try {
      fs.mkdirSync(dir);
      resolve("done");
    } catch (error) {
      reject(error);
    }
  });
}

function removeSpace(string) {
  return new Promise(function (resolve, reject) {
    try {
      var cleanString = string.replace(/\s/g, spaceChar);
      resolve(cleanString);
    } catch (error) {
      reject(error);
    }
  });
}

function addSpace(string) {
  return new Promise(function (resolve, reject) {
    try {
      var addSpace = new RegExp(spaceChar, "g");
      var cleanString = string.replace(addSpace, /\s/);
      resolve(cleanString);
    } catch (error) {
      reject(error);
    }
  });
} //write test
// var testObj  = "This is a write test";
// writeFile("../test.txt", testObj);
"use strict";

function updateAbilityBonus(myAbility) {
  var ability = jQuery(myAbility).val();
  var modifier = jQuery(myAbility).parent().children('.modifier-bubble').text();

  if (!jQuery.isNumeric(ability)) {
    ability = 1;
    jQuery(myAbility).val(ability);
  }

  modifier = Math.floor((ability - 10) / 2);
  jQuery(myAbility).parent().children('.modifier-bubble').text(modifier);
}

;
jQuery(".ability").each(function () {
  updateAbilityBonus(jQuery(this));
  jQuery(this).on("focus", function () {
    jQuery(this).select();
  });
  jQuery(this).on("keyup", function () {
    updateAbilityBonus(jQuery(this));
    updateProf(jQuery('.savingThrows #' + jQuery(this).attr('id')));
  });
});
"use strict";

function clearTop() {
  jQuery(".drag").each(function () {
    jQuery(this).removeClass("onTop");
  });
}

;
jQuery(".drag").on("mousedown", function () {
  clearTop();
  jQuery(this).addClass("onTop");
});
"use strict";

jQuery(".campAdd").on("click", function () {
  newCampaign();
}); //the delete button

jQuery(".campaignList").on("click", ".campDelete", function () {
  var toDelete = jQuery(this).attr("data-delete");
  var toDeleteName = jQuery(this).attr("data-name"); // console.log("clicked");
  //should add a are you sure popup

  var newArray = campaignObj.campaigns; // console.log(newArray)
  // console.log("delet this number " + toDelete + " and this is the object" + JSON.stringify(campaignObj.campaigns));

  newArray.splice(toDelete, 1); // console.log(JSON.stringify(campaignObj));

  writeFile(campaignListPath, JSON.stringify(campaignObj)).then(function (data) {
    if (data == "File Written") {
      removeSpace(toDeleteName).then(function (data) {
        rimraf(campaignDirPath + data, function (stuff) {
          console.log(stuff);
          getCampaigns(campaignListPath).then(function (data) {
            setCampaigns(data).then(function (campList) {
              jQuery(".campaignList").html(campList);
            });
          });
        });
      });
    }
  });
});
jQuery(".campaignList").on("click", ".saveNewCamp", function () {
  var newCampName = jQuery("input[name='newCamp']").val();
  var campObj = {
    "name": newCampName
  };
  thisCampaign = {
    "campaign": {
      "name": newCampName
    }
  };
  campaignObj.campaigns.push(campObj); // console.log(JSON.stringify(campaignObj))

  writeFile(campaignListPath, JSON.stringify(campaignObj)).then(function (data) {
    if (data == "File Written") {
      createCampaign(newCampName).then(function (data) {
        if (data == "done") {
          removeSpace(newCampName).then(function (data) {
            thisCampaignPath = campaignDirPath + data;
            writeFile(thisCampaignPath + "/camp.json", JSON.stringify(thisCampaign)).then(function () {
              jQuery(".campaigns").remove();
            });
          });
        } else {
          throw new Error(data);
        }
      });
    } else {
      throw new Error(data);
    }
  });
});

function createCampaign(campName) {
  return new Promise(function (resolve, reject) {
    var dir;
    removeSpace(campName).then(function (data) {
      dir = campaignDirPath + data;
    });

    try {
      checkDirExist(dir).then(function (data) {
        if (data == "false") {
          createDir(dir).then(function (data) {
            resolve(data);
          });
        }
      });
    } catch (error) {
      reject(error);
    }
  });
}

function newCampaign() {
  getCampaigns(campaignListPath).then(function (data) {
    setCampaigns(data).then(function (html) {
      var addOnHtml = "<tr><td><input type='text' name='newCamp' /></td><td><button type='button' class='btn btn-primary saveNewCamp'>Save</button></td></tr></table>";
      var newHtml = html.replace("</table>", addOnHtml);
      jQuery(".campaignList").html(newHtml);
    });
  });
} //Gets the list of campaigns


function getCampaigns(path) {
  return new Promise(function (resolve, reject) {
    try {
      // console.log("getCampaigns " + path);
      checkFileExist(path).then(function (data) {
        // console.log(data);
        if (data == "true") {
          readAFile(path).then(function (campaigns) {
            campaigns = JSON.parse(campaigns);
            campaignObj = campaigns;
            resolve(campaignObj);
          });
        }
      });
    } catch (error) {
      reject(error);
    }
  });
} //Puts the list of campaigns on the campaign selector.


function setCampaigns(campaigns) {
  return new Promise(function (resolve, reject) {
    try {
      var campArray = campaigns.campaigns;
      var html = "<table>";
      campArray.forEach(function (node, i) {
        console.log(JSON.stringify(node)); // console.log(campaigns.campaigns[i].name)

        html += "<tr><td>" + campaigns.campaigns[i].name + "</td><td><button type='button' data-load='" + campaigns.campaigns[i].name + "' class='btn btn-primary campLoad'>Load</button><button type='button' data-name='" + campaigns.campaigns[i].name + "' data-delete='" + i + "' class='btn btn-primary campDelete'>Delete</button></td></tr>";
      });
      html += "</table>";
      resolve(html);
    } catch (error) {
      reject(error);
    }
  });
}
"use strict";

jQuery(".close").click(function () {
  jQuery(this).parent().toggle();
});
jQuery(".menu button").click(function () {
  var openMe = jQuery(this).attr("data-open");
  jQuery("." + openMe).toggle();
  clearTop();
  jQuery("." + openMe).addClass("onTop");
});
"use strict";
"use strict";

var profB = jQuery('#profBonus').val();
somethingClever();
jQuery('#profBonus').on("keyup", function () {
  profB = jQuery('#profBonus').val();
  somethingClever();
});

function somethingClever() {
  jQuery('.icon-prof').each(function () {
    var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
    var currentClass = jQuery(this).attr('class');
    var currentPos = jQuery.inArray(currentClass, classes);
    var myProf = jQuery(this).parent().children('.profVal');
    updateProf(jQuery(myProf), currentPos);
  });
}

function updateProf(myProf, myProfSkillFlag) {
  var thisAbility = jQuery(myProf).attr('id');
  var thisAbilityBonusID = '#' + thisAbility + '-Bonus';
  var thisAbilityBonus = jQuery('.abilities ' + thisAbilityBonusID).text();
  var newVal = parseInt(thisAbilityBonus);

  if (myProfSkillFlag == 0) {
    var newVal = parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 1) {
    var newVal = parseInt(profB) + parseInt(thisAbilityBonus);
  }

  if (myProfSkillFlag == 2) {
    var newVal = parseInt(profB) * 2 + parseInt(thisAbilityBonus);
  }

  jQuery(myProf).text(newVal);
}

;
jQuery('.icon-prof').click(function () {
  var classes = ['icon-prof', 'icon-prof proficient', 'icon-prof expertise'];
  var currentClass = jQuery(this).attr('class');
  var currentPos = jQuery.inArray(currentClass, classes);
  var newPos = (currentPos + 1) % classes.length;
  var newClass = classes[newPos];
  jQuery(this).attr('class', newClass);
  var myProf = jQuery(this).parent().children('.profVal');
  updateProf(jQuery(myProf), newPos);
});
"use strict";

//themes
var buttonOptions = ['default', 'black', 'gray', 'light', 'red'];
jQuery(buttonOptions).each(function () {
  var myStyle = this;
  var myId = '#' + myStyle;
  jQuery(myId).on("click", function () {
    $("body").removeAttr('class');
    jQuery('body').addClass('theme-' + myStyle);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAxX2FwcC5qcyIsIjAyX3N0YXJ0dXAuanMiLCIwM19pby5qcyIsImFiaWxpdHlCb251cy5qcyIsImNsaWNrVG9Gcm9udC5qcyIsImxvYWRDYW1wYWlnbi5qcyIsIm1lbnVCdXR0b25zLmpzIiwibnBjLmpzIiwicHJvZmljaWVuY2llcy5qcyIsInRoZW1lcy5qcyJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJyaW1yYWYiLCJjYW1wYWlnbkxpc3RQYXRoIiwiYm9va1BhdGgiLCJjYW1wYWlnbkRpclBhdGgiLCJ0aGlzQ2FtcGFpZ25QYXRoIiwiYm9va3MiLCJucGMiLCJjYW1wYWlnbk9iaiIsInRoaXNDYW1wYWlnbiIsInNwYWNlQ2hhciIsImpRdWVyeSIsIm9uIiwicmVtb3ZlIiwicmVhZHkiLCJkcmFnZ2FibGUiLCJjb250YWlubWVudCIsInNjcm9sbCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicHJvcGVydHkiLCJ1bmRlZmluZWQiLCJkb2N1bWVudCIsInN0YXJ0QXBwIiwidGhlbiIsImRhdGEiLCJzZXRDYW1wYWlnbnMiLCJjYW1wTGlzdCIsInByZXBlbmQiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZ2V0Q2FtcGFpZ25zIiwiZXJyb3IiLCJyZWFkQUZpbGUiLCJmaWxlcGF0aCIsInJlYWRGaWxlIiwiZXJyIiwibWVzc2FnZSIsIndyaXRlRmlsZSIsImdldERpckNvbnRlbnRzIiwiZGlyIiwiZmlsZXMiLCJmaWxlTmFtZXMiLCJyZWFkZGlyU3luYyIsImZvckVhY2giLCJmaWxlTmFtZSIsInB1c2giLCJjaGVja0ZpbGVFeGlzdCIsInBhdGgiLCJhY2Nlc3MiLCJGX09LIiwiY2hlY2tEaXJFeGlzdCIsImV4aXN0c1N5bmMiLCJjcmVhdGVEaXIiLCJta2RpclN5bmMiLCJyZW1vdmVTcGFjZSIsInN0cmluZyIsImNsZWFuU3RyaW5nIiwicmVwbGFjZSIsImFkZFNwYWNlIiwiUmVnRXhwIiwidXBkYXRlQWJpbGl0eUJvbnVzIiwibXlBYmlsaXR5IiwiYWJpbGl0eSIsInZhbCIsIm1vZGlmaWVyIiwicGFyZW50IiwiY2hpbGRyZW4iLCJ0ZXh0IiwiaXNOdW1lcmljIiwiTWF0aCIsImZsb29yIiwiZWFjaCIsInNlbGVjdCIsInVwZGF0ZVByb2YiLCJhdHRyIiwiY2xlYXJUb3AiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwibmV3Q2FtcGFpZ24iLCJ0b0RlbGV0ZSIsInRvRGVsZXRlTmFtZSIsIm5ld0FycmF5IiwiY2FtcGFpZ25zIiwic3BsaWNlIiwic3R1ZmYiLCJodG1sIiwibmV3Q2FtcE5hbWUiLCJjYW1wT2JqIiwiY3JlYXRlQ2FtcGFpZ24iLCJFcnJvciIsImNhbXBOYW1lIiwiYWRkT25IdG1sIiwibmV3SHRtbCIsInBhcnNlIiwiY2FtcEFycmF5Iiwibm9kZSIsImkiLCJuYW1lIiwiY2xpY2siLCJ0b2dnbGUiLCJvcGVuTWUiLCJwcm9mQiIsInNvbWV0aGluZ0NsZXZlciIsImNsYXNzZXMiLCJjdXJyZW50Q2xhc3MiLCJjdXJyZW50UG9zIiwiaW5BcnJheSIsIm15UHJvZiIsIm15UHJvZlNraWxsRmxhZyIsInRoaXNBYmlsaXR5IiwidGhpc0FiaWxpdHlCb251c0lEIiwidGhpc0FiaWxpdHlCb251cyIsIm5ld1ZhbCIsInBhcnNlSW50IiwibmV3UG9zIiwibGVuZ3RoIiwibmV3Q2xhc3MiLCJidXR0b25PcHRpb25zIiwibXlTdHlsZSIsIm15SWQiLCIkIiwicmVtb3ZlQXR0ciJdLCJtYXBwaW5ncyI6IkFBQUEsYSxDQUNFOztBQUNBLElBQUlBLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUQsQ0FBaEI7O0FBQ0EsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFwQixDLENBRUY7OztBQUNBLElBQUlFLGdCQUFnQixHQUFHLGlCQUF2QjtBQUNBLElBQUlDLFFBQVEsR0FBRyxTQUFmO0FBQ0EsSUFBSUMsZUFBZSxHQUFHLGNBQXRCO0FBQ0EsSUFBSUMsZ0JBQUosQyxDQUNBO0FBRUE7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHLEVBQVo7QUFDQSxJQUFJQyxHQUFHLEdBQUcsRUFBVjtBQUNBLElBQUlDLFdBQVcsR0FBRyxFQUFsQjtBQUNBLElBQUlDLFlBQVksR0FBRyxFQUFuQixDLENBQ0E7QUFFQTs7QUFDQSxJQUFJQyxTQUFTLEdBQUcsSUFBaEIsQyxDQUNBO0FBRUE7O0FBQ0FDLE1BQU0sQ0FBQyxrQkFBRCxDQUFOLENBQTJCQyxFQUEzQixDQUE4QixPQUE5QixFQUF1QyxZQUFVO0FBQy9DRCxFQUFBQSxNQUFNLENBQUMsWUFBRCxDQUFOLENBQXFCRSxNQUFyQjtBQUNELENBRkQ7QUFJQUYsTUFBTSxDQUFDLFVBQUQsQ0FBTixDQUFtQkcsS0FBbkIsQ0FBeUIsWUFBWTtBQUNuQ0gsRUFBQUEsTUFBTSxDQUFDLE9BQUQsQ0FBTixDQUFnQkksU0FBaEIsQ0FBMEI7QUFDdEJDLElBQUFBLFdBQVcsRUFBRSxXQURTO0FBRXRCQyxJQUFBQSxNQUFNLEVBQUU7QUFGYyxHQUExQjtBQU1ELENBUEQ7O0FBU0FDLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsY0FBakIsR0FBa0MsVUFBU0MsUUFBVCxFQUFtQjtBQUNyRCxTQUFPLEtBQUtBLFFBQUwsTUFBbUJDLFNBQTFCO0FBQ0MsQ0FGRCxDLENBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTs7O0FDOURBWCxNQUFNLENBQUNZLFFBQUQsQ0FBTixDQUFpQlQsS0FBakIsQ0FBdUIsWUFBVTtBQUUvQlUsRUFBQUEsUUFBUSxHQUFHQyxJQUFYLENBQWdCLFVBQUNDLElBQUQsRUFBUTtBQUN0QkMsSUFBQUEsWUFBWSxDQUFDRCxJQUFELENBQVosQ0FBbUJELElBQW5CLENBQXdCLFVBQUNHLFFBQUQsRUFBWTtBQUNsQ2pCLE1BQUFBLE1BQU0sQ0FBQyxlQUFELENBQU4sQ0FBd0JrQixPQUF4QixDQUFnQ0QsUUFBaEM7QUFDRCxLQUZEO0FBR0FFLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUFJLENBQUNDLFNBQUwsQ0FBZVAsSUFBZixDQUFaO0FBQ0FJLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZdkIsV0FBWjtBQUNELEdBTkQ7QUFRQyxDQVZIOztBQWFFLFNBQVNnQixRQUFULEdBQW1CO0FBQ2pCLFNBQU8sSUFBSVUsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFtQjtBQUNwQyxRQUFHO0FBQ0RDLE1BQUFBLFlBQVksQ0FBQ25DLGdCQUFELENBQVosQ0FBK0J1QixJQUEvQixDQUFvQyxVQUFDQyxJQUFELEVBQVE7QUFDMUNTLFFBQUFBLE9BQU8sQ0FBQ1QsSUFBRCxDQUFQO0FBQ0QsT0FGRDtBQUlELEtBTEQsQ0FLRSxPQUFPWSxLQUFQLEVBQWE7QUFDYkYsTUFBQUEsTUFBTSxDQUFDRSxLQUFELENBQU47QUFDRDtBQUNGLEdBVE0sQ0FBUDtBQVdEO0FDekJIOztBQUVBLFNBQVNDLFNBQVQsQ0FBbUJDLFFBQW5CLEVBQTRCO0FBQ3hCLFNBQU8sSUFBSU4sT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUNwQ3JDLElBQUFBLEVBQUUsQ0FBQzBDLFFBQUgsQ0FBWUQsUUFBWixFQUFzQixPQUF0QixFQUErQixVQUFTRSxHQUFULEVBQWNoQixJQUFkLEVBQW9CO0FBQy9DLFVBQUlnQixHQUFKLEVBQVM7QUFDTE4sUUFBQUEsTUFBTSxDQUFDLHdDQUF3Q00sR0FBRyxDQUFDQyxPQUE3QyxDQUFOO0FBQ0E7QUFDSCxPQUhELE1BR087QUFDSFIsUUFBQUEsT0FBTyxDQUFDVCxJQUFELENBQVA7QUFDSDtBQUNKLEtBUEQ7QUFRSCxHQVRNLENBQVA7QUFVSDs7QUFFRCxTQUFTa0IsU0FBVCxDQUFtQkosUUFBbkIsRUFBNkJkLElBQTdCLEVBQW1DO0FBQy9CLFNBQU8sSUFBSVEsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0Q3JDLElBQUFBLEVBQUUsQ0FBQzZDLFNBQUgsQ0FBYUosUUFBYixFQUF1QmQsSUFBdkIsRUFBNkIsVUFBQ2dCLEdBQUQsRUFBUztBQUNsQyxVQUFJQSxHQUFKLEVBQVM7QUFDTE4sUUFBQUEsTUFBTSxDQUFDTSxHQUFELENBQU47QUFDSCxPQUZELE1BRUs7QUFDRFAsUUFBQUEsT0FBTyxDQUFDLGNBQUQsQ0FBUDtBQUNIO0FBQ0osS0FORDtBQU9ELEdBUk0sQ0FBUDtBQVNIOztBQUVELFNBQVNVLGNBQVQsQ0FBd0JDLEdBQXhCLEVBQTRCO0FBQ3hCLFNBQU8sSUFBSVosT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFtQjtBQUNsQyxRQUFJVyxLQUFLLEdBQUcsRUFBWjtBQUNBLFFBQUlDLFNBQVMsR0FBRyxFQUFoQjs7QUFDQSxRQUFHO0FBQ0NqRCxNQUFBQSxFQUFFLENBQUNrRCxXQUFILENBQWVILEdBQWYsRUFBb0JJLE9BQXBCLENBQTRCLFVBQUNDLFFBQUQsRUFBWTtBQUNwQ0gsUUFBQUEsU0FBUyxDQUFDSSxJQUFWLENBQWU7QUFDWCxrQkFBT0Q7QUFESSxTQUFmO0FBR0FKLFFBQUFBLEtBQUssR0FBRztBQUFDLG1CQUFRQztBQUFULFNBQVI7QUFFSCxPQU5EO0FBT0FiLE1BQUFBLE9BQU8sQ0FBQ1ksS0FBRCxDQUFQO0FBQ0gsS0FURCxDQVNDLE9BQU1ULEtBQU4sRUFBWTtBQUNURixNQUFBQSxNQUFNLENBQUNFLEtBQUQsQ0FBTjtBQUNIO0FBRUosR0FoQk0sQ0FBUDtBQWlCSDs7QUFFRCxTQUFTZSxjQUFULENBQXdCQyxJQUF4QixFQUE2QjtBQUN6QixTQUFPLElBQUlwQixPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQW1CO0FBQ25DLFFBQUcsQ0FBQ2tCLElBQUosRUFBUztBQUNIbEIsTUFBQUEsTUFBTSxDQUFDLHFCQUFtQmtCLElBQXBCLENBQU47QUFDSjs7QUFDRCxRQUFHO0FBQ0N2RCxNQUFBQSxFQUFFLENBQUN3RCxNQUFILENBQVVELElBQVYsRUFBZ0J2RCxFQUFFLENBQUN5RCxJQUFuQixFQUF5QixVQUFDZCxHQUFELEVBQU87QUFDNUIsWUFBR0EsR0FBSCxFQUFPO0FBQ0hQLFVBQUFBLE9BQU8sQ0FBQyxPQUFELENBQVA7QUFDSDs7QUFDREEsUUFBQUEsT0FBTyxDQUFDLE1BQUQsQ0FBUDtBQUNILE9BTEQ7QUFNSCxLQVBELENBT0MsT0FBT0csS0FBUCxFQUFhO0FBQ1ZGLE1BQUFBLE1BQU0sQ0FBQyxPQUFELENBQU47QUFDSDtBQUNKLEdBZE0sQ0FBUDtBQWVIOztBQUVELFNBQVNxQixhQUFULENBQXVCWCxHQUF2QixFQUEyQjtBQUN2QixTQUFPLElBQUlaLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBbUI7QUFDbEMsUUFBRztBQUNDLFVBQUdyQyxFQUFFLENBQUMyRCxVQUFILENBQWNaLEdBQWQsQ0FBSCxFQUFzQjtBQUNsQlgsUUFBQUEsT0FBTyxDQUFDLE1BQUQsQ0FBUDtBQUNILE9BRkQsTUFFTTtBQUNGQSxRQUFBQSxPQUFPLENBQUMsT0FBRCxDQUFQO0FBQ0g7QUFFSixLQVBELENBT0MsT0FBT0csS0FBUCxFQUFhO0FBQ1ZGLE1BQUFBLE1BQU0sQ0FBQ0UsS0FBRCxDQUFOO0FBQ0g7QUFDSixHQVhNLENBQVA7QUFZSDs7QUFFRCxTQUFTcUIsU0FBVCxDQUFtQmIsR0FBbkIsRUFBdUI7QUFDbkIsU0FBTyxJQUFJWixPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQW1CO0FBQ2xDLFFBQUc7QUFDQ3JDLE1BQUFBLEVBQUUsQ0FBQzZELFNBQUgsQ0FBYWQsR0FBYjtBQUNBWCxNQUFBQSxPQUFPLENBQUMsTUFBRCxDQUFQO0FBQ0gsS0FIRCxDQUdDLE9BQU9HLEtBQVAsRUFBYTtBQUNWRixNQUFBQSxNQUFNLENBQUNFLEtBQUQsQ0FBTjtBQUNIO0FBQ0osR0FQTSxDQUFQO0FBUUg7O0FBRUQsU0FBU3VCLFdBQVQsQ0FBcUJDLE1BQXJCLEVBQTRCO0FBQ3hCLFNBQU8sSUFBSTVCLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBbUI7QUFDbEMsUUFBRztBQUNDLFVBQUkyQixXQUFXLEdBQUdELE1BQU0sQ0FBQ0UsT0FBUCxDQUFlLEtBQWYsRUFBcUJ0RCxTQUFyQixDQUFsQjtBQUNBeUIsTUFBQUEsT0FBTyxDQUFDNEIsV0FBRCxDQUFQO0FBQ0gsS0FIRCxDQUdDLE9BQU96QixLQUFQLEVBQWE7QUFDVkYsTUFBQUEsTUFBTSxDQUFDRSxLQUFELENBQU47QUFDSDtBQUNKLEdBUE0sQ0FBUDtBQVVIOztBQUVELFNBQVMyQixRQUFULENBQWtCSCxNQUFsQixFQUF5QjtBQUVyQixTQUFPLElBQUk1QixPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQW1CO0FBQ2xDLFFBQUc7QUFDQyxVQUFJNkIsUUFBUSxHQUFHLElBQUlDLE1BQUosQ0FBV3hELFNBQVgsRUFBcUIsR0FBckIsQ0FBZjtBQUNBLFVBQUlxRCxXQUFXLEdBQUdELE1BQU0sQ0FBQ0UsT0FBUCxDQUFlQyxRQUFmLEVBQXlCLElBQXpCLENBQWxCO0FBQ0E5QixNQUFBQSxPQUFPLENBQUM0QixXQUFELENBQVA7QUFDSCxLQUpELENBSUMsT0FBT3pCLEtBQVAsRUFBYTtBQUNWRixNQUFBQSxNQUFNLENBQUNFLEtBQUQsQ0FBTjtBQUNIO0FBQ0osR0FSTSxDQUFQO0FBU0gsQyxDQUNEO0FBQ0E7QUFDQTs7O0FDckhBLFNBQVM2QixrQkFBVCxDQUE0QkMsU0FBNUIsRUFBdUM7QUFDbkMsTUFBSUMsT0FBTyxHQUFHMUQsTUFBTSxDQUFDeUQsU0FBRCxDQUFOLENBQWtCRSxHQUFsQixFQUFkO0FBRUEsTUFBSUMsUUFBUSxHQUFHNUQsTUFBTSxDQUFDeUQsU0FBRCxDQUFOLENBQWtCSSxNQUFsQixHQUEyQkMsUUFBM0IsQ0FBb0Msa0JBQXBDLEVBQXdEQyxJQUF4RCxFQUFmOztBQUNBLE1BQUksQ0FBQy9ELE1BQU0sQ0FBQ2dFLFNBQVAsQ0FBaUJOLE9BQWpCLENBQUwsRUFBZ0M7QUFDNUJBLElBQUFBLE9BQU8sR0FBRyxDQUFWO0FBQ0ExRCxJQUFBQSxNQUFNLENBQUN5RCxTQUFELENBQU4sQ0FBa0JFLEdBQWxCLENBQXNCRCxPQUF0QjtBQUNIOztBQUVERSxFQUFBQSxRQUFRLEdBQUdLLElBQUksQ0FBQ0MsS0FBTCxDQUFXLENBQUNSLE9BQU8sR0FBRyxFQUFYLElBQWlCLENBQTVCLENBQVg7QUFDQTFELEVBQUFBLE1BQU0sQ0FBQ3lELFNBQUQsQ0FBTixDQUFrQkksTUFBbEIsR0FBMkJDLFFBQTNCLENBQW9DLGtCQUFwQyxFQUF3REMsSUFBeEQsQ0FBNkRILFFBQTdEO0FBQ0g7O0FBQUE7QUFHRDVELE1BQU0sQ0FBQyxVQUFELENBQU4sQ0FBbUJtRSxJQUFuQixDQUF3QixZQUFXO0FBQy9CWCxFQUFBQSxrQkFBa0IsQ0FBQ3hELE1BQU0sQ0FBQyxJQUFELENBQVAsQ0FBbEI7QUFFQUEsRUFBQUEsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhQyxFQUFiLENBQWdCLE9BQWhCLEVBQXlCLFlBQVc7QUFDaENELElBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYW9FLE1BQWI7QUFDSCxHQUZEO0FBR0FwRSxFQUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFDLEVBQWIsQ0FBZ0IsT0FBaEIsRUFBeUIsWUFBVztBQUNoQ3VELElBQUFBLGtCQUFrQixDQUFDeEQsTUFBTSxDQUFDLElBQUQsQ0FBUCxDQUFsQjtBQUNBcUUsSUFBQUEsVUFBVSxDQUFDckUsTUFBTSxDQUFDLG9CQUFrQkEsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhc0UsSUFBYixDQUFrQixJQUFsQixDQUFuQixDQUFQLENBQVY7QUFDSCxHQUhEO0FBSUgsQ0FWRDs7O0FDZkEsU0FBU0MsUUFBVCxHQUFvQjtBQUNoQnZFLEVBQUFBLE1BQU0sQ0FBQyxPQUFELENBQU4sQ0FBZ0JtRSxJQUFoQixDQUFxQixZQUFXO0FBQzVCbkUsSUFBQUEsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhd0UsV0FBYixDQUF5QixPQUF6QjtBQUNILEdBRkQ7QUFHSDs7QUFBQTtBQUVEeEUsTUFBTSxDQUFDLE9BQUQsQ0FBTixDQUFnQkMsRUFBaEIsQ0FBbUIsV0FBbkIsRUFBZ0MsWUFBVztBQUN2Q3NFLEVBQUFBLFFBQVE7QUFDUnZFLEVBQUFBLE1BQU0sQ0FBQyxJQUFELENBQU4sQ0FBYXlFLFFBQWIsQ0FBc0IsT0FBdEI7QUFDSCxDQUhEOzs7QUNOQXpFLE1BQU0sQ0FBQyxVQUFELENBQU4sQ0FBbUJDLEVBQW5CLENBQXNCLE9BQXRCLEVBQStCLFlBQU07QUFDakN5RSxFQUFBQSxXQUFXO0FBQ2QsQ0FGRCxFLENBSUE7O0FBQ0ExRSxNQUFNLENBQUMsZUFBRCxDQUFOLENBQXdCQyxFQUF4QixDQUEyQixPQUEzQixFQUFvQyxhQUFwQyxFQUFtRCxZQUFZO0FBQzNELE1BQUkwRSxRQUFRLEdBQUczRSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFzRSxJQUFiLENBQWtCLGFBQWxCLENBQWY7QUFDQSxNQUFJTSxZQUFZLEdBQUc1RSxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFzRSxJQUFiLENBQWtCLFdBQWxCLENBQW5CLENBRjJELENBRzNEO0FBQ0E7O0FBQ0EsTUFBSU8sUUFBUSxHQUFHaEYsV0FBVyxDQUFDaUYsU0FBM0IsQ0FMMkQsQ0FNM0Q7QUFDQTs7QUFDQUQsRUFBQUEsUUFBUSxDQUFDRSxNQUFULENBQWdCSixRQUFoQixFQUEwQixDQUExQixFQVIyRCxDQVMzRDs7QUFDQTFDLEVBQUFBLFNBQVMsQ0FBQzFDLGdCQUFELEVBQW1COEIsSUFBSSxDQUFDQyxTQUFMLENBQWV6QixXQUFmLENBQW5CLENBQVQsQ0FBeURpQixJQUF6RCxDQUE4RCxVQUFDQyxJQUFELEVBQVU7QUFDcEUsUUFBSUEsSUFBSSxJQUFJLGNBQVosRUFBNEI7QUFDeEJtQyxNQUFBQSxXQUFXLENBQUMwQixZQUFELENBQVgsQ0FBMEI5RCxJQUExQixDQUErQixVQUFDQyxJQUFELEVBQVU7QUFDckN6QixRQUFBQSxNQUFNLENBQUNHLGVBQWUsR0FBR3NCLElBQW5CLEVBQXlCLFVBQUNpRSxLQUFELEVBQVc7QUFDdEM3RCxVQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWTRELEtBQVo7QUFDQXRELFVBQUFBLFlBQVksQ0FBQ25DLGdCQUFELENBQVosQ0FBK0J1QixJQUEvQixDQUFvQyxVQUFDQyxJQUFELEVBQVU7QUFDMUNDLFlBQUFBLFlBQVksQ0FBQ0QsSUFBRCxDQUFaLENBQW1CRCxJQUFuQixDQUF3QixVQUFDRyxRQUFELEVBQWM7QUFDbENqQixjQUFBQSxNQUFNLENBQUMsZUFBRCxDQUFOLENBQXdCaUYsSUFBeEIsQ0FBNkJoRSxRQUE3QjtBQUNILGFBRkQ7QUFHSCxXQUpEO0FBS0gsU0FQSyxDQUFOO0FBUUgsT0FURDtBQVVIO0FBQ0osR0FiRDtBQWNILENBeEJEO0FBMEJBakIsTUFBTSxDQUFDLGVBQUQsQ0FBTixDQUF3QkMsRUFBeEIsQ0FBMkIsT0FBM0IsRUFBb0MsY0FBcEMsRUFBb0QsWUFBWTtBQUM1RCxNQUFJaUYsV0FBVyxHQUFHbEYsTUFBTSxDQUFDLHVCQUFELENBQU4sQ0FBZ0MyRCxHQUFoQyxFQUFsQjtBQUNBLE1BQUl3QixPQUFPLEdBQUc7QUFDVixZQUFRRDtBQURFLEdBQWQ7QUFHQXBGLEVBQUFBLFlBQVksR0FBRztBQUNYLGdCQUFZO0FBQ1IsY0FBUW9GO0FBREE7QUFERCxHQUFmO0FBS0FyRixFQUFBQSxXQUFXLENBQUNpRixTQUFaLENBQXNCckMsSUFBdEIsQ0FBMkIwQyxPQUEzQixFQVY0RCxDQVV2Qjs7QUFFckNsRCxFQUFBQSxTQUFTLENBQUMxQyxnQkFBRCxFQUFtQjhCLElBQUksQ0FBQ0MsU0FBTCxDQUFlekIsV0FBZixDQUFuQixDQUFULENBQXlEaUIsSUFBekQsQ0FBOEQsVUFBVUMsSUFBVixFQUFnQjtBQUMxRSxRQUFJQSxJQUFJLElBQUksY0FBWixFQUE0QjtBQUN4QnFFLE1BQUFBLGNBQWMsQ0FBQ0YsV0FBRCxDQUFkLENBQTRCcEUsSUFBNUIsQ0FBaUMsVUFBVUMsSUFBVixFQUFnQjtBQUM3QyxZQUFJQSxJQUFJLElBQUksTUFBWixFQUFvQjtBQUNoQm1DLFVBQUFBLFdBQVcsQ0FBQ2dDLFdBQUQsQ0FBWCxDQUF5QnBFLElBQXpCLENBQThCLFVBQUNDLElBQUQsRUFBVTtBQUNwQ3JCLFlBQUFBLGdCQUFnQixHQUFHRCxlQUFlLEdBQUdzQixJQUFyQztBQUNBa0IsWUFBQUEsU0FBUyxDQUFDdkMsZ0JBQWdCLEdBQUcsWUFBcEIsRUFBa0MyQixJQUFJLENBQUNDLFNBQUwsQ0FBZXhCLFlBQWYsQ0FBbEMsQ0FBVCxDQUF5RWdCLElBQXpFLENBQThFLFlBQVk7QUFDdEZkLGNBQUFBLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJFLE1BQXJCO0FBQ0gsYUFGRDtBQUdILFdBTEQ7QUFNSCxTQVBELE1BT087QUFDSCxnQkFBTSxJQUFJbUYsS0FBSixDQUFVdEUsSUFBVixDQUFOO0FBQ0g7QUFFSixPQVpEO0FBYUgsS0FkRCxNQWNPO0FBQ0gsWUFBTSxJQUFJc0UsS0FBSixDQUFVdEUsSUFBVixDQUFOO0FBQ0g7QUFDSixHQWxCRDtBQW1CSCxDQS9CRDs7QUFrQ0EsU0FBU3FFLGNBQVQsQ0FBd0JFLFFBQXhCLEVBQWtDO0FBQzlCLFNBQU8sSUFBSS9ELE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDcEMsUUFBSVUsR0FBSjtBQUNBZSxJQUFBQSxXQUFXLENBQUNvQyxRQUFELENBQVgsQ0FBc0J4RSxJQUF0QixDQUEyQixVQUFDQyxJQUFELEVBQVU7QUFDakNvQixNQUFBQSxHQUFHLEdBQUcxQyxlQUFlLEdBQUdzQixJQUF4QjtBQUNILEtBRkQ7O0FBR0EsUUFBSTtBQUNBK0IsTUFBQUEsYUFBYSxDQUFDWCxHQUFELENBQWIsQ0FBbUJyQixJQUFuQixDQUF3QixVQUFDQyxJQUFELEVBQVU7QUFDOUIsWUFBSUEsSUFBSSxJQUFJLE9BQVosRUFBcUI7QUFDakJpQyxVQUFBQSxTQUFTLENBQUNiLEdBQUQsQ0FBVCxDQUFlckIsSUFBZixDQUFvQixVQUFDQyxJQUFELEVBQVU7QUFDMUJTLFlBQUFBLE9BQU8sQ0FBQ1QsSUFBRCxDQUFQO0FBQ0gsV0FGRDtBQUdIO0FBQ0osT0FORDtBQU9ILEtBUkQsQ0FRRSxPQUFPWSxLQUFQLEVBQWM7QUFDWkYsTUFBQUEsTUFBTSxDQUFDRSxLQUFELENBQU47QUFDSDtBQUNKLEdBaEJNLENBQVA7QUFpQkg7O0FBRUQsU0FBUytDLFdBQVQsR0FBdUI7QUFDbkJoRCxFQUFBQSxZQUFZLENBQUNuQyxnQkFBRCxDQUFaLENBQStCdUIsSUFBL0IsQ0FBb0MsVUFBQ0MsSUFBRCxFQUFVO0FBQzFDQyxJQUFBQSxZQUFZLENBQUNELElBQUQsQ0FBWixDQUFtQkQsSUFBbkIsQ0FBd0IsVUFBQ21FLElBQUQsRUFBVTtBQUM5QixVQUFJTSxTQUFTLEdBQUcsZ0pBQWhCO0FBQ0EsVUFBSUMsT0FBTyxHQUFHUCxJQUFJLENBQUM1QixPQUFMLENBQWEsVUFBYixFQUF5QmtDLFNBQXpCLENBQWQ7QUFDQXZGLE1BQUFBLE1BQU0sQ0FBQyxlQUFELENBQU4sQ0FBd0JpRixJQUF4QixDQUE2Qk8sT0FBN0I7QUFDSCxLQUpEO0FBS0gsR0FORDtBQVFILEMsQ0FFRDs7O0FBQ0EsU0FBUzlELFlBQVQsQ0FBc0JpQixJQUF0QixFQUE0QjtBQUN4QixTQUFPLElBQUlwQixPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3BDLFFBQUk7QUFDQTtBQUNBaUIsTUFBQUEsY0FBYyxDQUFDQyxJQUFELENBQWQsQ0FBcUI3QixJQUFyQixDQUEwQixVQUFDQyxJQUFELEVBQVU7QUFDaEM7QUFDQSxZQUFJQSxJQUFJLElBQUksTUFBWixFQUFvQjtBQUNoQmEsVUFBQUEsU0FBUyxDQUFDZSxJQUFELENBQVQsQ0FBZ0I3QixJQUFoQixDQUFxQixVQUFDZ0UsU0FBRCxFQUFlO0FBQ2hDQSxZQUFBQSxTQUFTLEdBQUd6RCxJQUFJLENBQUNvRSxLQUFMLENBQVdYLFNBQVgsQ0FBWjtBQUNBakYsWUFBQUEsV0FBVyxHQUFHaUYsU0FBZDtBQUNBdEQsWUFBQUEsT0FBTyxDQUFDM0IsV0FBRCxDQUFQO0FBQ0gsV0FKRDtBQUtIO0FBQ0osT0FURDtBQVVILEtBWkQsQ0FZRSxPQUFPOEIsS0FBUCxFQUFjO0FBQ1pGLE1BQUFBLE1BQU0sQ0FBQ0UsS0FBRCxDQUFOO0FBQ0g7QUFDSixHQWhCTSxDQUFQO0FBaUJILEMsQ0FFRDs7O0FBQ0EsU0FBU1gsWUFBVCxDQUFzQjhELFNBQXRCLEVBQWlDO0FBQzdCLFNBQU8sSUFBSXZELE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDcEMsUUFBSTtBQUNBLFVBQUlpRSxTQUFTLEdBQUdaLFNBQVMsQ0FBQ0EsU0FBMUI7QUFDQSxVQUFJRyxJQUFJLEdBQUcsU0FBWDtBQUNBUyxNQUFBQSxTQUFTLENBQUNuRCxPQUFWLENBQWtCLFVBQVVvRCxJQUFWLEVBQWdCQyxDQUFoQixFQUFtQjtBQUNqQ3pFLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUFJLENBQUNDLFNBQUwsQ0FBZXFFLElBQWYsQ0FBWixFQURpQyxDQUVqQzs7QUFDQVYsUUFBQUEsSUFBSSxJQUFJLGFBQWFILFNBQVMsQ0FBQ0EsU0FBVixDQUFvQmMsQ0FBcEIsRUFBdUJDLElBQXBDLEdBQTJDLDRDQUEzQyxHQUEwRmYsU0FBUyxDQUFDQSxTQUFWLENBQW9CYyxDQUFwQixFQUF1QkMsSUFBakgsR0FBd0gsbUZBQXhILEdBQThNZixTQUFTLENBQUNBLFNBQVYsQ0FBb0JjLENBQXBCLEVBQXVCQyxJQUFyTyxHQUE0TyxpQkFBNU8sR0FBZ1FELENBQWhRLEdBQW9RLGdFQUE1UTtBQUNILE9BSkQ7QUFLQVgsTUFBQUEsSUFBSSxJQUFJLFVBQVI7QUFFQXpELE1BQUFBLE9BQU8sQ0FBQ3lELElBQUQsQ0FBUDtBQUNILEtBWEQsQ0FXRSxPQUFPdEQsS0FBUCxFQUFjO0FBQ1pGLE1BQUFBLE1BQU0sQ0FBQ0UsS0FBRCxDQUFOO0FBQ0g7QUFDSixHQWZNLENBQVA7QUFnQkg7OztBQ3ZJRDNCLE1BQU0sQ0FBQyxRQUFELENBQU4sQ0FBaUI4RixLQUFqQixDQUF1QixZQUFZO0FBQy9COUYsRUFBQUEsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhNkQsTUFBYixHQUFzQmtDLE1BQXRCO0FBQ0gsQ0FGRDtBQUdBL0YsTUFBTSxDQUFDLGNBQUQsQ0FBTixDQUF1QjhGLEtBQXZCLENBQTZCLFlBQVk7QUFDckMsTUFBSUUsTUFBTSxHQUFHaEcsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhc0UsSUFBYixDQUFrQixXQUFsQixDQUFiO0FBQ0F0RSxFQUFBQSxNQUFNLENBQUMsTUFBTWdHLE1BQVAsQ0FBTixDQUFxQkQsTUFBckI7QUFDQXhCLEVBQUFBLFFBQVE7QUFDUnZFLEVBQUFBLE1BQU0sQ0FBQyxNQUFNZ0csTUFBUCxDQUFOLENBQXFCdkIsUUFBckIsQ0FBOEIsT0FBOUI7QUFDSCxDQUxEO0FDSEE7OztBQ0FBLElBQUl3QixLQUFLLEdBQUdqRyxNQUFNLENBQUMsWUFBRCxDQUFOLENBQXFCMkQsR0FBckIsRUFBWjtBQUNBdUMsZUFBZTtBQUVmbEcsTUFBTSxDQUFDLFlBQUQsQ0FBTixDQUFxQkMsRUFBckIsQ0FBd0IsT0FBeEIsRUFBaUMsWUFBVztBQUN4Q2dHLEVBQUFBLEtBQUssR0FBR2pHLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUIyRCxHQUFyQixFQUFSO0FBQ0F1QyxFQUFBQSxlQUFlO0FBQ2xCLENBSEQ7O0FBS0EsU0FBU0EsZUFBVCxHQUEyQjtBQUN2QmxHLEVBQUFBLE1BQU0sQ0FBQyxZQUFELENBQU4sQ0FBcUJtRSxJQUFyQixDQUEwQixZQUFXO0FBQ2pDLFFBQUlnQyxPQUFPLEdBQUcsQ0FBQyxXQUFELEVBQWMsc0JBQWQsRUFBc0MscUJBQXRDLENBQWQ7QUFDQSxRQUFJQyxZQUFZLEdBQUdwRyxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFzRSxJQUFiLENBQWtCLE9BQWxCLENBQW5CO0FBQ0EsUUFBSStCLFVBQVUsR0FBR3JHLE1BQU0sQ0FBQ3NHLE9BQVAsQ0FBZUYsWUFBZixFQUE2QkQsT0FBN0IsQ0FBakI7QUFDQSxRQUFJSSxNQUFNLEdBQUd2RyxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWE2RCxNQUFiLEdBQXNCQyxRQUF0QixDQUErQixVQUEvQixDQUFiO0FBQ0FPLElBQUFBLFVBQVUsQ0FBQ3JFLE1BQU0sQ0FBQ3VHLE1BQUQsQ0FBUCxFQUFpQkYsVUFBakIsQ0FBVjtBQUNILEdBTkQ7QUFPSDs7QUFFRCxTQUFTaEMsVUFBVCxDQUFvQmtDLE1BQXBCLEVBQTRCQyxlQUE1QixFQUE2QztBQUN6QyxNQUFJQyxXQUFXLEdBQUd6RyxNQUFNLENBQUN1RyxNQUFELENBQU4sQ0FBZWpDLElBQWYsQ0FBb0IsSUFBcEIsQ0FBbEI7QUFDQSxNQUFJb0Msa0JBQWtCLEdBQUcsTUFBTUQsV0FBTixHQUFvQixRQUE3QztBQUNBLE1BQUlFLGdCQUFnQixHQUFHM0csTUFBTSxDQUFDLGdCQUFnQjBHLGtCQUFqQixDQUFOLENBQTJDM0MsSUFBM0MsRUFBdkI7QUFDQSxNQUFJNkMsTUFBTSxHQUFHQyxRQUFRLENBQUNGLGdCQUFELENBQXJCOztBQUNBLE1BQUlILGVBQWUsSUFBSSxDQUF2QixFQUEwQjtBQUN0QixRQUFJSSxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0YsZ0JBQUQsQ0FBckI7QUFDSDs7QUFDRCxNQUFJSCxlQUFlLElBQUksQ0FBdkIsRUFBMEI7QUFDdEIsUUFBSUksTUFBTSxHQUFHQyxRQUFRLENBQUNaLEtBQUQsQ0FBUixHQUFrQlksUUFBUSxDQUFDRixnQkFBRCxDQUF2QztBQUNIOztBQUNELE1BQUlILGVBQWUsSUFBSSxDQUF2QixFQUEwQjtBQUN0QixRQUFJSSxNQUFNLEdBQUdDLFFBQVEsQ0FBQ1osS0FBRCxDQUFSLEdBQWtCLENBQWxCLEdBQXVCWSxRQUFRLENBQUNGLGdCQUFELENBQTVDO0FBQ0g7O0FBQ0QzRyxFQUFBQSxNQUFNLENBQUN1RyxNQUFELENBQU4sQ0FBZXhDLElBQWYsQ0FBb0I2QyxNQUFwQjtBQUNIOztBQUFBO0FBR0Q1RyxNQUFNLENBQUMsWUFBRCxDQUFOLENBQXFCOEYsS0FBckIsQ0FBMkIsWUFBVztBQUNsQyxNQUFJSyxPQUFPLEdBQUcsQ0FBQyxXQUFELEVBQWMsc0JBQWQsRUFBc0MscUJBQXRDLENBQWQ7QUFDQSxNQUFJQyxZQUFZLEdBQUdwRyxNQUFNLENBQUMsSUFBRCxDQUFOLENBQWFzRSxJQUFiLENBQWtCLE9BQWxCLENBQW5CO0FBQ0EsTUFBSStCLFVBQVUsR0FBR3JHLE1BQU0sQ0FBQ3NHLE9BQVAsQ0FBZUYsWUFBZixFQUE2QkQsT0FBN0IsQ0FBakI7QUFDQSxNQUFJVyxNQUFNLEdBQUksQ0FBQ1QsVUFBVSxHQUFHLENBQWQsSUFBbUJGLE9BQU8sQ0FBQ1ksTUFBekM7QUFDQSxNQUFJQyxRQUFRLEdBQUdiLE9BQU8sQ0FBQ1csTUFBRCxDQUF0QjtBQUNBOUcsRUFBQUEsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhc0UsSUFBYixDQUFrQixPQUFsQixFQUEyQjBDLFFBQTNCO0FBQ0EsTUFBSVQsTUFBTSxHQUFHdkcsTUFBTSxDQUFDLElBQUQsQ0FBTixDQUFhNkQsTUFBYixHQUFzQkMsUUFBdEIsQ0FBK0IsVUFBL0IsQ0FBYjtBQUNBTyxFQUFBQSxVQUFVLENBQUNyRSxNQUFNLENBQUN1RyxNQUFELENBQVAsRUFBaUJPLE1BQWpCLENBQVY7QUFDSCxDQVREOzs7QUNwQ0E7QUFDQSxJQUFJRyxhQUFhLEdBQUcsQ0FBQyxTQUFELEVBQVksT0FBWixFQUFxQixNQUFyQixFQUE2QixPQUE3QixFQUFzQyxLQUF0QyxDQUFwQjtBQUNBakgsTUFBTSxDQUFDaUgsYUFBRCxDQUFOLENBQXNCOUMsSUFBdEIsQ0FBMkIsWUFBVztBQUNsQyxNQUFJK0MsT0FBTyxHQUFHLElBQWQ7QUFDQSxNQUFJQyxJQUFJLEdBQUcsTUFBTUQsT0FBakI7QUFDQWxILEVBQUFBLE1BQU0sQ0FBQ21ILElBQUQsQ0FBTixDQUFhbEgsRUFBYixDQUFnQixPQUFoQixFQUF5QixZQUFXO0FBQ2hDbUgsSUFBQUEsQ0FBQyxDQUFDLE1BQUQsQ0FBRCxDQUFVQyxVQUFWLENBQXFCLE9BQXJCO0FBQ0FySCxJQUFBQSxNQUFNLENBQUMsTUFBRCxDQUFOLENBQWV5RSxRQUFmLENBQXdCLFdBQVd5QyxPQUFuQztBQUNILEdBSEQ7QUFJSCxDQVBEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbiAgLy8gcmVtb3ZlIGxpbmUgYmVsb3cgd2hlbiB0ZXN0aW5nIGZyb250ZW5kXG4gIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG4gIHZhciByaW1yYWYgPSByZXF1aXJlKFwicmltcmFmXCIpO1xuICBcbi8vIFBhdGhzXG5sZXQgY2FtcGFpZ25MaXN0UGF0aCA9IFwiLi9jYW1wYWlnbi5qc29uXCI7XG5sZXQgYm9va1BhdGggPSBcIi4vYm9vay9cIjtcbmxldCBjYW1wYWlnbkRpclBhdGggPSBcIi4vY2FtcGFpZ25zL1wiO1xubGV0IHRoaXNDYW1wYWlnblBhdGg7XG4vLy9cblxuLy9nbG9kYWwgb2JqZWN0c1xudmFyIGJvb2tzID0ge307XG52YXIgbnBjID0ge307XG52YXIgY2FtcGFpZ25PYmogPSB7fTtcbnZhciB0aGlzQ2FtcGFpZ24gPSB7fTtcbi8vL1xuXG4vL2dsb2JhbCB2YXJzXG5sZXQgc3BhY2VDaGFyID0gXCJfX1wiO1xuLy8vXG5cbi8vdGVtcCB0byBjb3NlIHRoZSBjYW1wYWlnbiBwaWNrZXIuXG5qUXVlcnkoXCIuY2xvc2VDYW1wV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgalF1ZXJ5KFwiLmNhbXBhaWduc1wiKS5yZW1vdmUoKTtcbn0pO1xuXG5qUXVlcnkoXCJkb2N1bWVudFwiKS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIGpRdWVyeShcIi5kcmFnXCIpLmRyYWdnYWJsZSh7XG4gICAgICBjb250YWlubWVudDogXCIubWFpblZpZXdcIixcbiAgICAgIHNjcm9sbDogZmFsc2VcbiAgfSk7XG5cblxufSk7XG5cbk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSkge1xucmV0dXJuIHRoaXNbcHJvcGVydHldICE9PSB1bmRlZmluZWQ7XG59O1xuXG4vLyBnZXREaXJDb250ZW50cyhcIi4vYm9va3NcIikudGhlbihmdW5jdGlvbiAoZmlsZXMpIHtcbi8vICAgLy8gY29uc29sZS5sb2coKTtcbi8vICAgLy8gY29uc29sZS5sb2coSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlcy5maWxlc1swXS5uYW1lKSkpO1xuLy8gICBmb3IodmFyIGkgPSAwOyBpIDw9IGZpbGVzLmZpbGVzLmxlbmd0aCAtIDE7IGkrKykge1xuLy8gICAgIHJlYWRBRmlsZShcIi4vYm9va3MvXCIgKyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbGVzLmZpbGVzW2ldLm5hbWUpKSkudGhlbihmdW5jdGlvbiAoYm9vaykge1xuLy8gICAgICAgdmFyIGJvb2tUaXRsZSA9IEpTT04ucGFyc2UoYm9vayk7XG4vLyAgICAgICBjb25zb2xlLmxvZyhib29rVGl0bGUuZGV0YWlscy5uYW1lKTtcbi8vICAgICAgIGpRdWVyeShcIi5ib29rTGlzdFwiKS5hcHBlbmQoYDxkaXYgY2xhc3M9XCJib29rXCI+JHtib29rVGl0bGUuZGV0YWlscy5uYW1lfTxkaXY+YCk7XG5cbi8vICAgICAgICAvL2xvb2sgZm9yIG5wYywgdGhpcyB3aWxsIGV2ZW50dWFsbHkgYmUgaXRzIG93biBmdW5jdGlvblxuLy8gICAgICAgaWYoYm9va1RpdGxlLmhhc093blByb3BlcnR5KFwiTlBDXCIpKXtcbi8vICAgICAgICAgY29uc29sZS5sb2coYm9va1RpdGxlLmRldGFpbHMubmFtZStcIiB0cnVlXCIpXG4vLyAgICAgICB9ZWxzZXtcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJub25lIGZvdW5kXCIpXG4vLyAgICAgICB9XG5cbi8vICAgICB9KTtcbiAgIFxuXG5cbi8vICAgfVxuLy8gfSk7XG5cbiIsImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgXG4gIHN0YXJ0QXBwKCkudGhlbigoZGF0YSk9PntcbiAgICBzZXRDYW1wYWlnbnMoZGF0YSkudGhlbigoY2FtcExpc3QpPT57XG4gICAgICBqUXVlcnkoXCIuY2FtcGFpZ25MaXN0XCIpLnByZXBlbmQoY2FtcExpc3QpO1xuICAgIH0pXG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIGNvbnNvbGUubG9nKGNhbXBhaWduT2JqKVxuICB9KTtcbiBcbiAgfSlcbiAgXG5cbiAgZnVuY3Rpb24gc3RhcnRBcHAoKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgIHRyeXtcbiAgICAgICAgZ2V0Q2FtcGFpZ25zKGNhbXBhaWduTGlzdFBhdGgpLnRoZW4oKGRhdGEpPT57XG4gICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoZXJyb3Ipe1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gIH0iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHJlYWRBRmlsZShmaWxlcGF0aCl7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgZnMucmVhZEZpbGUoZmlsZXBhdGgsICd1dGYtOCcsIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIkFuIGVycm9yIG9jdXJyZWQgcmVhZGluZyB0aGUgZmlsZSA6XCIgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gd3JpdGVGaWxlKGZpbGVwYXRoLCBkYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZzLndyaXRlRmlsZShmaWxlcGF0aCwgZGF0YSwgKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgIHJlc29sdmUoXCJGaWxlIFdyaXR0ZW5cIik7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZ2V0RGlyQ29udGVudHMoZGlyKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgdmFyIGZpbGVzID0ge307XG4gICAgICAgIHZhciBmaWxlTmFtZXMgPSBbXTtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgZnMucmVhZGRpclN5bmMoZGlyKS5mb3JFYWNoKChmaWxlTmFtZSk9PntcbiAgICAgICAgICAgICAgICBmaWxlTmFtZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOmZpbGVOYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBmaWxlcyA9IHtcImZpbGVzXCI6ZmlsZU5hbWVzfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc29sdmUoZmlsZXMpO1xuICAgICAgICB9Y2F0Y2goZXJyb3Ipe1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBjaGVja0ZpbGVFeGlzdChwYXRoKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICBpZighcGF0aCl7XG4gICAgICAgICAgICAgcmVqZWN0KFwiUGF0aCBpcyBpbnZhbGlkIFwiK3BhdGgpXG4gICAgICAgIH1cbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgZnMuYWNjZXNzKHBhdGgsIGZzLkZfT0ssIChlcnIpPT57XG4gICAgICAgICAgICAgICAgaWYoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIHJlamVjdChcImVycm9yXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrRGlyRXhpc3QoZGlyKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgaWYoZnMuZXhpc3RzU3luYyhkaXIpKXtcbiAgICAgICAgICAgICAgICByZXNvbHZlKFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICByZXNvbHZlKFwiZmFsc2VcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURpcihkaXIpe1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBmcy5ta2RpclN5bmMoZGlyKTtcbiAgICAgICAgICAgIHJlc29sdmUoXCJkb25lXCIpO1xuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3BhY2Uoc3RyaW5nKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgdmFyIGNsZWFuU3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xccy9nLHNwYWNlQ2hhcik7XG4gICAgICAgICAgICByZXNvbHZlKGNsZWFuU3RyaW5nKTtcbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICBcbiAgICBcbn1cblxuZnVuY3Rpb24gYWRkU3BhY2Uoc3RyaW5nKXtcbiAgICBcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgdmFyIGFkZFNwYWNlID0gbmV3IFJlZ0V4cChzcGFjZUNoYXIsXCJnXCIpXG4gICAgICAgICAgICB2YXIgY2xlYW5TdHJpbmcgPSBzdHJpbmcucmVwbGFjZShhZGRTcGFjZSwgL1xccy8gKTtcbiAgICAgICAgICAgIHJlc29sdmUoY2xlYW5TdHJpbmcpO1xuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KVxufVxuLy93cml0ZSB0ZXN0XG4vLyB2YXIgdGVzdE9iaiAgPSBcIlRoaXMgaXMgYSB3cml0ZSB0ZXN0XCI7XG4vLyB3cml0ZUZpbGUoXCIuLi90ZXN0LnR4dFwiLCB0ZXN0T2JqKTtcbiIsIlxuZnVuY3Rpb24gdXBkYXRlQWJpbGl0eUJvbnVzKG15QWJpbGl0eSkge1xuICAgIHZhciBhYmlsaXR5ID0galF1ZXJ5KG15QWJpbGl0eSkudmFsKCk7XG5cbiAgICB2YXIgbW9kaWZpZXIgPSBqUXVlcnkobXlBYmlsaXR5KS5wYXJlbnQoKS5jaGlsZHJlbignLm1vZGlmaWVyLWJ1YmJsZScpLnRleHQoKTtcbiAgICBpZiAoIWpRdWVyeS5pc051bWVyaWMoYWJpbGl0eSkpIHtcbiAgICAgICAgYWJpbGl0eSA9IDE7XG4gICAgICAgIGpRdWVyeShteUFiaWxpdHkpLnZhbChhYmlsaXR5KTtcbiAgICB9XG5cbiAgICBtb2RpZmllciA9IE1hdGguZmxvb3IoKGFiaWxpdHkgLSAxMCkgLyAyKTtcbiAgICBqUXVlcnkobXlBYmlsaXR5KS5wYXJlbnQoKS5jaGlsZHJlbignLm1vZGlmaWVyLWJ1YmJsZScpLnRleHQobW9kaWZpZXIpO1xufTtcblxuXG5qUXVlcnkoXCIuYWJpbGl0eVwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHVwZGF0ZUFiaWxpdHlCb251cyhqUXVlcnkodGhpcykpO1xuXG4gICAgalF1ZXJ5KHRoaXMpLm9uKFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGpRdWVyeSh0aGlzKS5zZWxlY3QoKTtcbiAgICB9KVxuICAgIGpRdWVyeSh0aGlzKS5vbihcImtleXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB1cGRhdGVBYmlsaXR5Qm9udXMoalF1ZXJ5KHRoaXMpKTtcbiAgICAgICAgdXBkYXRlUHJvZihqUXVlcnkoJy5zYXZpbmdUaHJvd3MgIycralF1ZXJ5KHRoaXMpLmF0dHIoJ2lkJykpKTtcbiAgICB9KTtcbn0pO1xuIiwiZnVuY3Rpb24gY2xlYXJUb3AoKSB7XG4gICAgalF1ZXJ5KFwiLmRyYWdcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgalF1ZXJ5KHRoaXMpLnJlbW92ZUNsYXNzKFwib25Ub3BcIik7XG4gICAgfSk7XG59O1xuXG5qUXVlcnkoXCIuZHJhZ1wiKS5vbihcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRvcCgpO1xuICAgIGpRdWVyeSh0aGlzKS5hZGRDbGFzcyhcIm9uVG9wXCIpO1xufSk7XG4iLCJqUXVlcnkoXCIuY2FtcEFkZFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBuZXdDYW1wYWlnbigpO1xufSk7XG5cbi8vdGhlIGRlbGV0ZSBidXR0b25cbmpRdWVyeShcIi5jYW1wYWlnbkxpc3RcIikub24oXCJjbGlja1wiLCBcIi5jYW1wRGVsZXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG9EZWxldGUgPSBqUXVlcnkodGhpcykuYXR0cihcImRhdGEtZGVsZXRlXCIpO1xuICAgIHZhciB0b0RlbGV0ZU5hbWUgPSBqUXVlcnkodGhpcykuYXR0cihcImRhdGEtbmFtZVwiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcImNsaWNrZWRcIik7XG4gICAgLy9zaG91bGQgYWRkIGEgYXJlIHlvdSBzdXJlIHBvcHVwXG4gICAgdmFyIG5ld0FycmF5ID0gY2FtcGFpZ25PYmouY2FtcGFpZ25zO1xuICAgIC8vIGNvbnNvbGUubG9nKG5ld0FycmF5KVxuICAgIC8vIGNvbnNvbGUubG9nKFwiZGVsZXQgdGhpcyBudW1iZXIgXCIgKyB0b0RlbGV0ZSArIFwiIGFuZCB0aGlzIGlzIHRoZSBvYmplY3RcIiArIEpTT04uc3RyaW5naWZ5KGNhbXBhaWduT2JqLmNhbXBhaWducykpO1xuICAgIG5ld0FycmF5LnNwbGljZSh0b0RlbGV0ZSwgMSk7XG4gICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoY2FtcGFpZ25PYmopKTtcbiAgICB3cml0ZUZpbGUoY2FtcGFpZ25MaXN0UGF0aCwgSlNPTi5zdHJpbmdpZnkoY2FtcGFpZ25PYmopKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkYXRhID09IFwiRmlsZSBXcml0dGVuXCIpIHtcbiAgICAgICAgICAgIHJlbW92ZVNwYWNlKHRvRGVsZXRlTmFtZSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJpbXJhZihjYW1wYWlnbkRpclBhdGggKyBkYXRhLCAoc3R1ZmYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3R1ZmYpXG4gICAgICAgICAgICAgICAgICAgIGdldENhbXBhaWducyhjYW1wYWlnbkxpc3RQYXRoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDYW1wYWlnbnMoZGF0YSkudGhlbigoY2FtcExpc3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoXCIuY2FtcGFpZ25MaXN0XCIpLmh0bWwoY2FtcExpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pXG59KTtcblxualF1ZXJ5KFwiLmNhbXBhaWduTGlzdFwiKS5vbihcImNsaWNrXCIsIFwiLnNhdmVOZXdDYW1wXCIsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3Q2FtcE5hbWUgPSBqUXVlcnkoXCJpbnB1dFtuYW1lPSduZXdDYW1wJ11cIikudmFsKCk7XG4gICAgdmFyIGNhbXBPYmogPSB7XG4gICAgICAgIFwibmFtZVwiOiBuZXdDYW1wTmFtZVxuICAgIH07XG4gICAgdGhpc0NhbXBhaWduID0ge1xuICAgICAgICBcImNhbXBhaWduXCI6IHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBuZXdDYW1wTmFtZVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhbXBhaWduT2JqLmNhbXBhaWducy5wdXNoKGNhbXBPYmopOyAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShjYW1wYWlnbk9iaikpXG5cbiAgICB3cml0ZUZpbGUoY2FtcGFpZ25MaXN0UGF0aCwgSlNPTi5zdHJpbmdpZnkoY2FtcGFpZ25PYmopKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhID09IFwiRmlsZSBXcml0dGVuXCIpIHtcbiAgICAgICAgICAgIGNyZWF0ZUNhbXBhaWduKG5ld0NhbXBOYW1lKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT0gXCJkb25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU3BhY2UobmV3Q2FtcE5hbWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNDYW1wYWlnblBhdGggPSBjYW1wYWlnbkRpclBhdGggKyBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVGaWxlKHRoaXNDYW1wYWlnblBhdGggKyBcIi9jYW1wLmpzb25cIiwgSlNPTi5zdHJpbmdpZnkodGhpc0NhbXBhaWduKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KFwiLmNhbXBhaWduc1wiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuXG5mdW5jdGlvbiBjcmVhdGVDYW1wYWlnbihjYW1wTmFtZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHZhciBkaXI7XG4gICAgICAgIHJlbW92ZVNwYWNlKGNhbXBOYW1lKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBkaXIgPSBjYW1wYWlnbkRpclBhdGggKyBkYXRhO1xuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNoZWNrRGlyRXhpc3QoZGlyKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT0gXCJmYWxzZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZURpcihkaXIpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBuZXdDYW1wYWlnbigpIHtcbiAgICBnZXRDYW1wYWlnbnMoY2FtcGFpZ25MaXN0UGF0aCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBzZXRDYW1wYWlnbnMoZGF0YSkudGhlbigoaHRtbCkgPT4ge1xuICAgICAgICAgICAgdmFyIGFkZE9uSHRtbCA9IFwiPHRyPjx0ZD48aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nbmV3Q2FtcCcgLz48L3RkPjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tcHJpbWFyeSBzYXZlTmV3Q2FtcCc+U2F2ZTwvYnV0dG9uPjwvdGQ+PC90cj48L3RhYmxlPlwiO1xuICAgICAgICAgICAgdmFyIG5ld0h0bWwgPSBodG1sLnJlcGxhY2UoXCI8L3RhYmxlPlwiLCBhZGRPbkh0bWwpO1xuICAgICAgICAgICAgalF1ZXJ5KFwiLmNhbXBhaWduTGlzdFwiKS5odG1sKG5ld0h0bWwpO1xuICAgICAgICB9KVxuICAgIH0pXG5cbn1cblxuLy9HZXRzIHRoZSBsaXN0IG9mIGNhbXBhaWduc1xuZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zKHBhdGgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJnZXRDYW1wYWlnbnMgXCIgKyBwYXRoKTtcbiAgICAgICAgICAgIGNoZWNrRmlsZUV4aXN0KHBhdGgpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgICByZWFkQUZpbGUocGF0aCkudGhlbigoY2FtcGFpZ25zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wYWlnbnMgPSBKU09OLnBhcnNlKGNhbXBhaWducyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wYWlnbk9iaiA9IGNhbXBhaWducztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY2FtcGFpZ25PYmopO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG4vL1B1dHMgdGhlIGxpc3Qgb2YgY2FtcGFpZ25zIG9uIHRoZSBjYW1wYWlnbiBzZWxlY3Rvci5cbmZ1bmN0aW9uIHNldENhbXBhaWducyhjYW1wYWlnbnMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGNhbXBBcnJheSA9IGNhbXBhaWducy5jYW1wYWlnbnM7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IFwiPHRhYmxlPlwiO1xuICAgICAgICAgICAgY2FtcEFycmF5LmZvckVhY2goZnVuY3Rpb24gKG5vZGUsIGkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShub2RlKSlcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjYW1wYWlnbnMuY2FtcGFpZ25zW2ldLm5hbWUpXG4gICAgICAgICAgICAgICAgaHRtbCArPSBcIjx0cj48dGQ+XCIgKyBjYW1wYWlnbnMuY2FtcGFpZ25zW2ldLm5hbWUgKyBcIjwvdGQ+PHRkPjxidXR0b24gdHlwZT0nYnV0dG9uJyBkYXRhLWxvYWQ9J1wiICsgY2FtcGFpZ25zLmNhbXBhaWduc1tpXS5uYW1lICsgXCInIGNsYXNzPSdidG4gYnRuLXByaW1hcnkgY2FtcExvYWQnPkxvYWQ8L2J1dHRvbj48YnV0dG9uIHR5cGU9J2J1dHRvbicgZGF0YS1uYW1lPSdcIiArIGNhbXBhaWducy5jYW1wYWlnbnNbaV0ubmFtZSArIFwiJyBkYXRhLWRlbGV0ZT0nXCIgKyBpICsgXCInIGNsYXNzPSdidG4gYnRuLXByaW1hcnkgY2FtcERlbGV0ZSc+RGVsZXRlPC9idXR0b24+PC90ZD48L3RyPlwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGh0bWwgKz0gXCI8L3RhYmxlPlwiO1xuXG4gICAgICAgICAgICByZXNvbHZlKGh0bWwpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSIsImpRdWVyeShcIi5jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLnRvZ2dsZSgpO1xufSlcbmpRdWVyeShcIi5tZW51IGJ1dHRvblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wZW5NZSA9IGpRdWVyeSh0aGlzKS5hdHRyKFwiZGF0YS1vcGVuXCIpO1xuICAgIGpRdWVyeShcIi5cIiArIG9wZW5NZSkudG9nZ2xlKCk7XG4gICAgY2xlYXJUb3AoKTtcbiAgICBqUXVlcnkoXCIuXCIgKyBvcGVuTWUpLmFkZENsYXNzKFwib25Ub3BcIik7XG59KTsiLCIiLCJ2YXIgcHJvZkIgPSBqUXVlcnkoJyNwcm9mQm9udXMnKS52YWwoKTtcbnNvbWV0aGluZ0NsZXZlcigpO1xuXG5qUXVlcnkoJyNwcm9mQm9udXMnKS5vbihcImtleXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgIHByb2ZCID0galF1ZXJ5KCcjcHJvZkJvbnVzJykudmFsKCk7XG4gICAgc29tZXRoaW5nQ2xldmVyKCk7XG59KTtcblxuZnVuY3Rpb24gc29tZXRoaW5nQ2xldmVyKCkge1xuICAgIGpRdWVyeSgnLmljb24tcHJvZicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjbGFzc2VzID0gWydpY29uLXByb2YnLCAnaWNvbi1wcm9mIHByb2ZpY2llbnQnLCAnaWNvbi1wcm9mIGV4cGVydGlzZSddO1xuICAgICAgICB2YXIgY3VycmVudENsYXNzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgIHZhciBjdXJyZW50UG9zID0galF1ZXJ5LmluQXJyYXkoY3VycmVudENsYXNzLCBjbGFzc2VzKTtcbiAgICAgICAgdmFyIG15UHJvZiA9IGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbignLnByb2ZWYWwnKTtcbiAgICAgICAgdXBkYXRlUHJvZihqUXVlcnkobXlQcm9mKSwgY3VycmVudFBvcyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVByb2YobXlQcm9mLCBteVByb2ZTa2lsbEZsYWcpIHtcbiAgICB2YXIgdGhpc0FiaWxpdHkgPSBqUXVlcnkobXlQcm9mKS5hdHRyKCdpZCcpO1xuICAgIHZhciB0aGlzQWJpbGl0eUJvbnVzSUQgPSAnIycgKyB0aGlzQWJpbGl0eSArICctQm9udXMnO1xuICAgIHZhciB0aGlzQWJpbGl0eUJvbnVzID0galF1ZXJ5KCcuYWJpbGl0aWVzICcgKyB0aGlzQWJpbGl0eUJvbnVzSUQpLnRleHQoKTtcbiAgICB2YXIgbmV3VmFsID0gcGFyc2VJbnQodGhpc0FiaWxpdHlCb251cyk7XG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAwKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBwYXJzZUludCh0aGlzQWJpbGl0eUJvbnVzKTtcbiAgICB9XG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAxKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBwYXJzZUludChwcm9mQikgKyBwYXJzZUludCh0aGlzQWJpbGl0eUJvbnVzKTtcbiAgICB9XG4gICAgaWYgKG15UHJvZlNraWxsRmxhZyA9PSAyKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSBwYXJzZUludChwcm9mQikgKiAyICsgKHBhcnNlSW50KHRoaXNBYmlsaXR5Qm9udXMpKTtcbiAgICB9XG4gICAgalF1ZXJ5KG15UHJvZikudGV4dChuZXdWYWwpO1xufTtcblxuXG5qUXVlcnkoJy5pY29uLXByb2YnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICB2YXIgY2xhc3NlcyA9IFsnaWNvbi1wcm9mJywgJ2ljb24tcHJvZiBwcm9maWNpZW50JywgJ2ljb24tcHJvZiBleHBlcnRpc2UnXTtcbiAgICB2YXIgY3VycmVudENsYXNzID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJyk7XG4gICAgdmFyIGN1cnJlbnRQb3MgPSBqUXVlcnkuaW5BcnJheShjdXJyZW50Q2xhc3MsIGNsYXNzZXMpO1xuICAgIHZhciBuZXdQb3MgPSAoKGN1cnJlbnRQb3MgKyAxKSAlIGNsYXNzZXMubGVuZ3RoKTtcbiAgICB2YXIgbmV3Q2xhc3MgPSBjbGFzc2VzW25ld1Bvc107XG4gICAgalF1ZXJ5KHRoaXMpLmF0dHIoJ2NsYXNzJywgbmV3Q2xhc3MpO1xuICAgIHZhciBteVByb2YgPSBqUXVlcnkodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJy5wcm9mVmFsJyk7XG4gICAgdXBkYXRlUHJvZihqUXVlcnkobXlQcm9mKSwgbmV3UG9zKTtcbn0pO1xuIiwiLy90aGVtZXNcbnZhciBidXR0b25PcHRpb25zID0gWydkZWZhdWx0JywgJ2JsYWNrJywgJ2dyYXknLCAnbGlnaHQnLCAncmVkJ107XG5qUXVlcnkoYnV0dG9uT3B0aW9ucykuZWFjaChmdW5jdGlvbigpIHtcbiAgICB2YXIgbXlTdHlsZSA9IHRoaXM7XG4gICAgdmFyIG15SWQgPSAnIycgKyBteVN0eWxlO1xuICAgIGpRdWVyeShteUlkKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVBdHRyKCdjbGFzcycpO1xuICAgICAgICBqUXVlcnkoJ2JvZHknKS5hZGRDbGFzcygndGhlbWUtJyArIG15U3R5bGUpO1xuICAgIH0pXG59KVxuIl19
